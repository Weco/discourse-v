/* Copyright 2014 V, http://vapps.xyz */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.V=e()}}(function(){var e;return function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":14}],2:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":15}],3:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":16}],4:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":17}],5:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/get-own-property-names"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-names":18}],6:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":19}],7:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":20}],8:[function(e,t,n){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":21}],9:[function(e,t,n){"use strict";n["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n.__esModule=!0},{}],10:[function(e,t,n){"use strict";var i=e("babel-runtime/core-js/object/define-property")["default"];n["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),n.__esModule=!0},{"babel-runtime/core-js/object/define-property":3}],11:[function(e,t,n){"use strict";var i=e("babel-runtime/core-js/object/get-own-property-descriptor")["default"];n["default"]=function(e,t,n){for(var r=!0;r;){var s=e,o=t,a=n;l=c=u=void 0,r=!1,null===s&&(s=Function.prototype);var l=i(s,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(s);if(null===c)return void 0;e=c,t=o,n=a,r=!0}},n.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":4}],12:[function(e,t,n){"use strict";var i=e("babel-runtime/core-js/object/create")["default"],r=e("babel-runtime/core-js/object/set-prototype-of")["default"];n["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=i(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r?r(e,t):e.__proto__=t)},n.__esModule=!0},{"babel-runtime/core-js/object/create":2,"babel-runtime/core-js/object/set-prototype-of":7}],13:[function(e,t,n){"use strict";n["default"]=function(e){return e&&e.__esModule?e:{"default":e}},n.__esModule=!0},{}],14:[function(e,t,n){e("../../modules/es6.object.assign"),t.exports=e("../../modules/$.core").Object.assign},{"../../modules/$.core":27,"../../modules/es6.object.assign":72}],15:[function(e,t,n){var i=e("../../modules/$");t.exports=function(e,t){return i.create(e,t)}},{"../../modules/$":50}],16:[function(e,t,n){var i=e("../../modules/$");t.exports=function(e,t,n){return i.setDesc(e,t,n)}},{"../../modules/$":50}],17:[function(e,t,n){var i=e("../../modules/$");e("../../modules/es6.object.statics-accept-primitives"),t.exports=function(e,t){return i.getDesc(e,t)}},{"../../modules/$":50,"../../modules/es6.object.statics-accept-primitives":74}],18:[function(e,t,n){var i=e("../../modules/$");e("../../modules/es6.object.statics-accept-primitives"),t.exports=function(e){return i.getNames(e)}},{"../../modules/$":50,"../../modules/es6.object.statics-accept-primitives":74}],19:[function(e,t,n){e("../../modules/es6.object.statics-accept-primitives"),t.exports=e("../../modules/$.core").Object.keys},{"../../modules/$.core":27,"../../modules/es6.object.statics-accept-primitives":74}],20:[function(e,t,n){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":27,"../../modules/es6.object.set-prototype-of":73}],21:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/$.core").Promise},{"../modules/$.core":27,"../modules/es6.object.to-string":75,"../modules/es6.promise":76,"../modules/es6.string.iterator":77,"../modules/web.dom.iterable":78}],22:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],23:[function(e,t,n){var i=e("./$.is-object");t.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":42}],24:[function(e,t,n){var i=e("./$.to-object"),r=e("./$.es5-object"),s=e("./$.enum-keys");t.exports=Object.assign||function(e,t){for(var n=i(e,!0),o=arguments.length,a=1;o>a;)for(var l,u=r(arguments[a++]),c=s(u),h=c.length,d=0;h>d;)n[l=c[d++]]=u[l];return n}},{"./$.enum-keys":32,"./$.es5-object":33,"./$.to-object":66}],25:[function(e,t,n){var i=e("./$.cof"),r=e("./$.wks")("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=(t=Object(e))[r])?n:s?i(t):"Object"==(o=i(t))&&"function"==typeof t.callee?"Arguments":o}},{"./$.cof":26,"./$.wks":69}],26:[function(e,t,n){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],27:[function(e,t,n){var i=t.exports={};"number"==typeof __e&&(__e=i)},{}],28:[function(e,t,n){var i=e("./$.a-function");t.exports=function(e,t,n){if(i(e),~n&&void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":22}],29:[function(e,t,n){function i(e,t){return function(){return e.apply(t,arguments)}}function r(e,t,n){var l,u,c,h,d=e&r.G,p=e&r.P,f=d?s:e&r.S?s[t]:(s[t]||{})[a],m=d?o:o[t]||(o[t]={});d&&(n=t);for(l in n)u=!(e&r.F)&&f&&l in f,u&&l in m||(c=u?f[l]:n[l],d&&"function"!=typeof f[l]?h=n[l]:e&r.B&&u?h=i(c,s):e&r.W&&f[l]==c?!function(e){h=function(t){return this instanceof e?new e(t):e(t)},h[a]=e[a]}(c):h=p&&"function"==typeof c?i(Function.call,c):c,m[l]=h,p&&((m[a]||(m[a]={}))[l]=c))}var s=e("./$.global"),o=e("./$.core"),a="prototype";r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,t.exports=r},{"./$.core":27,"./$.global":36}],30:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],31:[function(e,t,n){var i=e("./$.is-object"),r=e("./$.global").document,s=i(r)&&i(r.createElement);t.exports=function(e){return s?r.createElement(e):{}}},{"./$.global":36,"./$.is-object":42}],32:[function(e,t,n){var i=e("./$");t.exports=function(e){var t=i.getKeys(e),n=i.isEnum,r=i.getSymbols;if(r)for(var s,o=r(e),a=0;o.length>a;)n.call(e,s=o[a++])&&t.push(s);return t}},{"./$":50}],33:[function(e,t,n){var i=e("./$.cof"),r=Object;t.exports=0 in r("z")?r:function(e){return"String"==i(e)?e.split(""):r(e)}},{"./$.cof":26}],34:[function(e,t,n){var i=e("./$.ctx"),r=e("./$.iter-call"),s=e("./$.is-array-iter"),o=e("./$.an-object"),a=e("./$.to-length"),l=e("./core.get-iterator-method");t.exports=function(e,t,n,u){var c,h,d,p=l(e),f=i(n,u,t?2:1),m=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(s(p))for(c=a(e.length);c>m;m++)t?f(o(h=e[m])[0],h[1]):f(e[m]);else for(d=p.call(e);!(h=d.next()).done;)r(d,f,h.value,t)}},{"./$.an-object":23,"./$.ctx":28,"./$.is-array-iter":41,"./$.iter-call":44,"./$.to-length":65,"./core.get-iterator-method":70}],35:[function(e,t,n){function i(e){try{return o(e)}catch(t){return a.slice()}}var r={}.toString,s=e("./$.to-object"),o=e("./$").getNames,a="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.get=function(e){return a&&"[object Window]"==r.call(e)?i(e):o(s(e))}},{"./$":50,"./$.to-object":66}],36:[function(e,t,n){var i="undefined"!=typeof self&&self.Math==Math?self:Function("return this")();t.exports=i,"number"==typeof __g&&(__g=i)},{}],37:[function(e,t,n){var i={}.hasOwnProperty;t.exports=function(e,t){return i.call(e,t)}},{}],38:[function(e,t,n){var i=e("./$"),r=e("./$.property-desc");t.exports=e("./$.support-desc")?function(e,t,n){return i.setDesc(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},{"./$":50,"./$.property-desc":53,"./$.support-desc":61}],39:[function(e,t,n){t.exports=e("./$.global").document&&document.documentElement},{"./$.global":36}],40:[function(e,t,n){t.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);case 5:return i?e(t[0],t[1],t[2],t[3],t[4]):e.call(n,t[0],t[1],t[2],t[3],t[4])}return e.apply(n,t)}},{}],41:[function(e,t,n){var i=e("./$.iterators"),r=e("./$.wks")("iterator");t.exports=function(e){return("Array"in i?i.Array:Array.prototype[r])===e}},{"./$.iterators":49,"./$.wks":69}],42:[function(e,t,n){t.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},{}],43:[function(e,t,n){t.exports="keys"in[]&&!("next"in[].keys())},{}],44:[function(e,t,n){function i(e){var t=e["return"];void 0!==t&&r(t.call(e))}var r=e("./$.an-object");t.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(o){throw i(e),o}}},{"./$.an-object":23}],45:[function(e,t,n){"use strict";var i=e("./$"),r={};e("./$.hide")(r,e("./$.wks")("iterator"),function(){return this}),t.exports=function(t,n,s){t.prototype=i.create(r,{next:e("./$.property-desc")(1,s)}),e("./$.tag")(t,n+" Iterator")}},{"./$":50,"./$.hide":38,"./$.property-desc":53,"./$.tag":62,"./$.wks":69}],46:[function(e,t,n){"use strict";function i(){return this}var r=e("./$.library"),s=e("./$.def"),o=e("./$.redef"),a=e("./$.hide"),l=e("./$.has"),u=e("./$.wks")("iterator"),c=e("./$.iterators"),h="@@iterator",d="keys",p="values";t.exports=function(t,n,f,m,v,g,y){function b(e){switch(e){case d:return function(){return new f(this,e)};case p:return function(){return new f(this,e)}}return function(){return new f(this,e)}}e("./$.iter-create")(f,n,m);var _,w,k=n+" Iterator",x=t.prototype,E=x[u]||x[h]||v&&x[v],S=E||b(v);if(E){var C=e("./$").getProto(S.call(new t));e("./$.tag")(C,k,!0),!r&&l(x,h)&&a(C,u,i)}if((!r||y)&&a(x,u,S),c[n]=S,c[k]=i,v)if(_={keys:g?S:b(d),values:v==p?S:b(p),entries:v!=p?S:b("entries")},y)for(w in _)w in x||o(x,w,_[w]);else s(s.P+s.F*e("./$.iter-buggy"),n,_)}},{"./$":50,"./$.def":29,"./$.has":37,"./$.hide":38,"./$.iter-buggy":43,"./$.iter-create":45,"./$.iterators":49,"./$.library":51,"./$.redef":54,"./$.tag":62,"./$.wks":69}],47:[function(e,t,n){var i=e("./$.wks")("iterator"),r=!1;try{var s=[7][i]();s["return"]=function(){r=!0},Array.from(s,function(){throw 2})}catch(o){}t.exports=function(e){if(!r)return!1;var t=!1;try{var n=[7],s=n[i]();s.next=function(){t=!0},n[i]=function(){return s},e(n)}catch(o){}return t}},{"./$.wks":69}],48:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],49:[function(e,t,n){t.exports={}},{}],50:[function(e,t,n){var i=Object;t.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},{}],51:[function(e,t,n){t.exports=!0},{}],52:[function(e,t,n){var i=e("./$.redef");t.exports=function(e,t){for(var n in t)i(e,n,t[n]);return e}},{"./$.redef":54}],53:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],54:[function(e,t,n){t.exports=e("./$.hide")},{"./$.hide":38}],55:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},{}],56:[function(e,t,n){function i(e,t){if(o(e),!s(t)&&null!==t)throw TypeError(t+": can't set as prototype!")}var r=e("./$").getDesc,s=e("./$.is-object"),o=e("./$.an-object");t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n){try{n=e("./$.ctx")(Function.call,r(Object.prototype,"__proto__").set,2),n({},[])}catch(s){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}():void 0),check:i}},{"./$":50,"./$.an-object":23,"./$.ctx":28,"./$.is-object":42}],57:[function(e,t,n){var i=e("./$.global"),r="__core-js_shared__",s=i[r]||(i[r]={});t.exports=function(e){return s[e]||(s[e]={})}},{"./$.global":36}],58:[function(e,t,n){var i=e("./$"),r=e("./$.wks")("species");t.exports=function(t){!e("./$.support-desc")||r in t||i.setDesc(t,r,{configurable:!0,get:function(){return this}})}},{"./$":50,"./$.support-desc":61,"./$.wks":69}],59:[function(e,t,n){t.exports=function(e,t,n){if(!(e instanceof t))throw TypeError(n+": use the 'new' operator!");return e}},{}],60:[function(e,t,n){var i=e("./$.to-integer"),r=e("./$.defined");t.exports=function(e){return function(t,n){var s,o,a=String(r(t)),l=i(n),u=a.length;return 0>l||l>=u?e?"":void 0:(s=a.charCodeAt(l),55296>s||s>56319||l+1===u||(o=a.charCodeAt(l+1))<56320||o>57343?e?a.charAt(l):s:e?a.slice(l,l+2):(s-55296<<10)+(o-56320)+65536)}}},{"./$.defined":30,"./$.to-integer":64}],61:[function(e,t,n){t.exports=!!function(){try{return 2==Object.defineProperty({},"a",{get:function(){return 2}}).a}catch(e){}}()},{}],62:[function(e,t,n){var i=e("./$.has"),r=e("./$.hide"),s=e("./$.wks")("toStringTag");t.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,s)&&r(e,s,t)}},{"./$.has":37,"./$.hide":38,"./$.wks":69}],63:[function(e,t,n){"use strict";function i(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}}function r(e){i.call(e.data)}var s,o,a,l=e("./$.ctx"),u=e("./$.invoke"),c=e("./$.html"),h=e("./$.dom-create"),d=e("./$.global"),p=d.process,f=d.setImmediate,m=d.clearImmediate,v=d.MessageChannel,g=0,y={},b="onreadystatechange";f&&m||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++g]=function(){u("function"==typeof e?e:Function(e),t)},s(g),g},m=function(e){delete y[e]},"process"==e("./$.cof")(p)?s=function(e){p.nextTick(l(i,e,1))}:d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(s=function(e){d.postMessage(e,"*")},d.addEventListener("message",r,!1)):v?(o=new v,a=o.port2,o.port1.onmessage=r,s=l(a.postMessage,a,1)):s=b in h("script")?function(e){c.appendChild(h("script"))[b]=function(){c.removeChild(this),i.call(e)}}:function(e){setTimeout(l(i,e,1),0)}),t.exports={set:f,clear:m}},{"./$.cof":26,"./$.ctx":28,"./$.dom-create":31,"./$.global":36,"./$.html":39,"./$.invoke":40}],64:[function(e,t,n){var i=Math.ceil,r=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?r:i)(e)}},{}],65:[function(e,t,n){var i=e("./$.to-integer"),r=Math.min;t.exports=function(e){return e>0?r(i(e),9007199254740991):0}},{"./$.to-integer":64}],66:[function(e,t,n){var i=e("./$.es5-object"),r=e("./$.defined");t.exports=function(e,t){return(t?Object:i)(r(e))}},{"./$.defined":30,"./$.es5-object":33}],67:[function(e,t,n){var i=0,r=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+r).toString(36))}},{}],68:[function(e,t,n){t.exports=function(){}},{}],69:[function(e,t,n){var i=e("./$.shared")("wks"),r=e("./$.global").Symbol;t.exports=function(t){return i[t]||(i[t]=r&&r[t]||(r||e("./$.uid"))("Symbol."+t))}},{"./$.global":36,"./$.shared":57,"./$.uid":67}],70:[function(e,t,n){var i=e("./$.global"),r=e("./$.classof"),s=e("./$.wks")("iterator"),o=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){var t=i.Symbol;return void 0!=e?e[t&&t.iterator||"@@iterator"]||e[s]||o[r(e)]:void 0}},{"./$.classof":25,"./$.core":27,"./$.global":36,"./$.iterators":49,"./$.wks":69}],71:[function(e,t,n){var i=e("./$.unscope"),r=e("./$.iter-step"),s=e("./$.iterators"),o=e("./$.to-object");e("./$.iter-define")(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},{"./$.iter-define":46,"./$.iter-step":48,"./$.iterators":49,"./$.to-object":66,"./$.unscope":68}],72:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{assign:e("./$.assign")})},{"./$.assign":24,"./$.def":29}],73:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.def":29,"./$.set-proto":56}],74:[function(e,t,n){var i=e("./$"),r=e("./$.core"),s=e("./$.def"),o=e("./$.to-object"),a=e("./$.is-object");i.each.call("freeze,seal,preventExtensions,isFrozen,isSealed,isExtensible,getOwnPropertyDescriptor,getPrototypeOf,keys,getOwnPropertyNames".split(","),function(t,n){var i=(r.Object||{})[t]||Object[t],l=0,u={};u[t]=0==n?function(e){return a(e)?i(e):e}:1==n?function(e){return a(e)?i(e):e}:2==n?function(e){return a(e)?i(e):e}:3==n?function(e){return a(e)?i(e):!0}:4==n?function(e){return a(e)?i(e):!0}:5==n?function(e){return a(e)?i(e):!1}:6==n?function(e,t){return i(o(e),t)}:7==n?function(e){return i(o(e,!0))}:8==n?function(e){return i(o(e))}:e("./$.get-names").get;try{i("z")}catch(c){l=1}s(s.S+s.F*l,"Object",u)})},{"./$":50,"./$.core":27,"./$.def":29,"./$.get-names":35,"./$.is-object":42,"./$.to-object":66}],75:[function(e,t,n){},{}],76:[function(e,t,n){"use strict";function i(e){var t=new L(function(){});return e&&(t.constructor=Object),L.resolve(t)===t}function r(e){return b(e)&&(D?"Promise"==g(e):j in e)}function s(e,t){return f&&e===L&&t===d?!0:S(e,t)}function o(e){var t=_(e)[A];return void 0!=t?t:e}function a(e){var t;return b(e)&&"function"==typeof(t=e.then)?t:!1}function l(e,t){if(!e.n){e.n=!0;var n=e.c;O.call(m,function(){function i(t){var n,i,o=s?t.ok:t.fail;try{o?(s||(e.h=!0),n=o===!0?r:o(r),n===t.P?t.rej(TypeError("Promise-chain cycle")):(i=a(n))?i.call(n,t.res,t.rej):t.res(n)):t.rej(r)}catch(l){t.rej(l)}}for(var r=e.v,s=1==e.s,o=0;n.length>o;)i(n[o++]);n.length=0,e.n=!1,t&&setTimeout(function(){O.call(m,function(){u(e.p)&&(F?T.emit("unhandledRejection",r,e.p):m.console&&console.error&&console.error("Unhandled promise rejection",r)),e.a=void 0})},1)})}}function u(e){var t,n=e[j],i=n.a||n.c,r=0;if(n.h)return!1;for(;i.length>r;)if(t=i[r++],t.fail||!u(t.P))return!1;return!0}function c(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),l(t,!0))}function h(e){var t,n=this;if(!n.d){n.d=!0,n=n.r||n;try{(t=a(e))?O.call(m,function(){var i={r:n,d:!1};try{t.call(e,v(h,i,1),v(c,i,1))}catch(r){c.call(i,r)}}):(n.v=e,n.s=1,l(n,!1))}catch(i){c.call({r:n,d:!1},i)}}}var d,p=e("./$"),f=e("./$.library"),m=e("./$.global"),v=e("./$.ctx"),g=e("./$.classof"),y=e("./$.def"),b=e("./$.is-object"),_=e("./$.an-object"),w=e("./$.a-function"),k=e("./$.strict-new"),x=e("./$.for-of"),E=e("./$.set-proto").set,S=e("./$.same"),C=e("./$.species"),A=e("./$.wks")("species"),j=e("./$.uid")("record"),P="Promise",T=m.process,F="process"==g(T),O=T&&T.nextTick||e("./$.task").set,L=m[P],D=function(){function t(e){var n=new L(e);return E(n,t.prototype),n}var n=!1;try{if(n=L&&L.resolve&&i(),E(t,L),t.prototype=p.create(L.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(n=!1),n&&e("./$.support-desc")){var r=!1;L.resolve(p.setDesc({},"then",{get:function(){r=!0}})),n=r}}catch(s){n=!1}return n}();D||(L=function(e){w(e);var t={p:k(this,L,P),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};this[j]=t;try{e(v(h,t,1),v(c,t,1))}catch(n){c.call(t,n)}},e("./$.mix")(L.prototype,{then:function(e,t){var n=_(_(this).constructor)[A],i={ok:"function"==typeof e?e:!0,fail:"function"==typeof t?t:!1},r=i.P=new(void 0!=n?n:L)(function(e,t){i.res=w(e),i.rej=w(t)}),s=this[j];return s.c.push(i),s.a&&s.a.push(i),s.s&&l(s,!1),r},"catch":function(e){return this.then(void 0,e)}})),y(y.G+y.W+y.F*!D,{Promise:L}),e("./$.tag")(L,P),C(L),C(d=e("./$.core")[P]),y(y.S+y.F*!D,P,{reject:function(e){return new this(function(t,n){n(e)})}}),y(y.S+y.F*(!D||i(!0)),P,{resolve:function(e){return r(e)&&s(e.constructor,this)?e:new this(function(t){t(e)})}}),y(y.S+y.F*!(D&&e("./$.iter-detect")(function(e){L.all(e)["catch"](function(){})})),P,{all:function(e){var t=o(this),n=[];return new t(function(i,r){x(e,!1,n.push,n);var s=n.length,o=Array(s);s?p.each.call(n,function(e,n){t.resolve(e).then(function(e){o[n]=e,--s||i(o)},r)}):i(o)})},race:function(e){var t=o(this);return new t(function(n,i){x(e,!1,function(e){t.resolve(e).then(n,i)})})}})},{"./$":50,"./$.a-function":22,"./$.an-object":23,"./$.classof":25,"./$.core":27,"./$.ctx":28,"./$.def":29,"./$.for-of":34,"./$.global":36,"./$.is-object":42,"./$.iter-detect":47,"./$.library":51,"./$.mix":52,"./$.same":55,"./$.set-proto":56,"./$.species":58,"./$.strict-new":59,"./$.support-desc":61,"./$.tag":62,"./$.task":63,"./$.uid":67,"./$.wks":69}],77:[function(e,t,n){var i=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":46,"./$.string-at":60}],78:[function(e,t,n){e("./es6.array.iterator");var i=e("./$.iterators");i.NodeList=i.HTMLCollection=i.Array},{"./$.iterators":49,"./es6.array.iterator":71}],79:[function(t,n,i){!function(i,r){if("function"==typeof e&&e.amd)e(["jquery"],r);else if("object"==typeof n&&n.exports){var s;try{s=t("jquery")}catch(o){s=null}n.exports=r(s)}else i.Slider=r(i.jQuery)}(this,function(e){var t;return function(e){"use strict";function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function r(t,n){e.fn[t]=function(r){if("string"==typeof r){for(var o=i.call(arguments,1),a=0,l=this.length;l>a;a++){var u=this[a],c=e.data(u,t);if(c)if(e.isFunction(c[r])&&"_"!==r.charAt(0)){var h=c[r].apply(c,o);if(void 0!==h&&h!==c)return h}else s("no such method '"+r+"' for "+t+" instance");else s("cannot call methods on "+t+" prior to initialization; attempted to call '"+r+"'")}return this}var d=this.map(function(){var i=e.data(this,t);return i?(i.option(r),i._init()):(i=new n(this,r),e.data(this,t,i)),e(this)});return!d||d.length>1?d:d[0]}}if(e){var s="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),r(e,t)},e.bridget}}var i=Array.prototype.slice;n(e)}(e),function(e){function n(t,n){function i(e,t){var n="data-slider-"+t.replace(/_/g,"-"),i=e.getAttribute(n);try{return JSON.parse(i)}catch(r){return i}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:null,over:null},"string"==typeof t?this.element=document.querySelector(t):t instanceof HTMLElement&&(this.element=t),n=n?n:{};for(var s=Object.keys(this.defaultOptions),o=0;o<s.length;o++){var a=s[o],l=n[a];l="undefined"!=typeof l?l:i(this.element,a),l=null!==l?l:this.defaultOptions[a],this.options||(this.options={}),this.options[a]=l}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var u,c,h,d,p,f=this.element.style.width,m=!1,v=this.element.parentNode;if(this.sliderElem)m=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var g=document.createElement("div");if(g.className="slider-track",c=document.createElement("div"),c.className="slider-track-low",u=document.createElement("div"),u.className="slider-selection",h=document.createElement("div"),h.className="slider-track-high",d=document.createElement("div"),d.className="slider-handle min-slider-handle",p=document.createElement("div"),p.className="slider-handle max-slider-handle",g.appendChild(c),g.appendChild(u),g.appendChild(h),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(o=0;o<this.options.ticks.length;o++){var y=document.createElement("div");y.className="slider-tick",this.ticks.push(y),g.appendChild(y)}u.className+=" tick-slider-selection"}if(g.appendChild(d),g.appendChild(p),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",o=0;o<this.options.ticks_labels.length;o++){var b=document.createElement("div");b.className="slider-tick-label",b.innerHTML=this.options.ticks_labels[o],this.tickLabels.push(b),this.tickLabelContainer.appendChild(b)}var _=function(e){var t=document.createElement("div");t.className="tooltip-arrow";var n=document.createElement("div");n.className="tooltip-inner",e.appendChild(t),e.appendChild(n)},w=document.createElement("div");w.className="tooltip tooltip-main",_(w);var k=document.createElement("div");k.className="tooltip tooltip-min",_(k);var x=document.createElement("div");x.className="tooltip tooltip-max",_(x),this.sliderElem.appendChild(g),this.sliderElem.appendChild(w),this.sliderElem.appendChild(k),this.sliderElem.appendChild(x),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),v.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(e&&(this.$element=e(this.element),this.$sliderElem=e(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),r[this.options.scale]&&(this.options.scale=r[this.options.scale]),m===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(e){this._removeProperty(this.trackLow,e),this._removeProperty(this.trackSelection,e),this._removeProperty(this.trackHigh,e)},this),[this.handle1,this.handle2].forEach(function(e){this._removeProperty(e,"left"),this._removeProperty(e,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(e){this._removeProperty(e,"left"),this._removeProperty(e,"top"),this._removeProperty(e,"margin-left"),this._removeProperty(e,"margin-top"),this._removeClass(e,"right"),this._removeClass(e,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=f,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value,this.trackLow=c||this.trackLow,this.trackSelection=u||this.trackSelection,this.trackHigh=h||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=d||this.handle1,this.handle2=p||this.handle2,m===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),o=0;o<this.ticks.length;o++)this._removeClass(this.ticks[o],"round triangle hide");var E=["round","triangle","custom"],S=-1!==E.indexOf(this.options.handle);if(S)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),o=0;o<this.ticks.length;o++)this._addClass(this.ticks[o],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchCapable&&this.sliderElem.addEventListener("touchstart",this.mousedown,!1),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var i={formatInvalidInputErrorMsg:function(e){return"Invalid input value '"+e+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},r={linear:{toValue:function(e){var t=e/100*(this.options.max-this.options.min);if(this.options.ticks_positions.length>0){for(var n,i,r,s=0,o=0;o<this.options.ticks_positions.length;o++)if(e<=this.options.ticks_positions[o]){n=o>0?this.options.ticks[o-1]:0,r=o>0?this.options.ticks_positions[o-1]:0,i=this.options.ticks[o],s=this.options.ticks_positions[o];break}if(o>0){var a=(e-r)/(s-r);t=n+a*(i-n)}}var l=this.options.min+Math.round(t/this.options.step)*this.options.step;return l<this.options.min?this.options.min:l>this.options.max?this.options.max:l},toPercentage:function(e){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var t,n,i,r=0,s=0;s<this.options.ticks.length;s++)if(e<=this.options.ticks[s]){t=s>0?this.options.ticks[s-1]:0,i=s>0?this.options.ticks_positions[s-1]:0,n=this.options.ticks[s],r=this.options.ticks_positions[s];break}if(s>0){var o=(e-t)/(n-t);return i+o*(r-i)}}return 100*(e-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(e){var t=0===this.options.min?0:Math.log(this.options.min),n=Math.log(this.options.max),i=Math.exp(t+(n-t)*e/100);

return i=this.options.min+Math.round((i-this.options.min)/this.options.step)*this.options.step,i<this.options.min?this.options.min:i>this.options.max?this.options.max:i},toPercentage:function(e){if(this.options.max===this.options.min)return 0;var t=Math.log(this.options.max),n=0===this.options.min?0:Math.log(this.options.min),i=0===e?0:Math.log(e);return 100*(i-n)/(t-n)}}};if(t=function(e,t){return n.call(this,e,t),this},t.prototype={_init:function(){},constructor:t,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(e){return Array.isArray(e)?e[0]+" : "+e[1]:e},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(e,t,n){e||(e=0);var i=this.getValue();this._state.value=this._validateInputValue(e);var r=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=r(this._state.value[0]),this._state.value[1]=r(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=r(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min),this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:[0,0,100],this._layout();var s=this.options.range?this._state.value:this._state.value[0];return t===!0&&this._trigger("slide",s),i!==s&&n===!0&&this._trigger("change",{oldValue:i,newValue:s}),this._setDataVal(s),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),e&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(e,t){return this._bindNonQueryEventHandler(e,t),this},off:function(t,n){e?(this.$element.off(t,n),this.$sliderElem.off(t,n)):this._unbindNonQueryEventHandler(t,n)},getAttribute:function(e){return e?this.options[e]:this.options},setAttribute:function(e,t){return this.options[e]=t,this},refresh:function(){return this._removeSliderEventHandlers(),n.call(this,this.element,this.options),e&&e.data(this.element,"slider",this),this},relayout:function(){return this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.handle2.removeEventListener("focus",this.handle2Keydown,!1),this.handle2.removeEventListener("blur",this.handle2Keydown,!1),this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.mousedown,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1)},_bindNonQueryEventHandler:function(e,t){void 0===this.eventToCallbackMap[e]&&(this.eventToCallbackMap[e]=[]),this.eventToCallbackMap[e].push(t)},_unbindNonQueryEventHandler:function(e,t){var n=this.eventToCallbackMap[e];if(void 0!==n)for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}},_cleanUpEventCallbacksMap:function(){for(var e=Object.keys(this.eventToCallbackMap),t=0;t<e.length;t++){var n=e[t];this.eventToCallbackMap[n]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var e;if(e=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=e[0]+"%",this.handle2.style[this.stylePos]=e[1]+"%",Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var t=Math.max.apply(Math,this.options.ticks),n=Math.min.apply(Math,this.options.ticks),i="vertical"===this.options.orientation?"height":"width",r="vertical"===this.options.orientation?"marginTop":"marginLeft",s=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var o=0;if(0===this.options.ticks_positions.length)this.tickLabelContainer.style[r]=-s/2+"px",o=this.tickLabelContainer.offsetHeight;else for(a=0;a<this.tickLabelContainer.childNodes.length;a++)this.tickLabelContainer.childNodes[a].offsetHeight>o&&(o=this.tickLabelContainer.childNodes[a].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=o+"px")}for(var a=0;a<this.options.ticks.length;a++){var l=this.options.ticks_positions[a]||100*(this.options.ticks[a]-n)/(t-n);this.ticks[a].style[this.stylePos]=l+"%",this._removeClass(this.ticks[a],"in-selection"),this.options.range?l>=e[0]&&l<=e[1]&&this._addClass(this.ticks[a],"in-selection"):"after"===this.options.selection&&l>=e[0]?this._addClass(this.ticks[a],"in-selection"):"before"===this.options.selection&&l<=e[0]&&this._addClass(this.ticks[a],"in-selection"),this.tickLabels[a]&&(this.tickLabels[a].style[i]=s+"px",void 0!==this.options.ticks_positions[a]&&(this.tickLabels[a].style.position="absolute",this.tickLabels[a].style[this.stylePos]=this.options.ticks_positions[a]+"%",this.tickLabels[a].style[r]=-s/2+"px"))}}var u;if(this.options.range){u=this.options.formatter(this._state.value),this._setText(this.tooltipInner,u),this.tooltip.style[this.stylePos]=(e[1]+e[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var c=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,c);var h=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,h),this.tooltip_min.style[this.stylePos]=e[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=e[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else u=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,u),this.tooltip.style[this.stylePos]=e[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(e[0],e[1])+"%",this.trackSelection.style.top=Math.min(e[0],e[1])+"%",this.trackSelection.style.height=Math.abs(e[0]-e[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(e[0],e[1])-Math.abs(e[0]-e[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(e[0],e[1])+"%",this.trackSelection.style.left=Math.min(e[0],e[1])+"%",this.trackSelection.style.width=Math.abs(e[0]-e[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(e[0],e[1])-Math.abs(e[0]-e[1])+"%";var d=this.tooltip_min.getBoundingClientRect(),p=this.tooltip_max.getBoundingClientRect();d.right>p.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_removeProperty:function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},_mousedown:function(e){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var t=this._getPercentage(e);if(this.options.range){var n=Math.abs(this._state.percentage[0]-t),i=Math.abs(this._state.percentage[1]-t);this._state.dragged=i>n?0:1}else this._state.dragged=0;this._state.percentage[this._state.dragged]=t,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var r=this._calculateValue();return this._trigger("slideStart",r),this._setDataVal(r),this.setValue(r,!1,!0),this._pauseEvent(e),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_triggerFocusOnHandle:function(e){0===e&&this.handle1.focus(),1===e&&this.handle2.focus()},_keydown:function(e,t){if(!this._state.enabled)return!1;var n;switch(t.keyCode){case 37:case 40:n=-1;break;case 39:case 38:n=1}if(n){if(this.options.natural_arrow_keys){var i="vertical"===this.options.orientation&&!this.options.reversed,r="horizontal"===this.options.orientation&&this.options.reversed;(i||r)&&(n=-n)}var s=this._state.value[e]+n*this.options.step;return this.options.range&&(s=[e?this._state.value[0]:s,e?s:this._state.value[1]]),this._trigger("slideStart",s),this._setDataVal(s),this.setValue(s,!0,!0),this._setDataVal(s),this._trigger("slideStop",s),this._layout(),this._pauseEvent(t),!1}},_pauseEvent:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1},_mousemove:function(e){if(!this._state.enabled)return!1;var t=this._getPercentage(e);this._adjustPercentageForRangeSliders(t),this._state.percentage[this._state.dragged]=t,this._layout();var n=this._calculateValue(!0);return this.setValue(n,!0,!0),!1},_adjustPercentageForRangeSliders:function(e){if(this.options.range){var t=this._getNumDigitsAfterDecimalPlace(e);t=t?t-1:0;var n=this._applyToFixedAndParseFloat(e,t);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],t)<n?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],t)>n&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var e=this._calculateValue(!0);return this._layout(),this._setDataVal(e),this._trigger("slideStop",e),!1},_calculateValue:function(e){var t;if(this.options.range?(t=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(t[0]=this._toValue(this._state.percentage[0]),t[0]=this._applyPrecision(t[0])),100!==this._state.percentage[1]&&(t[1]=this._toValue(this._state.percentage[1]),t[1]=this._applyPrecision(t[1]))):(t=this._toValue(this._state.percentage[0]),t=parseFloat(t),t=this._applyPrecision(t)),e){for(var n=[t,1/0],i=0;i<this.options.ticks.length;i++){var r=Math.abs(this.options.ticks[i]-t);r<=n[1]&&(n=[this.options.ticks[i],r])}if(n[1]<=this.options.ticks_snap_bounds)return n[0]}return t},_applyPrecision:function(e){var t=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(e,t)},_getNumDigitsAfterDecimalPlace:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},_applyToFixedAndParseFloat:function(e,t){var n=e.toFixed(t);return parseFloat(n)},_getPercentage:function(e){!this.touchCapable||"touchstart"!==e.type&&"touchmove"!==e.type||(e=e.touches[0]);var t=e[this.mousePos],n=this._state.offset[this.stylePos],i=t-n,r=i/this._state.size*100;return r=Math.round(r/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(r=100-r),Math.max(0,Math.min(100,r))},_validateInputValue:function(e){if("number"==typeof e)return e;if(Array.isArray(e))return this._validateArray(e),e;throw new Error(i.formatInvalidInputErrorMsg(e))},_validateArray:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("number"!=typeof n)throw new Error(i.formatInvalidInputErrorMsg(n))}},_setDataVal:function(e){this.element.setAttribute("data-value",e),this.element.setAttribute("value",e),this.element.value=e},_trigger:function(t,n){n=n||0===n?n:void 0;var i=this.eventToCallbackMap[t];if(i&&i.length)for(var r=0;r<i.length;r++){var s=i[r];s(n)}e&&this._triggerJQueryEvent(t,n)},_triggerJQueryEvent:function(e,t){var n={type:e,value:t};this.$element.trigger(n),this.$sliderElem.trigger(n)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(e,t){"undefined"!=typeof e.innerText?e.innerText=t:"undefined"!=typeof e.textContent&&(e.textContent=t)},_removeClass:function(e,t){for(var n=t.split(" "),i=e.className,r=0;r<n.length;r++){var s=n[r],o=new RegExp("(?:\\s|^)"+s+"(?:\\s|$)");i=i.replace(o," ")}e.className=i.trim()},_addClass:function(e,t){for(var n=t.split(" "),i=e.className,r=0;r<n.length;r++){var s=n[r],o=new RegExp("(?:\\s|^)"+s+"(?:\\s|$)"),a=o.test(i);a||(i+=" "+s)}e.className=i.trim()},_offsetLeft:function(e){return e.getBoundingClientRect().left},_offsetTop:function(e){for(var t=e.offsetTop;(e=e.offsetParent)&&!isNaN(e.offsetTop);)t+=e.offsetTop;return t},_offset:function(e){return{left:this._offsetLeft(e),top:this._offsetTop(e)}},_css:function(t,n,i){if(e)e.style(t,n,i);else{var r=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()});t.style[r]=i}},_toValue:function(e){return this.options.scale.toValue.apply(this,[e])},_toPercentage:function(e){return this.options.scale.toPercentage.apply(this,[e])},_setTooltipPosition:function(){var e=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var t=this.options.tooltip_position||"right",n="left"===t?"right":"left";e.forEach(function(e){this._addClass(e,t),e.style[n]="100%"}.bind(this))}else e.forEach("bottom"===this.options.tooltip_position?function(e){this._addClass(e,"bottom"),e.style.top="22px"}.bind(this):function(e){this._addClass(e,"top"),e.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},e){var s=e.fn.slider?"bootstrapSlider":"slider";e.bridget(s,t)}}(e),t})},{jquery:void 0}],80:[function(e,t,n){(function(){var e,n,i,r,s,o,a,l,u=[].slice,c={}.hasOwnProperty,h=function(e,t){function n(){this.constructor=e}for(var i in t)c.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};a=function(){},n=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,n,i,r,s;if(i=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[i])for(r=0,s=n.length;s>r;r++)t=n[r],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var n,i,r,s,o;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(i=this._callbacks[e],!i)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(r=s=0,o=i.length;o>s;r=++s)if(n=i[r],n===t){i.splice(r,1);break}return this},e}(),e=function(e){function t(e,n){var r,s,o;if(this.element=e,this.version=t.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(t.instances.push(this),this.element.dropzone=this,r=null!=(o=t.optionsForElement(this.element))?o:{},this.options=i({},this.defaultOptions,r,null!=n?n:{}),this.options.forceFallback||!t.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(s=this.getExistingFallback())&&s.parentNode&&s.parentNode.removeChild(s),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?t.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:t.getElements(this.options.clickable,"clickable")),this.init()}var i,r;return h(t,e),t.prototype.Emitter=n,t.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],t.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return a},forceFallback:!1,fallback:function(){var e,n,i,r,s,o;for(this.element.className=""+this.element.className+" dz-browser-not-supported",o=this.element.getElementsByTagName("div"),r=0,s=o.length;s>r;r++)e=o[r],/(^| )dz-message($| )/.test(e.className)&&(n=e,e.className="dz-message");return n||(n=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),i=n.getElementsByTagName("span")[0],i&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,i;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=n*t.optHeight:null==t.optHeight&&(t.optHeight=1/n*t.optWidth),i=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>i?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*i):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/i),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:a,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:a,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var n,i,r,s,o,a,l,u,c,h,d,p,f;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=t.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),h=e.previewElement.querySelectorAll("[data-dz-name]"),s=0,l=h.length;l>s;s++)n=h[s],n.textContent=e.name;for(d=e.previewElement.querySelectorAll("[data-dz-size]"),o=0,u=d.length;u>o;o++)n=d[o],n.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),i=function(n){return function(i){return i.preventDefault(),i.stopPropagation(),e.status===t.UPLOADING?t.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(e)}):n.options.dictRemoveFileConfirmation?t.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(e)}):n.removeFile(e)}}(this),p=e.previewElement.querySelectorAll("[data-dz-remove]"),f=[],a=0,c=p.length;c>a;a++)r=p[a],f.push(r.addEventListener("click",i));return f}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,i,r,s;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),s=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0,r=s.length;r>i;i++)n=s[i],n.alt=e.name,n.src=t;return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var n,i,r,s,o;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),s=e.previewElement.querySelectorAll("[data-dz-errormessage]"),o=[],i=0,r=s.length;r>i;i++)n=s[i],o.push(n.textContent=t);return o}},errormultiple:a,processing:function(e){return e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink)?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:a,uploadprogress:function(e,t,n){var i,r,s,o,a;if(e.previewElement){for(o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=[],r=0,s=o.length;s>r;r++)i=o[r],a.push("PROGRESS"===i.nodeName?i.value=t:i.style.width=""+t+"%");return a}},totaluploadprogress:a,sending:a,sendingmultiple:a,success:function(e){return e.previewElement?e.previewElement.classList.add("dz-success"):void 0},successmultiple:a,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:a,complete:function(e){return e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement?e.previewElement.classList.add("dz-complete"):void 0},completemultiple:a,maxfilesexceeded:a,maxfilesreached:a,queuecomplete:a,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},i=function(){var e,t,n,i,r,s,o;for(i=arguments[0],n=2<=arguments.length?u.call(arguments,1):[],s=0,o=n.length;o>s;s++){t=n[s];for(e in t)r=t[e],i[e]=r}return i},t.prototype.getAcceptedFiles=function(){var e,t,n,i,r;for(i=this.files,r=[],t=0,n=i.length;n>t;t++)e=i[t],e.accepted&&r.push(e);return r},t.prototype.getRejectedFiles=function(){var e,t,n,i,r;for(i=this.files,r=[],t=0,n=i.length;n>t;t++)e=i[t],e.accepted||r.push(e);return r},t.prototype.getFilesWithStatus=function(e){var t,n,i,r,s;for(r=this.files,s=[],n=0,i=r.length;i>n;n++)t=r[n],t.status===e&&s.push(t);return s},t.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(t.QUEUED)},t.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(t.UPLOADING)},t.prototype.getActiveFiles=function(){var e,n,i,r,s;for(r=this.files,s=[],n=0,i=r.length;i>n;n++)e=r[n],(e.status===t.UPLOADING||e.status===t.QUEUED)&&s.push(e);return s},t.prototype.init=function(){var e,n,i,r,s,o,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(e){return function(){return e.hiddenFileInput&&document.body.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.body.appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,n,r,s;if(n=e.hiddenFileInput.files,n.length)for(r=0,s=n.length;s>r;r++)t=n[r],e.addFile(t);return i()})}}(this))(),this.URL=null!=(o=window.URL)?o:window.webkitURL,a=this.events,r=0,s=a.length;s>r;r++)e=a[r],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){return 0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length?setTimeout(function(){return e.emit("queuecomplete")},0):void 0}}(this)),n=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(t){return n(t),e.emit("dragenter",t)}}(this),dragover:function(e){return function(t){var i;try{i=t.dataTransfer.effectAllowed}catch(r){}return t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",
n(t),e.emit("dragover",t)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(t){return n(t),e.drop(t)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(n){return e.listeners.push({element:n,events:{click:function(i){return n!==e.element||i.target===e.element||t.elementInside(i.target,e.element.querySelector(".dz-message"))?e.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},t.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)},t.prototype.updateTotalUploadProgress=function(){var e,t,n,i,r,s,o,a;if(i=0,n=0,e=this.getActiveFiles(),e.length){for(a=this.getActiveFiles(),s=0,o=a.length;o>s;s++)t=a[s],i+=t.upload.bytesSent,n+=t.upload.total;r=100*i/n}else r=100;return this.emit("totaluploadprogress",r,n,i)},t.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},t.prototype.getFallbackForm=function(){var e,n,i,r;return(e=this.getExistingFallback())?e:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',n=t.createElement(i),"FORM"!==this.element.tagName?(r=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(n)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:n)},t.prototype.getExistingFallback=function(){var e,t,n,i,r,s;for(t=function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},s=["div","form"],i=0,r=s.length;r>i;i++)if(n=s[i],e=t(this.element.getElementsByTagName(n)))return e},t.prototype.setupEventListeners=function(){var e,t,n,i,r,s,o;for(s=this.listeners,o=[],i=0,r=s.length;r>i;i++)e=s[i],o.push(function(){var i,r;i=e.events,r=[];for(t in i)n=i[t],r.push(e.element.addEventListener(t,n,!1));return r}());return o},t.prototype.removeEventListeners=function(){var e,t,n,i,r,s,o;for(s=this.listeners,o=[],i=0,r=s.length;r>i;i++)e=s[i],o.push(function(){var i,r;i=e.events,r=[];for(t in i)n=i[t],r.push(e.element.removeEventListener(t,n,!1));return r}());return o},t.prototype.disable=function(){var e,t,n,i,r;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(this.cancelUpload(e));return r},t.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},t.prototype.filesize=function(e){var t,n,i,r,s,o,a,l;for(o=["TB","GB","MB","KB","b"],i=r=null,n=a=0,l=o.length;l>a;n=++a)if(s=o[n],t=Math.pow(this.options.filesizeBase,4-n)/10,e>=t){i=e/Math.pow(this.options.filesizeBase,4-n),r=s;break}return i=Math.round(10*i)/10,"<strong>"+i+"</strong> "+r},t.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},t.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,t.length&&(n=e.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)))},t.prototype.paste=function(e){var t,n;if(null!=(null!=e&&null!=(n=e.clipboardData)?n.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},t.prototype.handleFiles=function(e){var t,n,i,r;for(r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(this.addFile(t));return r},t.prototype._addFilesFromItems=function(e){var t,n,i,r,s;for(s=[],i=0,r=e.length;r>i;i++)n=e[i],s.push(null!=n.webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?this.addFile(n.getAsFile()):t.isDirectory?this._addFilesFromDirectory(t,t.name):void 0:null!=n.getAsFile?null==n.kind||"file"===n.kind?this.addFile(n.getAsFile()):void 0:void 0);return s},t.prototype._addFilesFromDirectory=function(e,t){var n,i;return n=e.createReader(),i=function(e){return function(n){var i,r,s;for(r=0,s=n.length;s>r;r++)i=n[r],i.isFile?i.file(function(n){return e.options.ignoreHiddenFiles&&"."===n.name.substring(0,1)?void 0:(n.fullPath=""+t+"/"+n.name,e.addFile(n))}):i.isDirectory&&e._addFilesFromDirectory(i,""+t+"/"+i.name)}}(this),n.readEntries(i,function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0})},t.prototype.accept=function(e,n){return e.size>1024*this.options.maxFilesize*1024?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,n):n(this.options.dictInvalidFileType)},t.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},t.prototype.enqueueFiles=function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)t=e[n],this.enqueueFile(t);return null},t.prototype.enqueueFile=function(e){if(e.status!==t.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=t.QUEUED,this.options.autoProcessQueue?setTimeout(function(e){return function(){return e.processQueue()}}(this),0):void 0},t.prototype._thumbnailQueue=[],t.prototype._processingThumbnail=!1,t.prototype._enqueueThumbnail=function(e){return this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)):void 0},t.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this)))},t.prototype.removeFile=function(e){return e.status===t.UPLOADING&&this.cancelUpload(e),this.files=l(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},t.prototype.removeAllFiles=function(e){var n,i,r,s;for(null==e&&(e=!1),s=this.files.slice(),i=0,r=s.length;r>i;i++)n=s[i],(n.status!==t.UPLOADING||e)&&this.removeFile(n);return null},t.prototype.createThumbnail=function(e,t){var n;return n=new FileReader,n.onload=function(i){return function(){return"image/svg+xml"===e.type?(i.emit("thumbnail",e,n.result),void(null!=t&&t())):i.createThumbnailFromUrl(e,n.result,t)}}(this),n.readAsDataURL(e)},t.prototype.createThumbnailFromUrl=function(e,t,n){var i;return i=document.createElement("img"),i.onload=function(t){return function(){var r,s,a,l,u,c,h,d;return e.width=i.width,e.height=i.height,a=t.options.resize.call(t,e),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),r=document.createElement("canvas"),s=r.getContext("2d"),r.width=a.trgWidth,r.height=a.trgHeight,o(s,i,null!=(u=a.srcX)?u:0,null!=(c=a.srcY)?c:0,a.srcWidth,a.srcHeight,null!=(h=a.trgX)?h:0,null!=(d=a.trgY)?d:0,a.trgWidth,a.trgHeight),l=r.toDataURL("image/png"),t.emit("thumbnail",e,l),null!=n?n():void 0}}(this),null!=n&&(i.onerror=n),i.src=t},t.prototype.processQueue=function(){var e,t,n,i;if(t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n,!(n>=t)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,t-n));for(;t>e;){if(!i.length)return;this.processFile(i.shift()),e++}}},t.prototype.processFile=function(e){return this.processFiles([e])},t.prototype.processFiles=function(e){var n,i,r;for(i=0,r=e.length;r>i;i++)n=e[i],n.processing=!0,n.status=t.UPLOADING,this.emit("processing",n);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},t.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,i,r,s;for(r=this.files,s=[],n=0,i=r.length;i>n;n++)t=r[n],t.xhr===e&&s.push(t);return s}.call(this)},t.prototype.cancelUpload=function(e){var n,i,r,s,o,a,l;if(e.status===t.UPLOADING){for(i=this._getFilesWithXhr(e.xhr),r=0,o=i.length;o>r;r++)n=i[r],n.status=t.CANCELED;for(e.xhr.abort(),s=0,a=i.length;a>s;s++)n=i[s],this.emit("canceled",n);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else((l=e.status)===t.ADDED||l===t.QUEUED)&&(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},r=function(){var e,t;return t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},t.prototype.uploadFile=function(e){return this.uploadFiles([e])},t.prototype.uploadFiles=function(e){var n,s,o,a,l,u,c,h,d,p,f,m,v,g,y,b,_,w,k,x,E,S,C,A,j,P,T,F,O,L,D,M,I,N;for(k=new XMLHttpRequest,x=0,A=e.length;A>x;x++)n=e[x],n.xhr=k;m=r(this.options.method,e),_=r(this.options.url,e),k.open(m,_,!0),k.withCredentials=!!this.options.withCredentials,y=null,o=function(t){return function(){var i,r,s;for(s=[],i=0,r=e.length;r>i;i++)n=e[i],s.push(t._errorProcessing(e,y||t.options.dictResponseError.replace("{{statusCode}}",k.status),k));return s}}(this),b=function(t){return function(i){var r,s,o,a,l,u,c,h,d;if(null!=i)for(s=100*i.loaded/i.total,o=0,u=e.length;u>o;o++)n=e[o],n.upload={progress:s,total:i.total,bytesSent:i.loaded};else{for(r=!0,s=100,a=0,c=e.length;c>a;a++)n=e[a],(100!==n.upload.progress||n.upload.bytesSent!==n.upload.total)&&(r=!1),n.upload.progress=s,n.upload.bytesSent=n.upload.total;if(r)return}for(d=[],l=0,h=e.length;h>l;l++)n=e[l],d.push(t.emit("uploadprogress",n,s,n.upload.bytesSent));return d}}(this),k.onload=function(n){return function(i){var r;if(e[0].status!==t.CANCELED&&4===k.readyState){if(y=k.responseText,k.getResponseHeader("content-type")&&~k.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(s){i=s,y="Invalid JSON response from server."}return b(),200<=(r=k.status)&&300>r?n._finished(e,y,i):o()}}}(this),k.onerror=function(n){return function(){return e[0].status!==t.CANCELED?o():void 0}}(this),g=null!=(O=k.upload)?O:k,g.onprogress=b,u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(u,this.options.headers);for(a in u)l=u[a],k.setRequestHeader(a,l);if(s=new FormData,this.options.params){L=this.options.params;for(f in L)w=L[f],s.append(f,w)}for(E=0,j=e.length;j>E;E++)n=e[E],this.emit("sending",n,k,s);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,k,s),"FORM"===this.element.tagName)for(D=this.element.querySelectorAll("input, textarea, select, button"),S=0,P=D.length;P>S;S++)if(h=D[S],d=h.getAttribute("name"),p=h.getAttribute("type"),"SELECT"===h.tagName&&h.hasAttribute("multiple"))for(M=h.options,C=0,T=M.length;T>C;C++)v=M[C],v.selected&&s.append(d,v.value);else(!p||"checkbox"!==(I=p.toLowerCase())&&"radio"!==I||h.checked)&&s.append(d,h.value);for(c=F=0,N=e.length-1;N>=0?N>=F:F>=N;c=N>=0?++F:--F)s.append(this._getParamName(c),e[c],e[c].name);return k.send(s)},t.prototype._finished=function(e,n,i){var r,s,o;for(s=0,o=e.length;o>s;s++)r=e[s],r.status=t.SUCCESS,this.emit("success",r,n,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("successmultiple",e,n,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},t.prototype._errorProcessing=function(e,n,i){var r,s,o;for(s=0,o=e.length;o>s;s++)r=e[s],r.status=t.ERROR,this.emit("error",r,n,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("errormultiple",e,n,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},t}(n),e.version="4.0.1",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[i(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,n,i,r,s,o;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],t=function(e){var t,n,r,s;for(s=[],n=0,r=e.length;r>n;n++)t=e[n],s.push(/(^| )dropzone($| )/.test(t.className)?i.push(t):void 0);return s},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),o=[],r=0,s=i.length;s>r;r++)n=i[r],o.push(e.optionsForElement(n)!==!1?new e(n):void 0);return o},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,i,r,s;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(s=e.blacklistedBrowsers,i=0,r=s.length;r>i;i++)n=s[i],n.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},l=function(e,t){var n,i,r,s;for(s=[],i=0,r=e.length;r>i;i++)n=e[i],n!==t&&s.push(n);return s},i=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},e.getElements=function(e,t){var n,i,r,s,o,a,l,u;if(e instanceof Array){r=[];try{for(s=0,a=e.length;a>s;s++)i=e[s],r.push(this.getElement(i,t))}catch(c){n=c,r=null}}else if("string"==typeof e)for(r=[],u=document.querySelectorAll(e),o=0,l=u.length;l>o;o++)i=u[o],r.push(i);else null!=e.nodeType&&(r=[e]);if(null==r||!r.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},e.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},e.isValidFile=function(e,t){var n,i,r,s,o;if(!t)return!0;for(t=t.split(","),i=e.type,n=i.replace(/\/.*$/,""),s=0,o=t.length;o>s;s++)if(r=t[s],r=r.trim(),"."===r.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof t&&null!==t?t.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",s=function(e){var t,n,i,r,s,o,a,l,u,c;for(a=e.naturalWidth,o=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=o,i=n.getContext("2d"),i.drawImage(e,0,0),r=i.getImageData(0,0,1,o).data,c=0,s=o,l=o;l>c;)t=r[4*(l-1)+3],0===t?s=l:c=l,l=s+c>>1;return u=l/o,0===u?1:u},o=function(e,t,n,i,r,o,a,l,u,c){var h;return h=s(t),e.drawImage(t,n,i,r,o,a,l,u,c/h)},r=function(e,t){var n,i,r,s,o,a,l,u,c;if(r=!1,c=!0,i=e.document,u=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",s=function(n){return"readystatechange"!==n.type||"complete"===i.readyState?(("load"===n.type?e:i)[l](a+n.type,s,!1),!r&&(r=!0)?t.call(e,n.type||n):void 0):void 0},o=function(){var e;try{u.doScroll("left")}catch(t){return e=t,void setTimeout(o,50)}return s("poll")},"complete"!==i.readyState){if(i.createEventObject&&u.doScroll){try{c=!e.frameElement}catch(h){}c&&o()}return i[n](a+"DOMContentLoaded",s,!1),i[n](a+"readystatechange",s,!1),e[n](a+"load",s,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},r(window,e._autoDiscoverFunction)}).call(this)},{}],81:[function(e,t,n){function i(e){for(var t=-1,n=e?e.length:0,i=-1,r=[];++t<n;){var s=e[t];s&&(r[++i]=s)}return r}t.exports=i},{}],82:[function(e,t,n){var i=e("../internal/createFindIndex"),r=i();t.exports=r},{"../internal/createFindIndex":138}],83:[function(e,t,n){function i(e){return e?e[0]:void 0}t.exports=i},{}],84:[function(e,t,n){function i(e){var t=e?e.length:0;return t?e[t-1]:void 0}t.exports=i},{}],85:[function(e,t,n){function i(e,t,n,i){var l=e?e.length:0;return l?(null!=t&&"boolean"!=typeof t&&(i=n,n=o(e,t,i)?void 0:t,t=!1),n=null==n?n:r(n,i,3),t?a(e,n):s(e,n)):[]}var r=e("../internal/baseCallback"),s=e("../internal/baseUniq"),o=e("../internal/isIterateeCall"),a=e("../internal/sortedUniq");t.exports=i},{"../internal/baseCallback":101,"../internal/baseUniq":126,"../internal/isIterateeCall":149,"../internal/sortedUniq":157}],86:[function(e,t,n){var i=e("../internal/baseEach"),r=e("../internal/createFind"),s=r(i);t.exports=s},{"../internal/baseEach":104,"../internal/createFind":137}],87:[function(e,t,n){var i=e("../internal/arrayEach"),r=e("../internal/baseEach"),s=e("../internal/createForEach"),o=s(i,r);t.exports=o},{"../internal/arrayEach":95,"../internal/baseEach":104,"../internal/createForEach":139}],88:[function(e,t,n){var i=e("../internal/createAggregator"),r=i(function(e,t,n){e[n]=t});t.exports=r},{"../internal/createAggregator":132}],89:[function(e,t,n){function i(e,t,n){var i=a(e)?r:o;return t=s(t,n,3),i(e,t)}var r=e("../internal/arrayMap"),s=e("../internal/baseCallback"),o=e("../internal/baseMap"),a=e("../lang/isArray");t.exports=i},{"../internal/arrayMap":96,"../internal/baseCallback":101,"../internal/baseMap":116,"../lang/isArray":161}],90:[function(e,t,n){function i(e,t){return r(e,s(t))}var r=e("./map"),s=e("../utility/property");t.exports=i},{"../utility/property":181,"./map":89}],91:[function(e,t,n){function i(e,t,n){if(null==e)return[];n&&l(e,t,n)&&(t=void 0);var i=-1;t=r(t,n,3);var u=s(e,function(e,n,r){return{criteria:t(e,n,r),index:++i,value:e}});return o(u,a)}var r=e("../internal/baseCallback"),s=e("../internal/baseMap"),o=e("../internal/baseSortBy"),a=e("../internal/compareAscending"),l=e("../internal/isIterateeCall");t.exports=i},{"../internal/baseCallback":101,"../internal/baseMap":116,"../internal/baseSortBy":124,"../internal/compareAscending":131,"../internal/isIterateeCall":149}],92:[function(e,t,n){function i(e,t){if("function"!=typeof e)throw new TypeError(r);return t=s(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,r=s(n.length-t,0),o=Array(r);++i<r;)o[i]=n[t+i];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=o,e.apply(this,a)}}var r="Expected a function",s=Math.max;t.exports=i},{}],93:[function(e,t,n){(function(n){function i(e){var t=e?e.length:0;for(this.data={hash:a(null),set:new o};t--;)this.push(e[t])}var r=e("./cachePush"),s=e("./getNative"),o=s(n,"Set"),a=s(Object,"create");i.prototype.push=r,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cachePush":130,"./getNative":145}],94:[function(e,t,n){function i(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}t.exports=i},{}],95:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}t.exports=i},{}],96:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}t.exports=i},{}],97:[function(e,t,n){function i(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}t.exports=i},{}],98:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}t.exports=i},{}],99:[function(e,t,n){function i(e,t,n){for(var i=-1,s=r(t),o=s.length;++i<o;){var a=s[i],l=e[a],u=n(l,t[a],a,e,t);(u===u?u===l:l!==l)&&(void 0!==l||a in e)||(e[a]=u)}return e}var r=e("../object/keys");t.exports=i},{"../object/keys":174}],100:[function(e,t,n){function i(e,t){return null==t?e:r(t,s(t),e)}var r=e("./baseCopy"),s=e("../object/keys");t.exports=i},{"../object/keys":174,"./baseCopy":103}],101:[function(e,t,n){function i(e,t,n){var i=typeof e;return"function"==i?void 0===t?e:o(e,t,n):null==e?a:"object"==i?r(e):void 0===t?l(e):s(e,t)}var r=e("./baseMatches"),s=e("./baseMatchesProperty"),o=e("./bindCallback"),a=e("../utility/identity"),l=e("../utility/property");t.exports=i},{"../utility/identity":180,"../utility/property":181,"./baseMatches":117,"./baseMatchesProperty":118,"./bindCallback":128}],102:[function(e,t,n){function i(e,t){if(e!==t){var n=null===e,i=void 0===e,r=e===e,s=null===t,o=void 0===t,a=t===t;if(e>t&&!s||!r||n&&!o&&a||i&&a)return 1;if(t>e&&!n||!a||s&&!i&&r||o&&r)return-1}return 0}t.exports=i},{}],103:[function(e,t,n){function i(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var s=t[i];n[s]=e[s]}return n}t.exports=i},{}],104:[function(e,t,n){var i=e("./baseForOwn"),r=e("./createBaseEach"),s=r(i);t.exports=s},{"./baseForOwn":110,"./createBaseEach":134}],105:[function(e,t,n){function i(e,t,n,i){var r;return n(e,function(e,n,s){return t(e,n,s)?(r=i?n:e,!1):void 0}),r}t.exports=i},{}],106:[function(e,t,n){function i(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}t.exports=i},{}],107:[function(e,t,n){function i(e,t,n,u){u||(u=[]);for(var c=-1,h=e.length;++c<h;){var d=e[c];l(d)&&a(d)&&(n||o(d)||s(d))?t?i(d,t,n,u):r(u,d):n||(u[u.length]=d)}return u}var r=e("./arrayPush"),s=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("./isArrayLike"),l=e("./isObjectLike");t.exports=i},{"../lang/isArguments":160,"../lang/isArray":161,"./arrayPush":97,"./isArrayLike":147,"./isObjectLike":152}],108:[function(e,t,n){var i=e("./createBaseFor"),r=i();t.exports=r},{"./createBaseFor":135}],109:[function(e,t,n){function i(e,t){return r(e,t,s)}var r=e("./baseFor"),s=e("../object/keysIn");t.exports=i},{"../object/keysIn":175,"./baseFor":108}],110:[function(e,t,n){function i(e,t){return r(e,t,s)}var r=e("./baseFor"),s=e("../object/keys");t.exports=i},{"../object/keys":174,"./baseFor":108}],111:[function(e,t,n){function i(e,t,n){if(null!=e){void 0!==n&&n in r(e)&&(t=[n]);for(var i=0,s=t.length;null!=e&&s>i;)e=e[t[i++]];return i&&i==s?e:void 0}}var r=e("./toObject");t.exports=i},{"./toObject":158}],112:[function(e,t,n){function i(e,t,n){if(t!==t)return r(e,n);for(var i=n-1,s=e.length;++i<s;)if(e[i]===t)return i;return-1}var r=e("./indexOfNaN");t.exports=i},{"./indexOfNaN":146}],113:[function(e,t,n){function i(e,t,n,a,l,u){return e===t?!0:null==e||null==t||!s(e)&&!o(t)?e!==e&&t!==t:r(e,t,i,n,a,l,u)}var r=e("./baseIsEqualDeep"),s=e("../lang/isObject"),o=e("./isObjectLike");t.exports=i},{"../lang/isObject":167,"./baseIsEqualDeep":114,"./isObjectLike":152}],114:[function(e,t,n){function i(e,t,n,i,d,m,v){var g=a(e),y=a(t),b=c,_=c;g||(b=f.call(e),b==u?b=h:b!=h&&(g=l(e))),y||(_=f.call(t),_==u?_=h:_!=h&&(y=l(t)));var w=b==h,k=_==h,x=b==_;if(x&&!g&&!w)return s(e,t,b);if(!d){var E=w&&p.call(e,"__wrapped__"),S=k&&p.call(t,"__wrapped__");if(E||S)return n(E?e.value():e,S?t.value():t,i,d,m,v)}if(!x)return!1;m||(m=[]),v||(v=[]);for(var C=m.length;C--;)if(m[C]==e)return v[C]==t;m.push(e),v.push(t);var A=(g?r:o)(e,t,n,i,d,m,v);return m.pop(),v.pop(),A}var r=e("./equalArrays"),s=e("./equalByTag"),o=e("./equalObjects"),a=e("../lang/isArray"),l=e("../lang/isTypedArray"),u="[object Arguments]",c="[object Array]",h="[object Object]",d=Object.prototype,p=d.hasOwnProperty,f=d.toString;t.exports=i},{"../lang/isArray":161,"../lang/isTypedArray":170,"./equalArrays":140,"./equalByTag":141,"./equalObjects":142}],115:[function(e,t,n){function i(e,t,n){var i=t.length,o=i,a=!n;if(null==e)return!o;for(e=s(e);i--;){var l=t[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){l=t[i];var u=l[0],c=e[u],h=l[1];if(a&&l[2]){if(void 0===c&&!(u in e))return!1}else{var d=n?n(c,h,u):void 0;if(!(void 0===d?r(h,c,n,!0):d))return!1}}return!0}var r=e("./baseIsEqual"),s=e("./toObject");t.exports=i},{"./baseIsEqual":113,"./toObject":158}],116:[function(e,t,n){function i(e,t){var n=-1,i=s(e)?Array(e.length):[];return r(e,function(e,r,s){i[++n]=t(e,r,s)}),i}var r=e("./baseEach"),s=e("./isArrayLike");t.exports=i},{"./baseEach":104,"./isArrayLike":147}],117:[function(e,t,n){function i(e){var t=s(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null==e?!1:e[n]===i&&(void 0!==i||n in o(e))}}return function(e){return r(e,t)}}var r=e("./baseIsMatch"),s=e("./getMatchData"),o=e("./toObject");t.exports=i},{"./baseIsMatch":115,"./getMatchData":144,"./toObject":158}],118:[function(e,t,n){function i(e,t){var n=a(e),i=l(e)&&u(t),p=e+"";return e=d(e),function(a){if(null==a)return!1;var l=p;if(a=h(a),!(!n&&i||l in a)){if(a=1==e.length?a:r(a,o(e,0,-1)),null==a)return!1;l=c(e),a=h(a)}return a[l]===t?void 0!==t||l in a:s(t,a[l],void 0,!0)}}var r=e("./baseGet"),s=e("./baseIsEqual"),o=e("./baseSlice"),a=e("../lang/isArray"),l=e("./isKey"),u=e("./isStrictComparable"),c=e("../array/last"),h=e("./toObject"),d=e("./toPath");t.exports=i},{"../array/last":84,"../lang/isArray":161,"./baseGet":111,"./baseIsEqual":113,"./baseSlice":123,"./isKey":150,"./isStrictComparable":153,"./toObject":158,"./toPath":159}],119:[function(e,t,n){function i(e,t,n,d,p){if(!l(e))return e;var f=a(t)&&(o(t)||c(t)),m=f?void 0:h(t);return r(m||t,function(r,o){if(m&&(o=r,r=t[o]),u(r))d||(d=[]),p||(p=[]),s(e,t,o,i,n,d,p);else{var a=e[o],l=n?n(a,r,o,e,t):void 0,c=void 0===l;c&&(l=r),void 0===l&&(!f||o in e)||!c&&(l===l?l===a:a!==a)||(e[o]=l)}}),e}var r=e("./arrayEach"),s=e("./baseMergeDeep"),o=e("../lang/isArray"),a=e("./isArrayLike"),l=e("../lang/isObject"),u=e("./isObjectLike"),c=e("../lang/isTypedArray"),h=e("../object/keys");t.exports=i},{"../lang/isArray":161,"../lang/isObject":167,"../lang/isTypedArray":170,"../object/keys":174,"./arrayEach":95,"./baseMergeDeep":120,"./isArrayLike":147,"./isObjectLike":152}],120:[function(e,t,n){function i(e,t,n,i,h,d,p){for(var f=d.length,m=t[n];f--;)if(d[f]==m)return void(e[n]=p[f]);var v=e[n],g=h?h(v,m,n,e,t):void 0,y=void 0===g;y&&(g=m,a(m)&&(o(m)||u(m))?g=o(v)?v:a(v)?r(v):[]:l(m)||s(m)?g=s(v)?c(v):l(v)?v:{}:y=!1),d.push(m),p.push(g),y?e[n]=i(g,m,h,d,p):(g===g?g!==v:v===v)&&(e[n]=g)}var r=e("./arrayCopy"),s=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("./isArrayLike"),l=e("../lang/isPlainObject"),u=e("../lang/isTypedArray"),c=e("../lang/toPlainObject");t.exports=i},{"../lang/isArguments":160,"../lang/isArray":161,"../lang/isPlainObject":168,"../lang/isTypedArray":170,"../lang/toPlainObject":171,"./arrayCopy":94,"./isArrayLike":147}],121:[function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}t.exports=i},{}],122:[function(e,t,n){function i(e){var t=e+"";return e=s(e),function(n){return r(n,e,t)}}var r=e("./baseGet"),s=e("./toPath");t.exports=i},{"./baseGet":111,"./toPath":159}],123:[function(e,t,n){function i(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(r);++i<r;)s[i]=e[i+t];return s}t.exports=i},{}],124:[function(e,t,n){function i(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}t.exports=i},{}],125:[function(e,t,n){function i(e){return null==e?"":e+""}t.exports=i},{}],126:[function(e,t,n){function i(e,t){var n=-1,i=r,l=e.length,u=!0,c=u&&l>=a,h=c?o():null,d=[];h?(i=s,u=!1):(c=!1,h=t?[]:d);e:for(;++n<l;){var p=e[n],f=t?t(p,n,e):p;if(u&&p===p){for(var m=h.length;m--;)if(h[m]===f)continue e;t&&h.push(f),d.push(p)}else i(h,f,0)<0&&((t||c)&&h.push(f),d.push(p))}return d}var r=e("./baseIndexOf"),s=e("./cacheIndexOf"),o=e("./createCache"),a=200;t.exports=i},{"./baseIndexOf":112,"./cacheIndexOf":129,"./createCache":136}],127:[function(e,t,n){function i(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}t.exports=i},{}],128:[function(e,t,n){function i(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,s){return e.call(t,n,i,r,s)};case 5:return function(n,i,r,s,o){return e.call(t,n,i,r,s,o)}}return function(){return e.apply(t,arguments)}}var r=e("../utility/identity");t.exports=i},{"../utility/identity":180}],129:[function(e,t,n){function i(e,t){var n=e.data,i="string"==typeof t||r(t)?n.set.has(t):n.hash[t];return i?0:-1}var r=e("../lang/isObject");t.exports=i},{"../lang/isObject":167}],130:[function(e,t,n){function i(e){var t=this.data;"string"==typeof e||r(e)?t.set.add(e):t.hash[e]=!0}var r=e("../lang/isObject");t.exports=i},{"../lang/isObject":167}],131:[function(e,t,n){function i(e,t){return r(e.criteria,t.criteria)||e.index-t.index}var r=e("./baseCompareAscending");t.exports=i},{"./baseCompareAscending":102}],132:[function(e,t,n){function i(e,t){return function(n,i,a){var l=t?t():{};if(i=r(i,a,3),o(n))for(var u=-1,c=n.length;++u<c;){var h=n[u];e(l,h,i(h,u,n),n)}else s(n,function(t,n,r){e(l,t,i(t,n,r),r)});return l}}var r=e("./baseCallback"),s=e("./baseEach"),o=e("../lang/isArray");t.exports=i},{"../lang/isArray":161,"./baseCallback":101,"./baseEach":104}],133:[function(e,t,n){function i(e){return o(function(t,n){var i=-1,o=null==t?0:n.length,a=o>2?n[o-2]:void 0,l=o>2?n[2]:void 0,u=o>1?n[o-1]:void 0;for("function"==typeof a?(a=r(a,u,5),o-=2):(a="function"==typeof u?u:void 0,o-=a?1:0),l&&s(n[0],n[1],l)&&(a=3>o?void 0:a,o=1);++i<o;){var c=n[i];c&&e(t,c,a)}return t})}var r=e("./bindCallback"),s=e("./isIterateeCall"),o=e("../function/restParam");t.exports=i},{"../function/restParam":92,"./bindCallback":128,"./isIterateeCall":149}],134:[function(e,t,n){function i(e,t){return function(n,i){var a=n?r(n):0;if(!s(a))return e(n,i);for(var l=t?a:-1,u=o(n);(t?l--:++l<a)&&i(u[l],l,u)!==!1;);return n}}var r=e("./getLength"),s=e("./isLength"),o=e("./toObject");t.exports=i},{"./getLength":143,"./isLength":151,"./toObject":158}],135:[function(e,t,n){function i(e){return function(t,n,i){for(var s=r(t),o=i(t),a=o.length,l=e?a:-1;e?l--:++l<a;){var u=o[l];if(n(s[u],u,s)===!1)break}return t}}var r=e("./toObject");t.exports=i},{"./toObject":158}],136:[function(e,t,n){(function(n){function i(e){return a&&o?new r(e):null}var r=e("./SetCache"),s=e("./getNative"),o=s(n,"Set"),a=s(Object,"create");t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./SetCache":93,"./getNative":145}],137:[function(e,t,n){function i(e,t){return function(n,i,l){if(i=r(i,l,3),a(n)){var u=o(n,i,t);

return u>-1?n[u]:void 0}return s(n,i,e)}}var r=e("./baseCallback"),s=e("./baseFind"),o=e("./baseFindIndex"),a=e("../lang/isArray");t.exports=i},{"../lang/isArray":161,"./baseCallback":101,"./baseFind":105,"./baseFindIndex":106}],138:[function(e,t,n){function i(e){return function(t,n,i){return t&&t.length?(n=r(n,i,3),s(t,n,e)):-1}}var r=e("./baseCallback"),s=e("./baseFindIndex");t.exports=i},{"./baseCallback":101,"./baseFindIndex":106}],139:[function(e,t,n){function i(e,t){return function(n,i,o){return"function"==typeof i&&void 0===o&&s(n)?e(n,i):t(n,r(i,o,3))}}var r=e("./bindCallback"),s=e("../lang/isArray");t.exports=i},{"../lang/isArray":161,"./bindCallback":128}],140:[function(e,t,n){function i(e,t,n,i,s,o,a){var l=-1,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;for(;++l<u;){var h=e[l],d=t[l],p=i?i(s?d:h,s?h:d,l):void 0;if(void 0!==p){if(p)continue;return!1}if(s){if(!r(t,function(e){return h===e||n(h,e,i,s,o,a)}))return!1}else if(h!==d&&!n(h,d,i,s,o,a))return!1}return!0}var r=e("./arraySome");t.exports=i},{"./arraySome":98}],141:[function(e,t,n){function i(e,t,n){switch(n){case r:case s:return+e==+t;case o:return e.name==t.name&&e.message==t.message;case a:return e!=+e?t!=+t:e==+t;case l:case u:return e==t+""}return!1}var r="[object Boolean]",s="[object Date]",o="[object Error]",a="[object Number]",l="[object RegExp]",u="[object String]";t.exports=i},{}],142:[function(e,t,n){function i(e,t,n,i,s,a,l){var u=r(e),c=u.length,h=r(t),d=h.length;if(c!=d&&!s)return!1;for(var p=c;p--;){var f=u[p];if(!(s?f in t:o.call(t,f)))return!1}for(var m=s;++p<c;){f=u[p];var v=e[f],g=t[f],y=i?i(s?g:v,s?v:g,f):void 0;if(!(void 0===y?n(v,g,i,s,a,l):y))return!1;m||(m="constructor"==f)}if(!m){var b=e.constructor,_=t.constructor;if(b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _))return!1}return!0}var r=e("../object/keys"),s=Object.prototype,o=s.hasOwnProperty;t.exports=i},{"../object/keys":174}],143:[function(e,t,n){var i=e("./baseProperty"),r=i("length");t.exports=r},{"./baseProperty":121}],144:[function(e,t,n){function i(e){for(var t=s(e),n=t.length;n--;)t[n][2]=r(t[n][1]);return t}var r=e("./isStrictComparable"),s=e("../object/pairs");t.exports=i},{"../object/pairs":177,"./isStrictComparable":153}],145:[function(e,t,n){function i(e,t){var n=null==e?void 0:e[t];return r(n)?n:void 0}var r=e("../lang/isNative");t.exports=i},{"../lang/isNative":165}],146:[function(e,t,n){function i(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var s=e[r];if(s!==s)return r}return-1}t.exports=i},{}],147:[function(e,t,n){function i(e){return null!=e&&s(r(e))}var r=e("./getLength"),s=e("./isLength");t.exports=i},{"./getLength":143,"./isLength":151}],148:[function(e,t,n){function i(e,t){return e="number"==typeof e||r.test(e)?+e:-1,t=null==t?s:t,e>-1&&e%1==0&&t>e}var r=/^\d+$/,s=9007199254740991;t.exports=i},{}],149:[function(e,t,n){function i(e,t,n){if(!o(n))return!1;var i=typeof t;if("number"==i?r(n)&&s(t,n.length):"string"==i&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}var r=e("./isArrayLike"),s=e("./isIndex"),o=e("../lang/isObject");t.exports=i},{"../lang/isObject":167,"./isArrayLike":147,"./isIndex":148}],150:[function(e,t,n){function i(e,t){var n=typeof e;if("string"==n&&a.test(e)||"number"==n)return!0;if(r(e))return!1;var i=!o.test(e);return i||null!=t&&e in s(t)}var r=e("../lang/isArray"),s=e("./toObject"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=i},{"../lang/isArray":161,"./toObject":158}],151:[function(e,t,n){function i(e){return"number"==typeof e&&e>-1&&e%1==0&&r>=e}var r=9007199254740991;t.exports=i},{}],152:[function(e,t,n){function i(e){return!!e&&"object"==typeof e}t.exports=i},{}],153:[function(e,t,n){function i(e){return e===e&&!r(e)}var r=e("../lang/isObject");t.exports=i},{"../lang/isObject":167}],154:[function(e,t,n){function i(e,t){e=r(e);for(var n=-1,i=t.length,s={};++n<i;){var o=t[n];o in e&&(s[o]=e[o])}return s}var r=e("./toObject");t.exports=i},{"./toObject":158}],155:[function(e,t,n){function i(e,t){var n={};return r(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}var r=e("./baseForIn");t.exports=i},{"./baseForIn":109}],156:[function(e,t,n){function i(e){for(var t=l(e),n=t.length,i=n&&e.length,u=!!i&&a(i)&&(s(e)||r(e)),h=-1,d=[];++h<n;){var p=t[h];(u&&o(p,i)||c.call(e,p))&&d.push(p)}return d}var r=e("../lang/isArguments"),s=e("../lang/isArray"),o=e("./isIndex"),a=e("./isLength"),l=e("../object/keysIn"),u=Object.prototype,c=u.hasOwnProperty;t.exports=i},{"../lang/isArguments":160,"../lang/isArray":161,"../object/keysIn":175,"./isIndex":148,"./isLength":151}],157:[function(e,t,n){function i(e,t){for(var n,i=-1,r=e.length,s=-1,o=[];++i<r;){var a=e[i],l=t?t(a,i,e):a;i&&n===l||(n=l,o[++s]=a)}return o}t.exports=i},{}],158:[function(e,t,n){function i(e){return r(e)?e:Object(e)}var r=e("../lang/isObject");t.exports=i},{"../lang/isObject":167}],159:[function(e,t,n){function i(e){if(s(e))return e;var t=[];return r(e).replace(o,function(e,n,i,r){t.push(i?r.replace(a,"$1"):n||e)}),t}var r=e("./baseToString"),s=e("../lang/isArray"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=i},{"../lang/isArray":161,"./baseToString":125}],160:[function(e,t,n){function i(e){return s(e)&&r(e)&&a.call(e,"callee")&&!l.call(e,"callee")}var r=e("../internal/isArrayLike"),s=e("../internal/isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,l=o.propertyIsEnumerable;t.exports=i},{"../internal/isArrayLike":147,"../internal/isObjectLike":152}],161:[function(e,t,n){var i=e("../internal/getNative"),r=e("../internal/isLength"),s=e("../internal/isObjectLike"),o="[object Array]",a=Object.prototype,l=a.toString,u=i(Array,"isArray"),c=u||function(e){return s(e)&&r(e.length)&&l.call(e)==o};t.exports=c},{"../internal/getNative":145,"../internal/isLength":151,"../internal/isObjectLike":152}],162:[function(e,t,n){function i(e){return e===!0||e===!1||r(e)&&a.call(e)==s}var r=e("../internal/isObjectLike"),s="[object Boolean]",o=Object.prototype,a=o.toString;t.exports=i},{"../internal/isObjectLike":152}],163:[function(e,t,n){function i(e){return null==e?!0:o(e)&&(s(e)||u(e)||r(e)||l(e)&&a(e.splice))?!e.length:!c(e).length}var r=e("./isArguments"),s=e("./isArray"),o=e("../internal/isArrayLike"),a=e("./isFunction"),l=e("../internal/isObjectLike"),u=e("./isString"),c=e("../object/keys");t.exports=i},{"../internal/isArrayLike":147,"../internal/isObjectLike":152,"../object/keys":174,"./isArguments":160,"./isArray":161,"./isFunction":164,"./isString":169}],164:[function(e,t,n){function i(e){return r(e)&&a.call(e)==s}var r=e("./isObject"),s="[object Function]",o=Object.prototype,a=o.toString;t.exports=i},{"./isObject":167}],165:[function(e,t,n){function i(e){return null==e?!1:r(e)?c.test(l.call(e)):s(e)&&o.test(e)}var r=e("./isFunction"),s=e("../internal/isObjectLike"),o=/^\[object .+?Constructor\]$/,a=Object.prototype,l=Function.prototype.toString,u=a.hasOwnProperty,c=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{"../internal/isObjectLike":152,"./isFunction":164}],166:[function(e,t,n){function i(e){return"number"==typeof e||r(e)&&a.call(e)==s}var r=e("../internal/isObjectLike"),s="[object Number]",o=Object.prototype,a=o.toString;t.exports=i},{"../internal/isObjectLike":152}],167:[function(e,t,n){function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=i},{}],168:[function(e,t,n){function i(e){var t;if(!o(e)||c.call(e)!=a||s(e)||!u.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return r(e,function(e,t){n=t}),void 0===n||u.call(e,n)}var r=e("../internal/baseForIn"),s=e("./isArguments"),o=e("../internal/isObjectLike"),a="[object Object]",l=Object.prototype,u=l.hasOwnProperty,c=l.toString;t.exports=i},{"../internal/baseForIn":109,"../internal/isObjectLike":152,"./isArguments":160}],169:[function(e,t,n){function i(e){return"string"==typeof e||r(e)&&a.call(e)==s}var r=e("../internal/isObjectLike"),s="[object String]",o=Object.prototype,a=o.toString;t.exports=i},{"../internal/isObjectLike":152}],170:[function(e,t,n){function i(e){return s(e)&&r(e.length)&&!!P[F.call(e)]}var r=e("../internal/isLength"),s=e("../internal/isObjectLike"),o="[object Arguments]",a="[object Array]",l="[object Boolean]",u="[object Date]",c="[object Error]",h="[object Function]",d="[object Map]",p="[object Number]",f="[object Object]",m="[object RegExp]",v="[object Set]",g="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object Float32Array]",w="[object Float64Array]",k="[object Int8Array]",x="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",A="[object Uint16Array]",j="[object Uint32Array]",P={};P[_]=P[w]=P[k]=P[x]=P[E]=P[S]=P[C]=P[A]=P[j]=!0,P[o]=P[a]=P[b]=P[l]=P[u]=P[c]=P[h]=P[d]=P[p]=P[f]=P[m]=P[v]=P[g]=P[y]=!1;var T=Object.prototype,F=T.toString;t.exports=i},{"../internal/isLength":151,"../internal/isObjectLike":152}],171:[function(e,t,n){function i(e){return r(e,s(e))}var r=e("../internal/baseCopy"),s=e("../object/keysIn");t.exports=i},{"../internal/baseCopy":103,"../object/keysIn":175}],172:[function(e,t,n){var i=e("../internal/assignWith"),r=e("../internal/baseAssign"),s=e("../internal/createAssigner"),o=s(function(e,t,n){return n?i(e,t,n):r(e,t)});t.exports=o},{"../internal/assignWith":99,"../internal/baseAssign":100,"../internal/createAssigner":133}],173:[function(e,t,n){t.exports=e("./assign")},{"./assign":172}],174:[function(e,t,n){var i=e("../internal/getNative"),r=e("../internal/isArrayLike"),s=e("../lang/isObject"),o=e("../internal/shimKeys"),a=i(Object,"keys"),l=a?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?o(e):s(e)?a(e):[]}:o;t.exports=l},{"../internal/getNative":145,"../internal/isArrayLike":147,"../internal/shimKeys":156,"../lang/isObject":167}],175:[function(e,t,n){function i(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(s(e)||r(e))&&t||0;for(var n=e.constructor,i=-1,u="function"==typeof n&&n.prototype===e,h=Array(t),d=t>0;++i<t;)h[i]=i+"";for(var p in e)d&&o(p,t)||"constructor"==p&&(u||!c.call(e,p))||h.push(p);return h}var r=e("../lang/isArguments"),s=e("../lang/isArray"),o=e("../internal/isIndex"),a=e("../internal/isLength"),l=e("../lang/isObject"),u=Object.prototype,c=u.hasOwnProperty;t.exports=i},{"../internal/isIndex":148,"../internal/isLength":151,"../lang/isArguments":160,"../lang/isArray":161,"../lang/isObject":167}],176:[function(e,t,n){var i=e("../internal/baseMerge"),r=e("../internal/createAssigner"),s=r(i);t.exports=s},{"../internal/baseMerge":119,"../internal/createAssigner":133}],177:[function(e,t,n){function i(e){e=s(e);for(var t=-1,n=r(e),i=n.length,o=Array(i);++t<i;){var a=n[t];o[t]=[a,e[a]]}return o}var r=e("./keys"),s=e("../internal/toObject");t.exports=i},{"../internal/toObject":158,"./keys":174}],178:[function(e,t,n){var i=e("../internal/baseFlatten"),r=e("../internal/bindCallback"),s=e("../internal/pickByArray"),o=e("../internal/pickByCallback"),a=e("../function/restParam"),l=a(function(e,t){return null==e?{}:"function"==typeof t[0]?o(e,r(t[0],t[1],3)):s(e,i(t))});t.exports=l},{"../function/restParam":92,"../internal/baseFlatten":107,"../internal/bindCallback":128,"../internal/pickByArray":154,"../internal/pickByCallback":155}],179:[function(e,t,n){function i(e){return r(e,s(e))}var r=e("../internal/baseValues"),s=e("./keys");t.exports=i},{"../internal/baseValues":127,"./keys":174}],180:[function(e,t,n){function i(e){return e}t.exports=i},{}],181:[function(e,t,n){function i(e){return o(e)?r(e):s(e)}var r=e("../internal/baseProperty"),s=e("../internal/basePropertyDeep"),o=e("../internal/isKey");t.exports=i},{"../internal/baseProperty":121,"../internal/basePropertyDeep":122,"../internal/isKey":150}],182:[function(e,t,n){(function(n){function i(e,t,n){if(e=s(e),1>e||!o(e))return[];var i=-1,u=Array(a(e,l));for(t=r(t,n,1);++i<e;)l>i?u[i]=t(i):t(i);return u}var r=e("../internal/bindCallback"),s=Math.floor,o=n.isFinite,a=Math.min,l=4294967295;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/bindCallback":128}],183:[function(e,t,n){var i;!function(){function e(e){this.mode=c.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;n>t;t++){var i=[],r=this.data.charCodeAt(t);r>65536?(i[0]=240|(1835008&r)>>>18,i[1]=128|(258048&r)>>>12,i[2]=128|(4032&r)>>>6,i[3]=128|63&r):r>2048?(i[0]=224|(61440&r)>>>12,i[1]=128|(4032&r)>>>6,i[2]=128|63&r):r>128?(i[0]=192|(1984&r)>>>6,i[1]=128|63&r):i[0]=r,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}function r(e,t){this.totalCount=e,this.dataCount=t}function s(){this.buffer=[],this.length=0}function o(){return"undefined"!=typeof CanvasRenderingContext2D}function a(){var e=!1,t=navigator.userAgent;if(/android/i.test(t)){e=!0;var n=t.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(e=parseFloat(n[1]))}return e}function l(e,t){for(var n=1,i=u(e),r=0,s=v.length;s>=r;r++){var o=0;switch(t){case h.L:o=v[r][0];break;case h.M:o=v[r][1];break;case h.Q:o=v[r][2];break;case h.H:o=v[r][3]}if(o>=i)break;n++}if(n>v.length)throw new Error("Too long data");return n}function u(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;n>t;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[i][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;7>=n;n++)if(!(-1>=e+n||this.moduleCount<=e+n))for(var i=-1;7>=i;i++)-1>=t+i||this.moduleCount<=t+i||(this.modules[e+n][t+i]=n>=0&&6>=n&&(0==i||6==i)||i>=0&&6>=i&&(0==n||6==n)||n>=2&&4>=n&&i>=2&&4>=i?!0:!1)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;8>n;n++){this.makeImpl(!0,n);var i=p.getLostPoint(this);(0==n||e>i)&&(e=i,t=n)}return t},createMovieClip:function(e,t,n){var i=e.createEmptyMovieClip(t,n),r=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*r,a=0;a<this.modules[s].length;a++){var l=a*r,u=this.modules[s][a];u&&(i.beginFill(0,100),i.moveTo(l,o),i.lineTo(l+r,o),i.lineTo(l+r,o+r),i.lineTo(l,o+r),i.endFill())}return i},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=p.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var i=e[t],r=e[n];if(null==this.modules[i][r])for(var s=-2;2>=s;s++)for(var o=-2;2>=o;o++)this.modules[i+s][r+o]=-2==s||2==s||-2==o||2==o||0==s&&0==o?!0:!1}},setupTypeNumber:function(e){for(var t=p.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var i=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(var n=0;18>n;n++){var i=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,i=p.getBCHTypeInfo(n),r=0;15>r;r++){var s=!e&&1==(i>>r&1);6>r?this.modules[r][8]=s:8>r?this.modules[r+1][8]=s:this.modules[this.moduleCount-15+r][8]=s}for(var r=0;15>r;r++){var s=!e&&1==(i>>r&1);8>r?this.modules[8][this.moduleCount-r-1]=s:9>r?this.modules[8][15-r-1+1]=s:this.modules[8][15-r-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,i=this.moduleCount-1,r=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var a=0;2>a;a++)if(null==this.modules[i][o-a]){var l=!1;s<e.length&&(l=1==(e[s]>>>r&1));var u=p.getMask(t,i,o-a);u&&(l=!l),this.modules[i][o-a]=l,r--,-1==r&&(s++,r=7)}if(i+=n,0>i||this.moduleCount<=i){i-=n,n=-n;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,i){for(var o=r.getRSBlocks(e,n),a=new s,l=0;l<i.length;l++){var u=i[l];a.put(u.mode,4),a.put(u.getLength(),p.getLengthInBits(u.mode,e)),u.write(a)}for(var c=0,l=0;l<o.length;l++)c+=o[l].dataCount;if(a.getLengthInBits()>8*c)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*c+")");for(a.getLengthInBits()+4<=8*c&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;;){if(a.getLengthInBits()>=8*c)break;if(a.put(t.PAD0,8),a.getLengthInBits()>=8*c)break;a.put(t.PAD1,8)}return t.createBytes(a,o)},t.createBytes=function(e,t){for(var i=0,r=0,s=0,o=new Array(t.length),a=new Array(t.length),l=0;l<t.length;l++){var u=t[l].dataCount,c=t[l].totalCount-u;r=Math.max(r,u),s=Math.max(s,c),o[l]=new Array(u);for(var h=0;h<o[l].length;h++)o[l][h]=255&e.buffer[h+i];i+=u;var d=p.getErrorCorrectPolynomial(c),f=new n(o[l],d.getLength()-1),m=f.mod(d);a[l]=new Array(d.getLength()-1);for(var h=0;h<a[l].length;h++){var v=h+m.getLength()-a[l].length;a[l][h]=v>=0?m.get(v):0}}for(var g=0,h=0;h<t.length;h++)g+=t[h].totalCount;for(var y=new Array(g),b=0,h=0;r>h;h++)for(var l=0;l<t.length;l++)h<o[l].length&&(y[b++]=o[l][h]);for(var h=0;s>h;h++)for(var l=0;l<t.length;l++)h<a[l].length&&(y[b++]=a[l][h]);return y};for(var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},h={L:1,M:0,Q:3,H:2},d={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;p.getBCHDigit(t)-p.getBCHDigit(p.G15)>=0;)t^=p.G15<<p.getBCHDigit(t)-p.getBCHDigit(p.G15);return(e<<10|t)^p.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;p.getBCHDigit(t)-p.getBCHDigit(p.G18)>=0;)t^=p.G18<<p.getBCHDigit(t)-p.getBCHDigit(p.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return p.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case d.PATTERN000:return(t+n)%2==0;case d.PATTERN001:return t%2==0;case d.PATTERN010:return n%3==0;case d.PATTERN011:return(t+n)%3==0;case d.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case d.PATTERN101:return t*n%2+t*n%3==0;case d.PATTERN110:return(t*n%2+t*n%3)%2==0;case d.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new n([1],0),i=0;e>i;i++)t=t.multiply(new n([1,f.gexp(i)],0));return t},getLengthInBits:function(e,t){if(t>=1&&10>t)switch(e){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>t)switch(e){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>t))throw new Error("type:"+t);switch(e){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,i=0;t>i;i++)for(var r=0;t>r;r++){for(var s=0,o=e.isDark(i,r),a=-1;1>=a;a++)if(!(0>i+a||i+a>=t))for(var l=-1;1>=l;l++)0>r+l||r+l>=t||(0!=a||0!=l)&&o==e.isDark(i+a,r+l)&&s++;s>5&&(n+=3+s-5)}for(var i=0;t-1>i;i++)for(var r=0;t-1>r;r++){var u=0;e.isDark(i,r)&&u++,e.isDark(i+1,r)&&u++,e.isDark(i,r+1)&&u++,e.isDark(i+1,r+1)&&u++,(0==u||4==u)&&(n+=3)}for(var i=0;t>i;i++)for(var r=0;t-6>r;r++)e.isDark(i,r)&&!e.isDark(i,r+1)&&e.isDark(i,r+2)&&e.isDark(i,r+3)&&e.isDark(i,r+4)&&!e.isDark(i,r+5)&&e.isDark(i,r+6)&&(n+=40);for(var r=0;t>r;r++)for(var i=0;t-6>i;i++)e.isDark(i,r)&&!e.isDark(i+1,r)&&e.isDark(i+2,r)&&e.isDark(i+3,r)&&e.isDark(i+4,r)&&!e.isDark(i+5,r)&&e.isDark(i+6,r)&&(n+=40);for(var c=0,r=0;t>r;r++)for(var i=0;t>i;i++)e.isDark(i,r)&&c++;var h=Math.abs(100*c/t/t-50)/5;return n+=10*h}},f={glog:function(e){if(1>e)throw new Error("glog("+e+")");return f.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return f.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;8>m;m++)f.EXP_TABLE[m]=1<<m;for(var m=8;256>m;m++)f.EXP_TABLE[m]=f.EXP_TABLE[m-4]^f.EXP_TABLE[m-5]^f.EXP_TABLE[m-6]^f.EXP_TABLE[m-8];for(var m=0;255>m;m++)f.LOG_TABLE[f.EXP_TABLE[m]]=m;n.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var r=0;r<e.getLength();r++)t[i+r]^=f.gexp(f.glog(this.get(i))+f.glog(e.get(r)));return new n(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=f.glog(this.get(0))-f.glog(e.get(0)),i=new Array(this.getLength()),r=0;r<this.getLength();r++)i[r]=this.get(r);for(var r=0;r<e.getLength();r++)i[r]^=f.gexp(f.glog(e.get(r))+t);return new n(i,0).mod(e)}},r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(e,t){var n=r.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=n.length/3,s=[],o=0;i>o;o++)for(var a=n[3*o+0],l=n[3*o+1],u=n[3*o+2],c=0;a>c;c++)s.push(new r(l,u));return s},r.getRsBlockTable=function(e,t){switch(t){case h.L:return r.RS_BLOCK_TABLE[4*(e-1)+0];case h.M:return r.RS_BLOCK_TABLE[4*(e-1)+1];case h.Q:return r.RS_BLOCK_TABLE[4*(e-1)+2];case h.H:return r.RS_BLOCK_TABLE[4*(e-1)+3];default:return void 0}},s.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;t>n;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],g=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){function t(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var i in t)t.hasOwnProperty(i)&&n.setAttribute(i,t[i]);return n}{var n=this._htOption,i=this._el,r=e.getModuleCount();Math.floor(n.width/r),Math.floor(n.height/r)}this.clear();var s=t("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:n.colorLight});s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),i.appendChild(s),s.appendChild(t("rect",{fill:n.colorLight,width:"100%",height:"100%"})),s.appendChild(t("rect",{fill:n.colorDark,width:"1",height:"1",id:"template"}));for(var o=0;r>o;o++)for(var a=0;r>a;a++)if(e.isDark(o,a)){var l=t("use",{x:String(o),y:String(a)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),s.appendChild(l)}},e.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},e}(),y="svg"===document.documentElement.tagName.toLowerCase(),b=y?g:o()?function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.setProperty("display","block","important"),this._elCanvas.style.setProperty("display","none","important")}function t(e,t){var n=this;if(n._fFail=t,n._fSuccess=e,null===n._bSupportDataURI){var i=document.createElement("img"),r=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)},s=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return i.onabort=r,i.onerror=r,i.onload=s,void(i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}n._bSupportDataURI===!0&&n._fSuccess?n._fSuccess.call(n):n._bSupportDataURI===!1&&n._fFail&&n._fFail.call(n)}if(this._android&&this._android<=2.1){var n=1/window.devicePixelRatio,i=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(e,t,r,s,o,a,l,u,c){if("nodeName"in e&&/img/i.test(e.nodeName))for(var h=arguments.length-1;h>=1;h--)arguments[h]=arguments[h]*n;else"undefined"==typeof u&&(arguments[1]*=n,arguments[2]*=n,arguments[3]*=n,arguments[4]*=n);i.apply(this,arguments)}}var r=function(e,t){this._bIsPainted=!1,this._android=a(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.setProperty("display","none","important"),this._el.appendChild(this._elImage),this._bSupportDataURI=null};return r.prototype.draw=function(e){var t=this._elImage,n=this._oContext,i=this._htOption,r=e.getModuleCount(),s=i.width/r,o=i.height/r,a=Math.round(s),l=Math.round(o);t.style.setProperty("display","none","important"),this.clear();for(var u=0;r>u;u++)for(var c=0;r>c;c++){var h=e.isDark(u,c),d=c*s,p=u*o;n.strokeStyle=h?i.colorDark:i.colorLight,n.lineWidth=1,n.fillStyle=h?i.colorDark:i.colorLight,n.fillRect(d,p,s,o),n.strokeRect(Math.floor(d)+.5,Math.floor(p)+.5,a,l),n.strokeRect(Math.ceil(d)-.5,Math.ceil(p)-.5,a,l)}this._bIsPainted=!0},r.prototype.makeImage=function(){this._bIsPainted&&t.call(this,e)},r.prototype.isPainted=function(){return this._bIsPainted},r.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},r.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},r}():function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){for(var t=this._htOption,n=this._el,i=e.getModuleCount(),r=Math.floor(t.width/i),s=Math.floor(t.height/i),o=['<table style="border:0;border-collapse:collapse;">'],a=0;i>a;a++){o.push("<tr>");for(var l=0;i>l;l++)o.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+r+"px;height:"+s+"px;background-color:"+(e.isDark(a,l)?t.colorDark:t.colorLight)+';"></td>');o.push("</tr>")}o.push("</table>"),n.innerHTML=o.join("");var u=n.childNodes[0],c=(t.width-u.offsetWidth)/2,h=(t.height-u.offsetHeight)/2;c>0&&h>0&&(u.style.margin=h+"px "+c+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}();i=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:h.H},"string"==typeof t&&(t={text:t}),t)for(var n in t)this._htOption[n]=t[n];"string"==typeof e&&(e=document.getElementById(e)),this._htOption.useSVG&&(b=g),this._android=a(),this._el=e,
this._oQRCode=null,this._oDrawing=new b(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},i.prototype.makeCode=function(e){this._oQRCode=new t(l(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},i.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},i.prototype.clear=function(){this._oDrawing.clear()},i.CorrectLevel=h}(),t&&t.exports&&(t.exports=i)},{}],184:[function(t,n,i){!function(t,r){"object"==typeof i&&"undefined"!=typeof n?n.exports=r():"function"==typeof e&&e.amd?e(r):t.Ractive=r()}(this,function(){"use strict";function e(e){var t;if(e&&"boolean"!=typeof e)return"undefined"!=typeof window&&document&&e?e.nodeType?e:"string"==typeof e&&(t=document.getElementById(e),!t&&document.querySelector&&(t=document.querySelector(e)),t&&t.nodeType)?t:e[0]&&e[0].nodeType?e[0]:null:null}function t(e){return e&&"unknown"!=typeof e.parentNode&&e.parentNode&&e.parentNode.removeChild(e),e}function n(e){return null!=e&&e.toString?e:""}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];for(var r,s;s=n.shift();)for(r in s)ja.call(s,r)&&(e[r]=s[r]);return e}function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];return n.forEach(function(t){for(var n in t)!t.hasOwnProperty(n)||n in e||(e[n]=t[n])}),e}function s(e){return"[object Array]"===Pa.call(e)}function o(e){return Ta.test(Pa.call(e))}function a(e,t){return null===e&&null===t?!0:"object"==typeof e||"object"==typeof t?!1:e===t}function l(e){return!isNaN(parseFloat(e))&&isFinite(e)}function u(e){return e&&"[object Object]"===Pa.call(e)}function c(e,t){return e.replace(/%s/g,function(){return t.shift()})}function h(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];throw e=c(e,n),new Error(e)}function d(){Wb.DEBUG&&Sa.apply(null,arguments)}function p(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];e=c(e,n),Ca(e,n)}function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];e=c(e,n),Oa[e]||(Oa[e]=!0,Ca(e,n))}function m(){Wb.DEBUG&&p.apply(null,arguments)}function v(){Wb.DEBUG&&f.apply(null,arguments)}function g(e,t,n){var i=y(e,t,n);return i?i[e][n]:null}function y(e,t,n){for(;t;){if(n in t[e])return t;if(t.isolated)return null;t=t.parent}}function b(e){return function(){return e}}function _(e){var t,n,i,r,s,o;for(t=e.split("."),(n=za[t.length])||(n=w(t.length)),s=[],i=function(e,n){return e?"*":t[n]},r=n.length;r--;)o=n[r].map(i).join("."),s.hasOwnProperty(o)||(s.push(o),s[o]=!0);return s}function w(e){var t,n,i,r,s,o,a,l,u="";if(!za[e]){for(i=[];u.length<e;)u+=1;for(t=parseInt(u,2),r=function(e){return"1"===e},s=0;t>=s;s+=1){for(n=s.toString(2);n.length<e;)n="0"+n;for(l=[],a=n.length,o=0;a>o;o++)l.push(r(n[o]));i[s]=l}za[e]=i}return za[e]}function k(e,t,n,i){var r=e[t];if(!r||!r.equalsOrStartsWith(i)&&r.equalsOrStartsWith(n))return e[t]=r?r.replace(n,i):i,!0}function x(e){var t=e.slice(2);return"i"===e[1]&&l(t)?+t:t}function E(e){return null==e?e:(Ua.hasOwnProperty(e)||(Ua[e]=new Ha(e)),Ua[e])}function S(e,t){function n(t,n){var i,r,o;return n.isRoot?o=[].concat(Object.keys(e.viewmodel.data),Object.keys(e.viewmodel.mappings),Object.keys(e.viewmodel.computations)):(i=e.viewmodel.wrapped[n.str],r=i?i.get():e.viewmodel.get(n),o=r?Object.keys(r):null),o&&o.forEach(function(e){"_ractive"===e&&s(r)||t.push(n.join(e))}),t}var i,r,o;for(i=t.str.split("."),o=[Ga];r=i.shift();)"*"===r?o=o.reduce(n,[]):o[0]===Ga?o[0]=E(r):o=o.map(C(r));return o}function C(e){return function(t){return t.join(e)}}function A(e){return e?e.replace(qa,".$1"):""}function j(e,t,n){if("string"!=typeof t||!l(n))throw new Error("Bad arguments");var i=void 0,r=void 0;if(/\*/.test(t))return r={},S(e,E(A(t))).forEach(function(t){var i=e.viewmodel.get(t);if(!l(i))throw new Error(Ka);r[t.str]=i+n}),e.set(r);if(i=e.get(t),!l(i))throw new Error(Ka);return e.set(t,+i+n)}function P(e,t){return Qa(this,e,void 0===t?1:+t)}function T(e){this.event=e,this.method="on"+e,this.deprecate=el[e]}function F(e,t){var n=e.indexOf(t);-1===n&&e.push(t)}function O(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]==t)return!0;return!1}function L(e,t){var n;if(!s(e)||!s(t))return!1;if(e.length!==t.length)return!1;for(n=e.length;n--;)if(e[n]!==t[n])return!1;return!0}function D(e){return"string"==typeof e?[e]:void 0===e?[]:e}function M(e){return e[e.length-1]}function I(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function N(e){for(var t=[],n=e.length;n--;)t[n]=e[n];return t}function $(e){setTimeout(e,0)}function R(e,t){return function(){for(var n;n=e.shift();)n(t)}}function V(e,t,n,i){var r;if(t===e)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(t instanceof tl)t.then(n,i);else if(!t||"object"!=typeof t&&"function"!=typeof t)n(t);else{try{r=t.then}catch(s){return void i(s)}if("function"==typeof r){var o,a,l;a=function(t){o||(o=!0,V(e,t,n,i))},l=function(e){o||(o=!0,i(e))};try{r.call(t,a,l)}catch(s){if(!o)return i(s),void(o=!0)}}else n(t)}}function z(e,t,n){var i;return t=A(t),"~/"===t.substr(0,2)?(i=E(t.substring(2)),U(e,i.firstKey,n)):"."===t[0]?(i=q(al(n),t),i&&U(e,i.firstKey,n)):i=B(e,E(t),n),i}function q(e,t){var n;if(void 0!=e&&"string"!=typeof e&&(e=e.str),"."===t)return E(e);if(n=e?e.split("."):[],"../"===t.substr(0,3)){for(;"../"===t.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),t=t.substring(3)}return n.push(t),E(n.join("."))}return E(e?e+t.replace(/^\.\//,"."):t.replace(/^\.\/?/,""))}function B(e,t,n,i){var r,s,o,a,l;if(t.isRoot)return t;for(s=t.firstKey;n;)if(r=n.context,n=n.parent,r&&(a=!0,o=e.viewmodel.get(r),o&&("object"==typeof o||"function"==typeof o)&&s in o))return r.join(t.str);return H(e.viewmodel,s)?t:e.parent&&!e.isolated&&(a=!0,n=e.component.parentFragment,s=E(s),l=B(e.parent,s,n,!0))?(e.viewmodel.map(s,{origin:e.parent.viewmodel,keypath:l}),t):i||a?void 0:(e.viewmodel.set(t,void 0),t)}function U(e,t){var n;!e.parent||e.isolated||H(e.viewmodel,t)||(t=E(t),(n=B(e.parent,t,e.component.parentFragment,!0))&&e.viewmodel.map(t,{origin:e.parent.viewmodel,keypath:n}))}function H(e,t){return""===t||t in e.data||t in e.computations||t in e.mappings}function W(e){e.teardown()}function G(e){e.unbind()}function Q(e){e.unrender()}function K(e){e.cancel()}function Z(e){e.detach()}function J(e){e.detachNodes()}function Y(e){!e.ready||e.outros.length||e.outroChildren||(e.outrosComplete||(e.parent?e.parent.decrementOutros(e):e.detachNodes(),e.outrosComplete=!0),e.intros.length||e.totalChildren||("function"==typeof e.callback&&e.callback(),e.parent&&e.parent.decrementTotal()))}function X(){for(var e,t,n;cl.ractives.length;)t=cl.ractives.pop(),n=t.viewmodel.applyChanges(),n&&fl.fire(t,n);for(ee(),e=0;e<cl.views.length;e+=1)cl.views[e].update();for(cl.views.length=0,e=0;e<cl.tasks.length;e+=1)cl.tasks[e]();return cl.tasks.length=0,cl.ractives.length?X():void 0}function ee(){var e,t,n,i;for(e=pl.length;e--;)t=pl[e],t.keypath?pl.splice(e,1):(n=ll(t.root,t.ref,t.parentFragment))&&((i||(i=[])).push({item:t,keypath:n}),pl.splice(e,1));i&&i.forEach(te)}function te(e){e.item.resolve(e.keypath)}function ne(e,t,n){var i,r,s,o,a,l,u,c,h,d,p,f,m,v;if(i=new ol(function(e){return r=e}),"object"==typeof e){n=t||{},l=n.easing,u=n.duration,a=[],c=n.step,h=n.complete,(c||h)&&(p={},n.step=null,n.complete=null,d=function(e){return function(t,n){p[e]=n}});for(s in e)e.hasOwnProperty(s)&&((c||h)&&(f=d(s),n={easing:l,duration:u},c&&(n.step=f)),n.complete=h?f:Fa,a.push(ie(this,s,e[s],n)));return v={easing:l,duration:u},c&&(v.step=function(e){return c(e,p)}),h&&i.then(function(e){return h(e,p)}),v.complete=r,m=ie(this,null,null,v),a.push(m),i.stop=function(){for(var e;e=a.pop();)e.stop();m&&m.stop()},i}return n=n||{},n.complete&&i.then(n.complete),n.complete=r,o=ie(this,e,t,n),i.stop=function(){return o.stop()},i}function ie(e,t,n,i){var r,s,o,l;return t&&(t=E(A(t))),null!==t&&(l=e.viewmodel.get(t)),yl.abort(t,e),a(l,n)?(i.complete&&i.complete(i.to),kl):(i.easing&&(r="function"==typeof i.easing?i.easing:e.easing[i.easing],"function"!=typeof r&&(r=null)),s=void 0===i.duration?400:i.duration,o=new _l({keypath:t,from:l,to:n,root:e,duration:s,easing:r,interpolator:i.interpolator,step:i.step,complete:i.complete}),yl.add(o),e._animations.push(o),o)}function re(){return this.detached?this.detached:(this.el&&I(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),El.fire(this),this.detached)}function se(e){return this.el?this.fragment.find(e):null}function oe(e,t){var n;return n=this._isComponentQuery?!this.selector||e.name===this.selector:e.node?da(e.node,this.selector):null,n?(this.push(e.node||e.instance),t||this._makeDirty(),!0):void 0}function ae(e){var t;return(t=e.parentFragment)?t.owner:e.component&&(t=e.component.parentFragment)?t.owner:void 0}function le(e){var t,n;for(t=[e],n=ae(e);n;)t.push(n),n=ae(n);return t}function ue(e,t,n,i){var r=[];return ka(r,{selector:{value:t},live:{value:n},_isComponentQuery:{value:i},_test:{value:Cl}}),n?(ka(r,{cancel:{value:Al},_root:{value:e},_sort:{value:Tl},_makeDirty:{value:Fl},_remove:{value:Ol},_dirty:{value:!1,writable:!0}}),r):r}function ce(e,t){var n,i;return this.el?(t=t||{},n=this._liveQueries,(i=n[e])?t&&t.live?i:i.slice():(i=Ll(this,e,!!t.live,!1),i.live&&(n.push(e),n["_"+e]=i),this.fragment.findAll(e,i),i)):[]}function he(e,t){var n,i;return t=t||{},n=this._liveComponentQueries,(i=n[e])?t&&t.live?i:i.slice():(i=Ll(this,e,!!t.live,!0),i.live&&(n.push(e),n["_"+e]=i),this.fragment.findAllComponents(e,i),i)}function de(e){return this.fragment.findComponent(e)}function pe(e){return this.container?this.container.component&&this.container.component.name===e?this.container:this.container.findContainer(e):null}function fe(e){return this.parent?this.parent.component&&this.parent.component.name===e?this.parent:this.parent.findParent(e):null}function me(e,t){var n=void 0===arguments[2]?{}:arguments[2];if(t){n.event?n.event.name=t:n.event={name:t,_noArg:!0};var i=E(t).wildcardMatches();ve(e,i,n.event,n.args,!0)}}function ve(e,t,n,i){var r,s,o=void 0===arguments[4]?!1:arguments[4],a=!0;for(Vl.enqueue(e,n),s=t.length;s>=0;s--)r=e._subs[t[s]],r&&(a=ge(e,r,n,i)&&a);if(Vl.dequeue(e),e.parent&&a){if(o&&e.component){var l=e.component.name+"."+t[t.length-1];t=E(l).wildcardMatches(),n&&(n.component=e)}ve(e.parent,t,n,i)}}function ge(e,t,n,i){var r=null,s=!1;n&&!n._noArg&&(i=[n].concat(i)),t=t.slice();for(var o=0,a=t.length;a>o;o+=1)t[o].apply(e,i)===!1&&(s=!0);return n&&!n._noArg&&s&&(r=n.original)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!s}function ye(e){var t={args:Array.prototype.slice.call(arguments,1)};zl(this,e,t)}function be(e){var t;return e=E(A(e)),t=this.viewmodel.get(e,Ul),void 0===t&&this.parent&&!this.isolated&&ll(this,e.str,this.component.parentFragment)&&(t=this.viewmodel.get(e)),t}function _e(t,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=e(t),n=e(n)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),n),this.el=t,(t.__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.detached=null,we(this)}function we(e){Wl.fire(e),e.findAllComponents("*").forEach(function(e){we(e.instance)})}function ke(e,t,n){var i,r;return e=E(A(e)),i=this.viewmodel.get(e),s(i)&&s(t)?(r=ml.start(this,!0),this.viewmodel.merge(e,i,t,n),ml.end(),r):this.set(e,t,n&&n.complete)}function xe(e,t){var n,i;return n=S(e,t),i={},n.forEach(function(t){i[t.str]=e.get(t.str)}),i}function Ee(e,t,n,i){var r,s,o;t=E(A(t)),i=i||au,t.isPattern?(r=new su(e,t,n,i),e.viewmodel.patternObservers.push(r),s=!0):r=new Zl(e,t,n,i),r.init(i.init),e.viewmodel.register(t,r,s?"patternObservers":"observers"),r.ready=!0;var a={cancel:function(){var n;o||(s?(n=e.viewmodel.patternObservers.indexOf(r),e.viewmodel.patternObservers.splice(n,1),e.viewmodel.unregister(t,r,"patternObservers")):e.viewmodel.unregister(t,r,"observers"),o=!0)}};return e._observers.push(a),a}function Se(e,t,n){var i,r,s,o;if(u(e)){n=t,r=e,i=[];for(e in r)r.hasOwnProperty(e)&&(t=r[e],i.push(this.observe(e,t,n)));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof e)return n=t,t=e,e="",ou(this,e,t,n);if(s=e.split(" "),1===s.length)return ou(this,e,t,n);for(i=[],o=s.length;o--;)e=s[o],e&&i.push(ou(this,e,t,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}function Ce(e,t,n){var i=this.observe(e,function(){t.apply(this,arguments),i.cancel()},{init:!1,defer:n&&n.defer});return i}function Ae(e,t){var n,i=this;if(e)n=e.split(" ").map(cu).filter(hu),n.forEach(function(e){var n,r;(n=i._subs[e])&&(t?(r=n.indexOf(t),-1!==r&&n.splice(r,1)):i._subs[e]=[])});else for(e in this._subs)delete this._subs[e];return this}function je(e,t){var n,i,r,s=this;if("object"==typeof e){n=[];for(i in e)e.hasOwnProperty(i)&&n.push(this.on(i,e[i]));return{cancel:function(){for(var e;e=n.pop();)e.cancel()}}}return r=e.split(" ").map(cu).filter(hu),r.forEach(function(e){(s._subs[e]||(s._subs[e]=[])).push(t)}),{cancel:function(){return s.off(e,t)}}}function Pe(e,t){var n=this.on(e,function(){t.apply(this,arguments),n.cancel()});return n}function Te(e,t,n){var i,r,s,o,a,l,u=[];if(i=Fe(e,t,n),!i)return null;for(r=e.length,a=i.length-2-i[1],s=Math.min(r,i[0]),o=s+i[1],l=0;s>l;l+=1)u.push(l);for(;o>l;l+=1)u.push(-1);for(;r>l;l+=1)u.push(l+a);return u.touchedFrom=0!==a?i[0]:e.length,u}function Fe(e,t,n){switch(t){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=e.length+Math.max(n[0],-e.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],e.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return e.length?[e.length-1,1]:[0,0];case"push":return[e.length,0].concat(n);case"shift":return[0,e.length?1:0];case"unshift":return[0,0].concat(n)}}function Oe(t,n){var i,r,s,o=this;if(s=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),i=ml.start(this,!0),ml.scheduleTask(function(){return Au.fire(o)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(t=e(t)||this.el,n=e(n)||this.anchor,this.el=t,this.anchor=n,!this.append&&t){var a=t.__ractive_instances__;a&&a.length&&Le(a),t.innerHTML=""}return this.cssId&&Su.apply(),t&&((r=t.__ractive_instances__)?r.push(this):t.__ractive_instances__=[this],n?t.insertBefore(this.fragment.render(),n):t.appendChild(this.fragment.render())),ml.end(),this.transitionsEnabled=s,i.then(function(){return ju.fire(o)})}function Le(e){e.splice(0,e.length).forEach(W)}function De(e,t){for(var n=e.slice(),i=t.length;i--;)~n.indexOf(t[i])||n.push(t[i]);return n}function Me(e,t){var n,i,r;return i='[data-ractive-css~="{'+t+'}"]',r=function(e){var t,n,r,s,o,a,l,u=[];for(t=[];n=Du.exec(e);)t.push({str:n[0],base:n[1],modifiers:n[2]});for(s=t.map(Ne),l=t.length;l--;)a=s.slice(),r=t[l],a[l]=r.base+i+r.modifiers||"",o=s.slice(),o[l]=i+" "+o[l],u.push(a.join(" "),o.join(" "));return u.join(", ")},n=Iu.test(e)?e.replace(Iu,i):e.replace(Lu,"").replace(Ou,function(e,t){var n,i;return Mu.test(t)?e:(n=t.split(",").map(Ie),i=n.map(r).join(", ")+" ",e.replace(t,i))})}function Ie(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function Ne(e){return e.str}function $e(e){e&&e.constructor!==Object&&("function"==typeof e||("object"!=typeof e?h("data option must be an object or a function, `"+e+"` is not valid"):m("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Re(e,t){$e(t);var n="function"==typeof e,i="function"==typeof t;return t||n||(t={}),n||i?function(){var r=i?Ve(t,this):t,s=n?Ve(e,this):e;return ze(r,s)}:ze(t,e)}function Ve(e,t){var n=e.call(t);if(n)return"object"!=typeof n&&h("Data function must return an object"),n.constructor!==Object&&v("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function ze(e,t){if(e&&t){for(var n in t)n in e||(e[n]=t[n]);return e}return e||t}function qe(e){var t,n,i;return e.matchString("=")?(t=e.pos,e.allowWhitespace(),(n=e.matchPattern(Lc))?e.matchPattern(Dc)?(i=e.matchPattern(Lc))?(e.allowWhitespace(),e.matchString("=")?[n,i]:(e.pos=t,null)):(e.pos=t,null):null:(e.pos=t,null)):null}function Be(e){var t;return(t=e.matchPattern(Ic))?{t:fc,v:t}:null}function Ue(e){var t,n;if(e.interpolate[e.inside]===!1)return null;for(n=0;n<e.tags.length;n+=1)if(t=He(e,e.tags[n]))return t}function He(e,t){var n,i,r,s;if(n=e.pos,e.matchString("\\"+t.open)){if(0===n||"\\"!==e.str[n-1])return t.open}else if(!e.matchString(t.open))return null;if(i=Oc(e))return e.matchString(t.close)?(t.open=i[0],t.close=i[1],e.sortMustacheTags(),$c):null;if(e.allowWhitespace(),e.matchString("/")){e.pos-=1;var o=e.pos;Mc(e)?e.pos=o:(e.pos=o-t.close.length,e.error("Attempted to close a section that wasn't open"))}for(s=0;s<t.readers.length;s+=1)if(r=t.readers[s],i=r(e,t))return t.isStatic&&(i.s=!0),e.includeLinePositions&&(i.p=e.getLinePos(n)),i;return e.pos=n,null}function We(e){var t;return(t=e.matchPattern(qc))?{t:uc,v:t}:null}function Ge(e){var t=e.remaining();return"true"===t.substr(0,4)?(e.pos+=4,{t:pc,v:"true"}):"false"===t.substr(0,5)?(e.pos+=5,{t:pc,v:"false"}):null}function Qe(e){var t;return(t=Kc(e))?Yc.test(t.v)?t.v:'"'+t.v.replace(/"/g,'\\"')+'"':(t=zc(e))?t.v:(t=e.matchPattern(Zc))?t:void 0}function Ke(e){var t,n,i;return t=e.pos,e.allowWhitespace(),n=Jc(e),null===n?(e.pos=t,null):(e.allowWhitespace(),e.matchString(":")?(e.allowWhitespace(),i=jh(e),null===i?(e.pos=t,null):{t:vc,k:n,v:i}):(e.pos=t,null))}function Ze(e){var t,n,i,r;return t=e.pos,i=Xc(e),null===i?null:(n=[i],e.matchString(",")?(r=Ze(e),r?n.concat(r):(e.pos=t,null)):n)}function Je(e){function t(e){i.push(e)}var n,i,r,s;return n=e.pos,e.allowWhitespace(),r=jh(e),null===r?null:(i=[r],e.allowWhitespace(),e.matchString(",")&&(s=Je(e),null===s&&e.error(Rc),s.forEach(t)),i)}function Ye(e){return zc(e)||Bc(e)||Kc(e)||th(e)||ih(e)||Mc(e)}function Xe(e){var t,n,i,r,s,o;return t=e.pos,i=e.matchPattern(/^@(?:keypath|index|key)/),i||(n=e.matchPattern(oh)||"",i=!n&&e.relaxedNames&&e.matchPattern(ch)||e.matchPattern(uh),i||"."!==n||(n="",i=".")),i?n||e.relaxedNames||!Hc.test(i)?!n&&Uc.test(i)?(r=Uc.exec(i)[0],e.pos=t+r.length,{t:mc,v:r}):(s=(n||"")+A(i),e.matchString("(")&&(o=s.lastIndexOf("."),-1!==o?(s=s.substr(0,o),e.pos=t+s.length):e.pos-=1),{t:gc,n:s.replace(/^this\./,"./").replace(/^this$/,".")}):(e.pos=t,null):null}function et(e){var t,n;return t=e.pos,e.matchString("(")?(e.allowWhitespace(),n=jh(e),n||e.error(Rc),e.allowWhitespace(),e.matchString(")")||e.error(Vc),{t:wc,x:n}):null}function tt(e){var t,n,i;if(t=e.pos,e.allowWhitespace(),e.matchString(".")){if(e.allowWhitespace(),n=e.matchPattern(Zc))return{t:yc,n:n};e.error("Expected a property name")}return e.matchString("[")?(e.allowWhitespace(),i=jh(e),i||e.error(Rc),e.allowWhitespace(),e.matchString("]")||e.error("Expected ']'"),{t:yc,x:i}):null}function nt(e){var t,n,i,r;return(n=Ch(e))?(t=e.pos,e.allowWhitespace(),e.matchString("?")?(e.allowWhitespace(),i=jh(e),i||e.error(Rc),e.allowWhitespace(),e.matchString(":")||e.error('Expected ":"'),e.allowWhitespace(),r=jh(e),r||e.error(Rc),{t:kc,o:[n,i,r]}):(e.pos=t,n)):null}function it(e){return Ah(e)}function rt(e){function t(e){switch(e.t){case pc:case mc:case uc:case fc:return e.v;case cc:return JSON.stringify(String(e.v));case hc:return"["+(e.m?e.m.map(t).join(","):"")+"]";case dc:return"{"+(e.m?e.m.map(t).join(","):"")+"}";case vc:return e.k+":"+t(e.v);case _c:return("typeof"===e.s?"typeof ":e.s)+t(e.o);case xc:return t(e.o[0])+("in"===e.s.substr(0,2)?" "+e.s+" ":e.s)+t(e.o[1]);case Ec:return t(e.x)+"("+(e.o?e.o.map(t).join(","):"")+")";case wc:return"("+t(e.x)+")";case bc:return t(e.x)+t(e.r);case yc:return e.n?"."+e.n:"["+t(e.x)+"]";case kc:return t(e.o[0])+"?"+t(e.o[1])+":"+t(e.o[2]);case gc:return"_"+n.indexOf(e.n);default:throw new Error("Expected legal JavaScript")}}var n;return st(e,n=[]),{r:n,s:t(e)}}function st(e,t){var n,i;if(e.t===gc&&-1===t.indexOf(e.n)&&t.unshift(e.n),i=e.o||e.m)if(u(i))st(i,t);else for(n=i.length;n--;)st(i[n],t);e.x&&st(e.x,t),e.r&&st(e.r,t),e.v&&st(e.v,t)}function ot(e,t){var n;if(e){for(;e.t===wc&&e.x;)e=e.x;return e.t===gc?t.r=e.n:e.t===uc&&Fh.test(e.v)?t.r=e.v:(n=at(e))?t.rx=n:t.x=Ph(e),t}}function at(e){for(var t,n=[];e.t===bc&&e.r.t===yc;)t=e.r,n.unshift(t.x?t.x.t===gc?t.x:Ph(t.x):t.n),e=e.x;return e.t!==gc?null:{r:e.n,m:n}}function lt(e,t){var n,i=jh(e);return i?(e.matchString(t.close)||e.error("Expected closing delimiter '"+t.close+"'"),n={t:Ku},Th(i,n),n):null}function ut(e,t){var n,i;return e.matchString("&")?(e.allowWhitespace(),(n=jh(e))?(e.matchString(t.close)||e.error("Expected closing delimiter '"+t.close+"'"),i={t:Ku},Th(n,i),i):null):null}function ct(e,t){var n,i,r,s,o;return n=e.pos,e.matchString(">")?(e.allowWhitespace(),i=e.pos,e.relaxedNames=!0,r=jh(e),e.relaxedNames=!1,e.allowWhitespace(),s=jh(e),e.allowWhitespace(),r?(o={t:ec},Th(r,o),e.allowWhitespace(),s&&(o={t:Zu,n:jc,f:[o]},Th(s,o)),e.matchString(t.close)||e.error("Expected closing delimiter '"+t.close+"'"),o):null):null}function ht(e,t){var n;return e.matchString("!")?(n=e.remaining().indexOf(t.close),-1!==n?(e.pos+=n+t.close.length,{t:tc}):void 0):null}function dt(e,t){var n,i,r;if(n=e.pos,i=jh(e),!i)return null;for(r=0;r<t.length;r+=1)if(e.remaining().substr(0,t[r].length)===t[r])return i;return e.pos=n,sh(e)}function pt(e,t){var n,i,r,s;n=e.pos;try{i=Ih(e,[t.close])}catch(o){s=o}if(!i){if("!"===e.str.charAt(n))return e.pos=n,null;if(s)throw s}if(!e.matchString(t.close)&&(e.error("Expected closing delimiter '"+t.close+"' after reference"),!i)){if("!"===e.nextChar())return null;e.error("Expected expression or legal reference")}return r={t:Qu},Th(i,r),r}function ft(e,t){var n,i,r;return e.matchPattern(Rh)?(n=e.pos,i=e.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),e.allowWhitespace(),e.matchString(t.close)||e.error("expected legal partial name"),r={t:oc},i&&(r.n=i),r):null}function mt(e,t){var n,i,r,s;return n=e.pos,e.matchString(t.open)?(e.allowWhitespace(),e.matchString("/")?(e.allowWhitespace(),i=e.remaining(),r=i.indexOf(t.close),-1!==r?(s={t:Yu,r:i.substr(0,r).split(" ")[0]},e.pos+=r,e.matchString(t.close)||e.error("Expected closing delimiter '"+t.close+"'"),s):(e.pos=n,null)):(e.pos=n,null)):null}function vt(e,t){var n=e.pos;return e.matchString(t.open)?e.matchPattern(qh)?(e.matchString(t.close)||e.error("Expected closing delimiter '"+t.close+"'"),{t:Tc}):(e.pos=n,null):null}function gt(e,t){var n,i=e.pos;return e.matchString(t.open)?e.matchPattern(Uh)?(n=jh(e),e.matchString(t.close)||e.error("Expected closing delimiter '"+t.close+"'"),{t:Fc,x:n}):(e.pos=i,null):null}function yt(e,t){var n,i,r,s,o,a,l,u,c,h,d,p;if(n=e.pos,e.matchString("^"))r={t:Zu,f:[],n:Cc};else{if(!e.matchString("#"))return null;r={t:Zu,f:[]},e.matchString("partial")&&(e.pos=n-e.standardDelimiters[0].length,e.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(l=e.matchPattern(Kh))&&(p=l,r.n=Hh[l])}if(e.allowWhitespace(),i=jh(e),i||e.error("Expected expression"),d=e.matchPattern(Gh)){var f=void 0;r.i=(f=e.matchPattern(Qh))?d+","+f:d}e.allowWhitespace(),e.matchString(t.close)||e.error("Expected closing delimiter '"+t.close+"'"),e.sectionDepth+=1,o=r.f,c=[];do if(s=Vh(e,t))p&&s.r!==p&&e.error("Expected "+t.open+"/"+p+t.close),e.sectionDepth-=1,h=!0;else if(s=Bh(e,t))r.n===Cc&&e.error("{{else}} not allowed in {{#unless}}"),a&&e.error("illegal {{elseif...}} after {{else}}"),u||(u=bt(i,r.n)),u.f.push({t:Zu,n:Sc,x:Ph(wt(c.concat(s.x))),f:o=[]}),c.push(_t(s.x));else if(s=zh(e,t))r.n===Cc&&e.error("{{else}} not allowed in {{#unless}}"),a&&e.error("there can only be one {{else}} block, at the end of a section"),a=!0,u?u.f.push({t:Zu,n:Sc,x:Ph(wt(c)),f:o=[]}):(u=bt(i,r.n),o=u.f);else{if(s=e.read(Xd),!s)break;o.push(s)}while(!h);return u&&(r.n===jc&&(r.n=Pc),r.l=u),Th(i,r),r.f.length||delete r.f,r}function bt(e,t){var n;return t===jc?(n={t:Zu,n:Sc,f:[]},Th(_t(e),n)):(n={t:Zu,n:Cc,f:[]},Th(e,n)),n}function _t(e){return e.t===_c&&"!"===e.s?e.o:{t:_c,s:"!",o:kt(e)}}function wt(e){return 1===e.length?e[0]:{t:xc,s:"&&",o:[kt(e[0]),kt(wt(e.slice(1)))]}}function kt(e){return{t:wc,x:e}}function xt(e){var t,n,i,r,s;return t=e.pos,e.matchString(Jh)?(i=e.remaining(),r=i.indexOf(Yh),-1===r&&e.error("Illegal HTML - expected closing comment sequence ('-->')"),n=i.substr(0,r),e.pos+=r+3,s={t:tc,c:n},e.includeLinePositions&&(s.p=e.getLinePos(t)),s):null}function Et(e){return e.replace(kh,function(e,t){var n;return n="#"!==t[0]?_h[t]:"x"===t[1]?parseInt(t.substring(2),16):parseInt(t.substring(1),10),n?String.fromCharCode(St(n)):e})}function St(e){return e?10===e?32:128>e?e:159>=e?wh[e-128]:55296>e?e:57343>=e?65533:65535>=e?e:65533:65533}function Ct(e){return e.replace(Sh,"&amp;").replace(xh,"&lt;").replace(Eh,"&gt;")}function At(e){return"string"==typeof e}function jt(e){return e.t===tc||e.t===nc}function Pt(e){return(e.t===Zu||e.t===Ju)&&e.f}function Tt(e,t,n,i,r){var o,a,l,u,c,h,d,p;for(ld(e),o=e.length;o--;)a=e[o],a.exclude?e.splice(o,1):t&&a.t===tc&&e.splice(o,1);for(ud(e,i?pd:null,r?fd:null),o=e.length;o--;){if(a=e[o],a.f){var f=a.t===Xu&&dd.test(a.e);c=n||f,!n&&f&&ud(a.f,md,vd),c||(l=e[o-1],u=e[o+1],(!l||"string"==typeof l&&fd.test(l))&&(h=!0),(!u||"string"==typeof u&&pd.test(u))&&(d=!0)),Tt(a.f,t,c,h,d)}if(a.l&&(Tt(a.l.f,t,n,h,d),e.splice(o+1,0,a.l),delete a.l),a.a)for(p in a.a)a.a.hasOwnProperty(p)&&"string"!=typeof a.a[p]&&Tt(a.a[p],t,n,h,d);if(a.m&&Tt(a.m,t,n,h,d),a.v)for(p in a.v)a.v.hasOwnProperty(p)&&(s(a.v[p].n)&&Tt(a.v[p].n,t,n,h,d),s(a.v[p].d)&&Tt(a.v[p].d,t,n,h,d))}for(o=e.length;o--;)"string"==typeof e[o]&&("string"==typeof e[o+1]&&(e[o]=e[o]+e[o+1],e.splice(o+1,1)),n||(e[o]=e[o].replace(hd," ")),""===e[o]&&e.splice(o,1))}function Ft(e){var t,n;return t=e.pos,e.matchString("</")?(n=e.matchPattern(yd))?e.inside&&n!==e.inside?(e.pos=t,null):{t:rc,e:n}:(e.pos-=2,void e.error("Illegal closing tag")):null}function Ot(e){var t,n,i;return e.allowWhitespace(),(n=e.matchPattern(wd))?(t={name:n},i=Lt(e),null!=i&&(t.value=i),t):null}function Lt(e){var t,n,i,r;return t=e.pos,/[=\/>\s]/.test(e.nextChar())||e.error("Expected `=`, `/`, `>` or whitespace"),e.allowWhitespace(),e.matchString("=")?(e.allowWhitespace(),n=e.pos,i=e.sectionDepth,r=It(e,"'")||It(e,'"')||Mt(e),null===r&&e.error("Expected valid attribute value"),e.sectionDepth!==i&&(e.pos=n,e.error("An attribute value must contain as many opening section tags as closing section tags")),r.length?1===r.length&&"string"==typeof r[0]?Et(r[0]):r:""):(e.pos=t,null)}function Dt(e){var t,n,i,r,s;return t=e.pos,(n=e.matchPattern(kd))?(i=n,r=e.tags.map(function(e){return e.open}),-1!==(s=bd(i,r))&&(n=n.substr(0,s),e.pos=t+n.length),n):null}function Mt(e){var t,n;for(e.inAttribute=!0,t=[],n=Nc(e)||Dt(e);null!==n;)t.push(n),n=Nc(e)||Dt(e);return t.length?(e.inAttribute=!1,t):null}function It(e,t){var n,i,r;if(n=e.pos,!e.matchString(t))return null;for(e.inAttribute=t,i=[],r=Nc(e)||Nt(e,t);null!==r;)i.push(r),r=Nc(e)||Nt(e,t);return e.matchString(t)?(e.inAttribute=!1,i):(e.pos=n,null)}function Nt(e,t){var n,i,r,s;return n=e.pos,r=e.remaining(),s=e.tags.map(function(e){return e.open}),s.push(t),i=bd(r,s),-1===i&&e.error("Quoted attribute value must have a closing quote"),i?(e.pos+=i,r.substr(0,i)):null}function $t(e){var t,n,i;return e.allowWhitespace(),(t=Jc(e))?(i={key:t},e.allowWhitespace(),e.matchString(":")?(e.allowWhitespace(),(n=e.read())?(i.value=n.v,i):null):null):null}function Rt(e,t){var n,i,r,s,o,a,l,u,c;if("string"==typeof e){if(i=Cd.exec(e)){var h=e.lastIndexOf(")");return Ad.test(e)||t.error("Invalid input after method call expression '"+e.slice(h+1)+"'"),n={m:i[1]},s="["+e.slice(n.m.length+1,h)+"]",r=new xd(s),n.a=Ph(r.result[0]),n}if(-1===e.indexOf(":"))return e.trim();e=[e]}if(n={},l=[],u=[],e){for(;e.length;)if(o=e.shift(),"string"==typeof o){if(a=o.indexOf(":"),-1!==a){a&&l.push(o.substr(0,a)),o.length>a+1&&(u[0]=o.substring(a+1));break}l.push(o)}else l.push(o);u=u.concat(e)}return l.length?u.length||"string"!=typeof l?(n={n:1===l.length&&"string"==typeof l[0]?l[0]:l},1===u.length&&"string"==typeof u[0]?(c=Ed("["+u[0]+"]"),n.a=c?c.value:u[0].trim()):n.d=u):n=l:n="",n}function Vt(e){var t,n,i,r,s,o,a,l,u,c,h,d,p,f,m,v;if(t=e.pos,e.inside||e.inAttribute)return null;if(!e.matchString("<"))return null;if("/"===e.nextChar())return null;if(n={},e.includeLinePositions&&(n.p=e.getLinePos(t)),e.matchString("!"))return n.t=lc,e.matchPattern(/^doctype/i)||e.error("Expected DOCTYPE declaration"),n.a=e.matchPattern(/^(.+?)>/),n;if(n.t=Xu,n.e=e.matchPattern(Pd),!n.e)return null;for(Td.test(e.nextChar())||e.error("Illegal tag name"),s=function(t,i){var r=i.n||i;Ld.test(r)&&(e.pos-=r.length,e.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),n.v[t]=i},e.allowWhitespace();o=Nc(e)||_d(e);)o.name?(i=Dd[o.name])?n[i]=Sd(o.value,e):(r=Od.exec(o.name))?(n.v||(n.v={}),a=Sd(o.value,e),s(r[1],a)):e.sanitizeEventAttributes&&Fd.test(o.name)||(n.a||(n.a={}),n.a[o.name]=o.value||(""===o.value?"":0)):(n.m||(n.m=[]),n.m.push(o)),e.allowWhitespace();if(e.allowWhitespace(),e.matchString("/")&&(l=!0),!e.matchString(">"))return null;var g=n.e.toLowerCase(),y=e.preserveWhitespace;if(!l&&!bh.test(n.e)){e.elementStack.push(g),("script"===g||"style"===g)&&(e.inside=g),u=[],c=_a(null);do if(f=e.pos,m=e.remaining(),zt(g,m))if(v=gd(e)){p=!0;var b=v.e.toLowerCase();if(b!==g&&(e.pos=f,!~e.elementStack.indexOf(b))){var _="Unexpected closing tag";bh.test(b)&&(_+=" (<"+b+"> is a void element - it cannot contain children)"),e.error(_)}}else(d=Vh(e,{open:e.standardDelimiters[0],close:e.standardDelimiters[1]}))?(p=!0,e.pos=f):(d=e.read(ep))?(c[d.n]&&(e.pos=f,e.error("Duplicate partial definition")),cd(d.f,e.stripComments,y,!y,!y),c[d.n]=d.f,h=!0):(d=e.read(Xd))?u.push(d):p=!0;else p=!0;while(!p);u.length&&(n.f=u),h&&(n.p=c),e.elementStack.pop()}return e.inside=null,e.sanitizeElements&&-1!==e.sanitizeElements.indexOf(g)?Md:n}function zt(e,t){var n,i;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(t),i=jd[e],n&&i?!~i.indexOf(n[1].toLowerCase()):!0}function qt(e){var t,n,i,r;return n=e.remaining(),r=e.inside?"</"+e.inside:"<",e.inside&&!e.interpolate[e.inside]?t=n.indexOf(r):(i=e.tags.map(function(e){return e.open}),i=i.concat(e.tags.map(function(e){return"\\"+e.open})),e.inAttribute===!0?i.push('"',"'","=","<",">","`"):i.push(e.inAttribute?e.inAttribute:r),t=bd(n,i)),t?(-1===t&&(t=n.length),e.pos+=t,e.inside?n.substr(0,t):Et(n.substr(0,t))):null}function Bt(e){return e.replace(Vd,"\\$&")}function Ut(e){var t=e.pos,n=e.standardDelimiters[0],i=e.standardDelimiters[1],r=void 0,s=void 0;if(!e.matchPattern(qd)||!e.matchString(n))return e.pos=t,null;var o=e.matchPattern(Bd);if(v("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+o+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+o+"}} --> ... <!-- {{/"+o+"}} -->'"),!e.matchString(i)||!e.matchPattern(Ud))return e.pos=t,null;r=[];var a=new RegExp("^<!--\\s*"+Rd(n)+"\\s*\\/\\s*"+o+"\\s*"+Rd(i)+"\\s*-->");do e.matchPattern(a)?s=!0:(Id=e.read(Xd),Id||e.error("expected closing comment ('<!-- "+n+"/"+o+i+" -->')"),r.push(Id));while(!s);return{t:ac,f:r,n:o}}function Ht(e){var t,n,i,r,s;t=e.pos;var o=e.standardDelimiters;if(!e.matchString(o[0]))return null;if(!e.matchPattern(Wd))return e.pos=t,null;n=e.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),n||e.error("expected legal partial name"),
e.matchString(o[1])||e.error("Expected closing delimiter '"+o[1]+"'"),i=[];do(r=Vh(e,{open:e.standardDelimiters[0],close:e.standardDelimiters[1]}))?("partial"===!r.r&&e.error("Expected "+o[0]+"/partial"+o[1]),s=!0):(r=e.read(Xd),r||e.error("Expected "+o[0]+"/partial"+o[1]),i.push(r));while(!s);return{t:ac,n:n,f:i}}function Wt(e){for(var t=[],n=_a(null),i=!1,r=e.preserveWhitespace;e.pos<e.str.length;){var s=e.pos,o=void 0,a=void 0;(a=e.read(ep))?(n[a.n]&&(e.pos=s,e.error("Duplicated partial definition")),cd(a.f,e.stripComments,r,!r,!r),n[a.n]=a.f,i=!0):(o=e.read(Xd))?t.push(o):e.error("Unexpected template content")}var l={v:oa,t:t};return i&&(l.p=n),l}function Gt(e,t){return new Yd(e,t||{}).result}function Qt(e){var t=_a(sp);return t.parse=function(t,n){return Kt(t,n||e)},t}function Kt(e,t){if(!Qd)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Qd(e,t||this.options)}function Zt(e,t){var n;if(!Xo){if(t&&t.noThrow)return;throw new Error("Cannot retrieve template #"+e+" as Ractive is not running in a browser.")}if(Jt(e)&&(e=e.substring(1)),!(n=document.getElementById(e))){if(t&&t.noThrow)return;throw new Error("Could not find template element with id #"+e)}if("SCRIPT"!==n.tagName.toUpperCase()){if(t&&t.noThrow)return;throw new Error("Template element with id #"+e+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function Jt(e){return e&&"#"===e[0]}function Yt(e){return!("string"==typeof e)}function Xt(e){return e.defaults&&(e=e.defaults),rp.reduce(function(t,n){return t[n]=e[n],t},{})}function en(e){var t,n=e._config.template;if(n&&n.fn)return t=tn(e,n.fn),t!==n.result?(n.result=t,t=rn(t,e)):void 0}function tn(e,t){var n=nn(op.getParseOptions(e));return t.call(e,n)}function nn(e){var t=_a(op);return t.parse=function(t,n){return op.parse(t,n||e)},t}function rn(e,t){if("string"==typeof e)"#"===e[0]&&(e=op.fromId(e)),e=Qd(e,op.getParseOptions(t));else{if(void 0==e)throw new Error("The template cannot be "+e+".");if("number"!=typeof e.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(e.v!==oa)throw new Error("Mismatched template version (expected "+oa+", got "+e.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return e}function sn(e,t,n){if(t)for(var i in t)(n||!e.hasOwnProperty(i))&&(e[i]=t[i])}function on(e,t,n){if(!/_super/.test(n))return n;var i=function(){var e,r=an(i._parent,t),s="_super"in this,o=this._super;return this._super=r,e=n.apply(this,arguments),s?this._super=o:delete this._super,e};return i._parent=e,i._method=n,i}function an(e,t){var n,i;return t in e?(n=e[t],i="function"==typeof n?n:function(){return n}):i=Fa,i}function ln(e,t,n){return"options."+e+" has been deprecated in favour of options."+t+"."+(n?" You cannot specify both options, please use options."+t+".":"")}function un(e,t,n){if(t in e){if(n in e)throw new Error(ln(t,n,!0));m(ln(t,n)),e[n]=e[t]}}function cn(e){un(e,"beforeInit","onconstruct"),un(e,"init","onrender"),un(e,"complete","oncomplete"),un(e,"eventDefinitions","events"),s(e.adaptors)&&un(e,"adaptors","adapt")}function hn(e,t,n,i){gp(i);for(var r in i)if(fp.hasOwnProperty(r)){var s=i[r];"el"!==r&&"function"==typeof s?m(""+r+" is a Ractive option that does not expect a function and will be ignored","init"===e?n:null):n[r]=s}mp.forEach(function(r){r[e](t,n,i)}),Tu[e](t,n,i),lp[e](t,n,i),Ru[e](t,n,i),dn(t.prototype,n,i)}function dn(e,t,n){for(var i in n)if(!pp[i]&&n.hasOwnProperty(i)){var r=n[i];"function"==typeof r&&(r=vp(e,i,r)),t[i]=r}}function pn(e){var t={};return e.forEach(function(e){return t[e]=!0}),t}function fn(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function mn(){var e;return 1===this.items.length?this.items[0].detach():(e=document.createDocumentFragment(),this.items.forEach(function(t){var n=t.detach();n&&e.appendChild(n)}),e)}function vn(e){var t,n,i,r;if(this.items){for(n=this.items.length,t=0;n>t;t+=1)if(i=this.items[t],i.find&&(r=i.find(e)))return r;return null}}function gn(e,t){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAll&&r.findAll(e,t);return t}function yn(e,t){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAllComponents&&r.findAllComponents(e,t);return t}function bn(e){var t,n,i,r;if(this.items){for(t=this.items.length,n=0;t>n;n+=1)if(i=this.items[n],i.findComponent&&(r=i.findComponent(e)))return r;return null}}function _n(e){var t,n=e.index;return t=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function wn(){return this.items&&this.items[0]?this.items[0].firstNode():null}function kn(e,t,n,i){return i=i||0,e.map(function(e){var r,s,o;return e.text?e.text:e.fragments?e.fragments.map(function(e){return kn(e.items,t,n,i)}).join(""):(r=n+"-"+i++,o=e.keypath&&(s=e.root.viewmodel.wrapped[e.keypath.str])?s.value:e.getValue(),t[r]=o,"${"+r+"}")}).join("")}function xn(){var e,t,n,i;return this.dirtyArgs&&(t=Ap(this.items,e={},this.root._guid),n=Ed("["+t+"]",e),i=n?n.value:[this.toString()],this.argsList=i,this.dirtyArgs=!1),this.argsList}function En(){var e=this;do if(e.pElement)return e.pElement.node;while(e=e.parent);return this.root.detached||this.root.el}function Sn(){var e,t,n,i;return this.dirtyValue&&(t=Ap(this.items,e={},this.root._guid),n=Ed(t,e),i=n?n.value:this.toString(),this.value=i,this.dirtyValue=!1),this.value}function Cn(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function An(){return this.value}function jn(e,t){for(var n,i=0;i<t.prop.length;i++)if(void 0!==(n=e[t.prop[i]]))return n}function Pn(e,t){var n,i,r,s,o,a={},l=!1;for(t||(a.refs=n={});e;){if((o=e.owner)&&(i=o.indexRefs)){if(t&&(r=o.getIndexRef(t)))return a.ref={fragment:e,ref:r},a;if(!t)for(s in i)r=i[s],n[r.n]||(l=!0,n[r.n]={fragment:e,ref:r})}!e.parent&&e.owner&&e.owner.component&&e.owner.component.parentFragment&&!e.owner.component.instance.isolated?(a.componentBoundary=!0,e=e.owner.component.parentFragment):e=e.parent}return l?a:void 0}function Tn(e,t,n){var i;return"@"===t.charAt(0)?new Vp(e,t,n):(i=Bp(e.parentFragment,t))?new qp(e,i,n):new Np(e,t,n)}function Fn(e,t){var n,i;if(Gp[e])return Gp[e];for(i=[];t--;)i[t]="_"+t;return n=new Function(i.join(","),"return("+e+")"),Gp[e]=n,n}function On(e){return e.call()}function Ln(e,t){return e.replace(/_([0-9]+)/g,function(e,n){var i,r;return+n>=t.length?"_"+n:(i=t[n],void 0===i?"undefined":i.isSpecial?(r=i.value,"number"==typeof r?r:'"'+r+'"'):i.str)})}function Dn(e){return E("${"+e.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Mn(e){return void 0!==e&&"@"!==e[0]}function In(e,t){var n,i,r;if(e.__ractive_nowrap)return e;if(i="__ractive_"+t._guid,n=e[i])return n;if(/this/.test(e.toString())){wa(e,i,{value:Qp.call(e,t),configurable:!0});for(r in e)e.hasOwnProperty(r)&&(e[i][r]=e[r]);return t._boundFunctions.push({fn:e,prop:i}),e[i]}return wa(e,"__ractive_nowrap",{value:e}),e.__ractive_nowrap}function Nn(e){return e.value}function $n(e){return void 0!=e}function Rn(e){e.forceResolution()}function Vn(e,t){function n(t){e.resolve(t)}function i(t){var n=e.keypath;t!=n&&(e.resolve(t),void 0!==n&&e.fragments&&e.fragments.forEach(function(e){e.rebind(n,t)}))}var r,s,o;s=t.parentFragment,o=t.template,e.root=s.root,e.parentFragment=s,e.pElement=s.pElement,e.template=t.template,e.index=t.index||0,e.isStatic=t.template.s,e.type=t.template.t,e.registered=!1,(r=o.r)&&(e.resolver=Hp(e,r,n)),t.template.x&&(e.resolver=new Kp(e,s,t.template.x,i)),t.template.rx&&(e.resolver=new Xp(e,t.template.rx,i)),e.template.n!==Cc||e.hasOwnProperty("value")||e.setValue(void 0)}function zn(e){var t,n,i;return e&&e.isSpecial?(this.keypath=e,void this.setValue(e.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,t=!0),this.keypath=e,void 0!=e&&(n=this.root.viewmodel.get(e),this.root.viewmodel.register(e,this),this.registered=!0),this.setValue(n),void(t&&(i=this.twowayBinding)&&i.rebound()))}function qn(e,t){this.fragments&&this.fragments.forEach(function(n){return n.rebind(e,t)}),this.resolver&&this.resolver.rebind(e,t)}function Bn(){this.parentFragment.bubble()}function Un(){var e;return 1===this.fragments.length?this.fragments[0].detach():(e=document.createDocumentFragment(),this.fragments.forEach(function(t){e.appendChild(t.detach())}),e)}function Hn(e){var t,n,i;for(n=this.fragments.length,t=0;n>t;t+=1)if(i=this.fragments[t].find(e))return i;return null}function Wn(e,t){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAll(e,t)}function Gn(e,t){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAllComponents(e,t)}function Qn(e){var t,n,i;for(n=this.fragments.length,t=0;n>t;t+=1)if(i=this.fragments[t].findComponent(e))return i;return null}function Kn(e){return this.fragments[e.index+1]?this.fragments[e.index+1].firstNode():this.parentFragment.findNextNode(this)}function Zn(){var e,t,n;if(e=this.fragments.length)for(t=0;e>t;t+=1)if(n=this.fragments[t].firstNode())return n;return this.parentFragment.findNextNode(this)}function Jn(e){var t,n,i,r,s,o,a,l=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Ac){if(this.shuffling=!0,ml.scheduleTask(function(){return l.shuffling=!1}),t=this.parentFragment,s=[],e.forEach(function(e,t){var i,r,o,a,u;return e===t?void(s[e]=l.fragments[t]):(i=l.fragments[t],void 0===n&&(n=t),-1===e?(l.fragmentsToUnrender.push(i),void i.unbind()):(r=e-t,o=l.keypath.join(t),a=l.keypath.join(e),i.index=e,(u=i.registeredIndexRefs)&&u.forEach(Yn),i.rebind(o,a),void(s[e]=i)))}),r=this.root.viewmodel.get(this.keypath).length,void 0===n){if(this.length===r)return;n=this.length}for(this.length=this.fragments.length=r,this.rendered&&ml.addView(this),o={template:this.template.f,root:this.root,owner:this},i=n;r>i;i+=1)a=s[i],a||this.fragmentsToCreate.push(i),this.fragments[i]=a}}function Yn(e){e.rebind("","")}function Xn(){var e=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(t){return e.docFrag.appendChild(t.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function ei(e){var t,n,i=this;this.updating||(this.updating=!0,this.keypath&&(t=this.root.viewmodel.wrapped[this.keypath.str])&&(e=t.get()),this.fragmentsToCreate.length?(n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(e){var t;n.context=i.keypath.join(e),n.index=e,t=new yb(n),i.fragmentsToRender.push(i.fragments[e]=t)}),this.fragmentsToCreate.length=0):ni(this,e)&&(this.bubble(),this.rendered&&ml.addView(this)),this.value=e,this.updating=!1)}function ti(e,t,n){if(t===Ac&&e.indexRefs&&e.indexRefs[0]){var i=e.indexRefs[0];(n&&"i"===i.t||!n&&"k"===i.t)&&(n||(e.length=0,e.fragmentsToUnrender=e.fragments.slice(0),e.fragmentsToUnrender.forEach(function(e){return e.unbind()}))),i.t=n?"k":"i"}e.currentSubtype=t}function ni(e,t){var n={template:e.template.f||[],root:e.root,pElement:e.parentFragment.pElement,owner:e};if(e.hasContext=!0,e.subtype)switch(e.subtype){case Sc:return e.hasContext=!1,ai(e,t,!1,n);case Cc:return e.hasContext=!1,ai(e,t,!0,n);case jc:return oi(e,n);case Pc:return si(e,t,n);case Ac:if(u(t))return ti(e,e.subtype,!0),ri(e,t,n)}return e.ordered=!!o(t),e.ordered?(ti(e,Ac,!1),ii(e,t,n)):u(t)||"function"==typeof t?e.template.i?(ti(e,Ac,!0),ri(e,t,n)):(ti(e,jc,!1),oi(e,n)):(ti(e,Sc,!1),e.hasContext=!1,ai(e,t,!1,n))}function ii(e,t,n){var i,r,s;if(r=t.length,r===e.length)return!1;if(r<e.length)e.fragmentsToUnrender=e.fragments.splice(r,e.length-r),e.fragmentsToUnrender.forEach(G);else if(r>e.length)for(i=e.length;r>i;i+=1)n.context=e.keypath.join(i),n.index=i,s=new yb(n),e.fragmentsToRender.push(e.fragments[i]=s);return e.length=r,!0}function ri(e,t,n){var i,r,s,o,a,l;for(s=e.hasKey||(e.hasKey={}),r=e.fragments.length;r--;)o=e.fragments[r],o.key in t||(a=!0,o.unbind(),e.fragmentsToUnrender.push(o),e.fragments.splice(r,1),s[o.key]=!1);for(r=e.fragments.length;r--;)o=e.fragments[r],o.index!==r&&(o.index=r,(l=o.registeredIndexRefs)&&l.forEach(ci));r=e.fragments.length;for(i in t)s[i]||(a=!0,n.context=e.keypath.join(i),n.key=i,n.index=r++,o=new yb(n),e.fragmentsToRender.push(o),e.fragments.push(o),s[i]=!0);return e.length=e.fragments.length,a}function si(e,t,n){return t?oi(e,n):li(e)}function oi(e,t){var n;return e.length?void 0:(t.context=e.keypath,t.index=0,n=new yb(t),e.fragmentsToRender.push(e.fragments[0]=n),e.length=1,!0)}function ai(e,t,n,i){var r,s,a,l,c;if(s=o(t)&&0===t.length,a=!1,!o(t)&&u(t)){a=!0;for(c in t){a=!1;break}}return r=n?s||a||!t:t&&!s&&!a,r?e.length?e.length>1?(e.fragmentsToUnrender=e.fragments.splice(1),e.fragmentsToUnrender.forEach(G),!0):void 0:(i.index=0,l=new yb(i),e.fragmentsToRender.push(e.fragments[0]=l),e.length=1,!0):li(e)}function li(e){return e.length?(e.fragmentsToUnrender=e.fragments.splice(0,e.fragments.length).filter(ui),e.fragmentsToUnrender.forEach(G),e.length=e.fragmentsToRender.length=0,!0):void 0}function ui(e){return e.rendered}function ci(e){e.rebind("","")}function hi(e){var t,n,i;for(t="",n=0,i=this.length,n=0;i>n;n+=1)t+=this.fragments[n].toString(e);return t}function di(){var e=this;this.fragments.forEach(G),this.fragmentsToRender.forEach(function(t){return I(e.fragments,t)}),this.fragmentsToRender=[],Dp.call(this),this.length=0,this.unbound=!0}function pi(e){this.fragments.forEach(e?fi:mi),this.renderedFragments=[],this.rendered=!1}function fi(e){e.unrender(!0)}function mi(e){e.unrender(!1)}function vi(){var e,t,n,i,r,s,o;for(n=this.renderedFragments;e=this.fragmentsToUnrender.pop();)e.unrender(!0),n.splice(n.indexOf(e),1);for(;e=this.fragmentsToRender.shift();)e.render();for(this.rendered&&(r=this.parentFragment.getNode()),o=this.fragments.length,s=0;o>s;s+=1)e=this.fragments[s],t=n.indexOf(e,s),t!==s?(this.docFrag.appendChild(e.detach()),-1!==t&&n.splice(t,1),n.splice(s,0,e)):this.docFrag.childNodes.length&&(i=e.firstNode(),r.insertBefore(this.docFrag,i));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),r.insertBefore(this.docFrag,i)),this.renderedFragments=this.fragments.slice()}function gi(){var e,t;if(this.docFrag){for(e=this.nodes.length,t=0;e>t;t+=1)this.docFrag.appendChild(this.nodes[t]);return this.docFrag}}function yi(e){var t,n,i,r;for(n=this.nodes.length,t=0;n>t;t+=1)if(i=this.nodes[t],1===i.nodeType){if(da(i,e))return i;if(r=i.querySelector(e))return r}return null}function bi(e,t){var n,i,r,s,o,a;for(i=this.nodes.length,n=0;i>n;n+=1)if(r=this.nodes[n],1===r.nodeType&&(da(r,e)&&t.push(r),s=r.querySelectorAll(e)))for(o=s.length,a=0;o>a;a+=1)t.push(s[a])}function _i(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function wi(e){return Ff[e]||(Ff[e]=ha(e))}function ki(e){var t,n,i;e&&"select"===e.name&&e.binding&&(t=N(e.node.options).filter(xi),e.getAttribute("multiple")?i=t.map(function(e){return e.value}):(n=t[0])&&(i=n.value),void 0!==i&&e.binding.setValue(i),e.bubble())}function xi(e){return e.selected}function Ei(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=Of(this.value,this.parentFragment.getNode(),this.docFrag),Lf(this.pElement),this.rendered=!0,this.docFrag}function Si(e){var t;(t=this.root.viewmodel.wrapped[this.keypath.str])&&(e=t.get()),e!==this.value&&(this.value=e,this.parentFragment.bubble(),this.rendered&&ml.addView(this))}function Ci(){return void 0!=this.value?Et(""+this.value):""}function Ai(e){this.rendered&&e&&(this.nodes.forEach(t),this.rendered=!1)}function ji(){var e,t;if(this.rendered){for(;this.nodes&&this.nodes.length;)e=this.nodes.pop(),e.parentNode.removeChild(e);t=this.parentFragment.getNode(),this.nodes=Of(this.value,t,this.docFrag),t.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),Lf(this.pElement)}}function Pi(){var e,t=this.node;return t?((e=t.parentNode)&&e.removeChild(t),t):void 0}function Ti(){return null}function Fi(){return this.node}function Oi(e){return this.attributes&&this.attributes[e]?this.attributes[e].value:void 0}function Li(){var e=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();a(e,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=e,"value"===this.name&&this.node&&(this.node._ractive.value=e),this.rendered&&ml.addView(this))}function Di(e){var t=e.fragment.items;if(1===t.length)return t[0].type===Qu?t[0]:void 0}function Mi(e){return this.type=ic,this.element=e.element,this.root=e.root,sm(this,e.name),this.isBoolean=yh.test(this.name),e.value&&"string"!=typeof e.value?(this.parentFragment=this.element.parentFragment,this.fragment=new yb({template:e.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=om(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:e.value||"")}function Ii(e,t){this.fragment&&this.fragment.rebind(e,t)}function Ni(e){var t;this.node=e,e.namespaceURI&&e.namespaceURI!==ia.html||(t=cm[this.name]||this.name,void 0!==e[t]&&(this.propertyName=t),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===t&&(e._ractive.value=this.value)),this.rendered=!0,this.update()}function $i(){var e=this,t=e.name,n=e.namespacePrefix,i=e.value,r=e.interpolator,s=e.fragment;if(("value"!==t||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==t||void 0===this.element.getAttribute("contenteditable"))){if("name"===t&&"input"===this.element.name&&r)return"name={{"+(r.keypath.str||r.ref)+"}}";if(this.isBoolean)return i?t:"";if(s){if(1===s.items.length&&null==s.items[0].value)return"";i=s.toString()}return n&&(t=n+":"+t),i?t+'="'+Ri(i)+'"':t}}function Ri(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Vi(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function zi(){var e,t,n,i,r=this.value;if(!this.locked)for(this.node._ractive.value=r,e=this.node.options,i=e.length;i--;)if(t=e[i],n=t._ractive?t._ractive.value:t.value,n==r){t.selected=!0;break}}function qi(){var e,t,n,i,r=this.value;for(s(r)||(r=[r]),e=this.node.options,t=e.length;t--;)n=e[t],i=n._ractive?n._ractive.value:n.value,n.selected=O(r,i)}function Bi(){var e=this,t=e.node,n=e.value;t.checked=n==t._ractive.value}function Ui(){var e,t,n,i,r=this.node;if(e=r.checked,r.value=this.element.getAttribute("value"),r.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),e&&!r.checked&&this.element.binding&&(n=this.element.binding.siblings,i=n.length)){for(;i--;){if(t=n[i],!t.element.node)return;if(t.element.node.checked)return ml.addRactive(t.root),t.handleChange()}this.root.viewmodel.set(t.keypath,void 0)}}function Hi(){var e,t,n=this,i=n.element,r=n.node,o=n.value,a=i.binding;if(e=i.getAttribute("value"),s(o)){for(t=o.length;t--;)if(e==o[t])return void(a.isChecked=r.checked=!0);a.isChecked=r.checked=!1}else a.isChecked=r.checked=o==e}function Wi(){this.node.className=n(this.value)}function Gi(){var e=this,t=e.node,n=e.value;this.root.nodes[n]=t,t.id=n}function Qi(){var e,t;e=this.node,t=this.value,void 0===t&&(t=""),e.style.setAttribute("cssText",t)}function Ki(){var e=this.value;void 0===e&&(e=""),this.locked||(this.node.innerHTML=e)}function Zi(){var e=this,t=e.node,n=e.value;t._ractive.value=n,this.locked||(t.value=void 0==n?"":n)}function Ji(){this.locked||(this.node[this.propertyName]=this.value)}function Yi(){var e=this,t=e.node,n=e.namespace,i=e.name,r=e.value,s=e.fragment;n?t.setAttributeNS(n,i,(s||r).toString()):this.isBoolean?r?t.setAttribute(i,""):t.removeAttribute(i):null==r?t.removeAttribute(i):t.setAttribute(i,(s||r).toString())}function Xi(){var e,t,n=this,i=n.name,r=n.element,s=n.node;"id"===i?t=bm:"value"===i?"select"===r.name&&"value"===i?t=r.getAttribute("multiple")?fm:pm:"textarea"===r.name?t=km:null!=r.getAttribute("contenteditable")?t=wm:"input"===r.name&&(e=r.getAttribute("type"),t="file"===e?Fa:"radio"===e&&r.binding&&"name"===r.binding.name?vm:km):this.isTwoway&&"name"===i?"radio"===s.type?t=mm:"checkbox"===s.type&&(t=gm):"style"===i&&s.style.setAttribute?t=_m:"class"!==i||s.namespaceURI&&s.namespaceURI!==ia.html?this.useProperty&&(t=xm):t=ym,t||(t=Em),this.update=t,this.update()}function er(e,t){var n=t?"svg":"div";return Am.innerHTML="<"+n+" "+e+"></"+n+">",N(Am.childNodes[0].attributes)}function tr(e,t){for(var n=e.length;n--;)if(e[n].name===t.name)return!1;return!0}function nr(e){for(;e=e.parent;)if("form"===e.name)return e}function ir(){this._ractive.binding.handleChange()}function rr(){var e;Im.call(this),e=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==e?"":e}function sr(){var e=this._ractive.binding,t=this;e._timeout&&clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.rendered&&Im.call(t),e._timeout=void 0},e.element.lazy)}function or(e,t,n){var i=e+t+n;return zm[i]||(zm[i]=[])}function ar(e){return e.isChecked}function lr(e){return e.element.getAttribute("value")}function ur(e){var t,n,i,r,s,o=e.attributes;return e.binding&&(e.binding.teardown(),e.binding=null),(e.getAttribute("contenteditable")||o.contenteditable&&cr(o.contenteditable))&&cr(o.value)?n=Rm:"input"===e.name?(t=e.getAttribute("type"),"radio"===t||"checkbox"===t?(i=cr(o.name),r=cr(o.checked),i&&r&&m("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:e.root}),i?n="radio"===t?Hm:Gm:r&&(n="radio"===t?Bm:Km)):"file"===t&&cr(o.value)?n=tv:cr(o.value)&&(n="number"===t||"range"===t?nv:Nm)):"select"===e.name&&cr(o.value)?n=e.getAttribute("multiple")?Xm:Jm:"textarea"===e.name&&cr(o.value)&&(n=Nm),n&&(s=new n(e))&&s.keypath?s:void 0}function cr(e){return e&&e.isBindable}function hr(){var e=this.getAction();e&&!this.hasListener?this.listen():!e&&this.hasListener&&this.unrender()}function dr(e){zl(this.root,this.getAction(),{event:e})}function pr(){return this.action.toString().trim()}function fr(e,t,n){var i,r,s,o=this;this.element=e,this.root=e.root,this.parentFragment=e.parentFragment,this.name=t,-1!==t.indexOf("*")&&(h('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',e.name,t),this.invalid=!0),n.m?(r=n.a.r,this.method=n.m,this.keypaths=[],this.fn=Wp(n.a.s,r.length),this.parentFragment=e.parentFragment,s=this.root,this.refResolvers=[],r.forEach(function(e,t){var n=void 0;(n=lv.exec(e))?o.keypaths[t]={eventObject:!0,refinements:n[1]?n[1].split("."):[]}:o.refResolvers.push(Hp(o,e,function(e){return o.resolve(t,e)}))}),this.fire=mr):(i=n.n||n,"string"!=typeof i&&(i=new yb({template:i,root:this.root,owner:this})),this.action=i,n.d?(this.dynamicParams=new yb({template:n.d,root:this.root,owner:this.element}),this.fire=gr):n.a&&(this.params=n.a,this.fire=vr))}function mr(e){var t,n,i;if(t=this.root,"function"!=typeof t[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map(function(n){var i,r,s;if(void 0===n)return void 0;if(n.eventObject){if(i=e,r=n.refinements.length)for(s=0;r>s;s+=1)i=i[n.refinements[s]]}else i=t.viewmodel.get(n);return i}),Vl.enqueue(t,e),i=this.fn.apply(null,n),t[this.method].apply(t,i),Vl.dequeue(t)}function vr(e){zl(this.root,this.getAction(),{event:e,args:this.params})}function gr(e){var t=this.dynamicParams.getArgsList();"string"==typeof t&&(t=t.substr(1,t.length-2)),zl(this.root,this.getAction(),{event:e,args:t})}function yr(e){var t,n,i,r={};t=this._ractive,n=t.events[e.type],(i=Bp(n.element.parentFragment))&&(r=Bp.resolve(i)),n.fire({node:this,original:e,index:r,keypath:t.keypath.str,context:t.root.viewmodel.get(t.keypath)})}function br(){var e,t=this.name;if(!this.invalid){if(e=g("events",this.root,t))this.custom=e(this.node,_r(t));else{if(!("on"+t in this.node||window&&"on"+t in window||ea))return void(dv[t]||v(Ma(t,"event"),{node:this.node}));this.node.addEventListener(t,uv,!1)}this.hasListener=!0}}function _r(e){return hv[e]||(hv[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath.str,t.context=n.root.viewmodel.get(n.keypath),n.events[e].fire(t)}),hv[e]}function wr(e,t){function n(n){n&&n.rebind(e,t)}var i;return this.method?(i=this.element.parentFragment,void this.refResolvers.forEach(n)):("string"!=typeof this.action&&n(this.action),void(this.dynamicParams&&n(this.dynamicParams)))}function kr(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function xr(e,t){this.keypaths[e]=t}function Er(){return this.method?void this.refResolvers.forEach(G):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Sr(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,uv,!1),this.hasListener=!1}function Cr(){var e=this;this.dirty||(this.dirty=!0,ml.scheduleTask(function(){Ar(e),e.dirty=!1})),this.parentFragment.bubble()}function Ar(e){var t,n,i,r,s;t=e.node,t&&(r=N(t.options),n=e.getAttribute("value"),i=e.getAttribute("multiple"),void 0!==n?(r.forEach(function(e){var t,r;t=e._ractive?e._ractive.value:e.value,r=i?jr(n,t):n==t,r&&(s=!0),e.selected=r}),s||(r[0]&&(r[0].selected=!0),e.binding&&e.binding.forceUpdate())):e.binding&&e.binding.forceUpdate())}function jr(e,t){for(var n=e.length;n--;)if(e[n]==t)return!0}function Pr(e,t){e.select=Fr(e.parent),e.select&&(e.select.options.push(e),t.a||(t.a={}),void 0!==t.a.value||t.a.hasOwnProperty("disabled")||(t.a.value=t.f),"selected"in t.a&&void 0!==e.select.getAttribute("value")&&delete t.a.selected)}function Tr(e){e.select&&I(e.select.options,e)}function Fr(e){if(e)do if("select"===e.name)return e;while(e=e.parent)}function Or(e){var t,n,i,r,s,o,a;this.type=Xu,t=this.parentFragment=e.parentFragment,n=this.template=e.template,this.parent=e.pElement||t.pElement,this.root=i=t.root,this.index=e.index,this.key=e.key,this.name=rm(n.e),"option"===this.name&&Pr(this,n),"select"===this.name&&(this.options=[],this.bubble=Cr),"form"===this.name&&(this.formBindings=[]),a=nm(this,n),this.attributes=Pm(this,n.a),this.conditionalAttributes=Om(this,n.m),n.f&&(this.fragment=new yb({template:n.f,root:i,owner:this,pElement:this,cssIds:null})),o=i.twoway,a.twoway===!1?o=!1:a.twoway===!0&&(o=!0),this.twoway=o,this.lazy=a.lazy,o&&(r=iv(this,n.a))&&(this.binding=r,s=this.root._twowayBindings[r.keypath.str]||(this.root._twowayBindings[r.keypath.str]=[]),s.push(r)),n.v&&(this.eventHandlers=_v(this,n.v)),n.o&&(this.decorator=new Sv(this,n.o)),this.intro=n.t0||n.t1,this.outro=n.t0||n.t2}function Lr(e,t){function n(n){n.rebind(e,t)}var i,r,s,o;if(this.attributes&&this.attributes.forEach(n),this.conditionalAttributes&&this.conditionalAttributes.forEach(n),this.eventHandlers&&this.eventHandlers.forEach(n),this.decorator&&n(this.decorator),this.fragment&&n(this.fragment),s=this.liveQueries)for(o=this.root,i=s.length;i--;)s[i]._makeDirty();this.node&&(r=this.node._ractive)&&k(r,"keypath",e,t)}function Dr(e){var t;(e.attributes.width||e.attributes.height)&&e.node.addEventListener("load",t=function(){var n=e.getAttribute("width"),i=e.getAttribute("height");void 0!==n&&e.node.setAttribute("width",n),void 0!==i&&e.node.setAttribute("height",i),e.node.removeEventListener("load",t,!1)},!1)}function Mr(e){e.node.addEventListener("reset",Nr,!1)}function Ir(e){e.node.removeEventListener("reset",Nr,!1)}function Nr(){var e=this._ractive.proxy;ml.start(),e.formBindings.forEach($r),ml.end()}function $r(e){e.root.viewmodel.set(e.keypath,e.resetValue)}function Rr(e,t,n){var i,r,s;this.element=e,this.root=i=e.root,this.isIntro=n,r=t.n||t,("string"==typeof r||(s=new yb({template:r,root:i,owner:e}),r=s.toString(),s.unbind(),""!==r))&&(this.name=r,t.a?this.params=t.a:t.d&&(s=new yb({template:t.d,root:i,owner:e}),this.params=s.getArgsList(),s.unbind()),this._fn=g("transitions",i,r),this._fn||v(Ma(r,"transition"),{ractive:this.root}))}function Vr(e){return e}function zr(){tg.hidden=document[Jv]}function qr(){tg.hidden=!0}function Br(){tg.hidden=!1}function Ur(){var e,t,n,i=this;return e=this.node=this.element.node,t=e.getAttribute("style"),this.complete=function(r){n||(!r&&i.isIntro&&Hr(e,t),e._ractive.transition=null,i._manager.remove(i),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Hr(e,t){t?e.setAttribute("style",t):(e.getAttribute("style"),e.removeAttribute("style"))}function Wr(){var e,t,n,i=this,r=this.root;return e=Gr(this),t=this.node=ha(this.name,e),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(e){return"{"+e+"}"}).join(" ")),wa(this.node,"_ractive",{value:{proxy:this,keypath:al(this.parentFragment),events:_a(null),root:r}}),this.attributes.forEach(function(e){return e.render(t)}),this.conditionalAttributes.forEach(function(e){return e.render(t)}),this.fragment&&("script"===this.name?(this.bubble=dg,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Fa):"style"===this.name?(this.bubble=hg,this.bubble(),this.fragment.unrender=Fa):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Fa:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(e){return e.render()}),"option"===this.name&&Qr(this),"img"===this.name?Dr(this):"form"===this.name?Mr(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&ml.scheduleTask(function(){i.decorator.torndown||i.decorator.init()},!0),r.transitionsEnabled&&this.intro&&(n=new pg(this,this.intro,!0),ml.registerTransition(n),ml.scheduleTask(function(){return n.start()},!0),this.transition=n),this.node.autofocus&&ml.scheduleTask(function(){return i.node.focus()},!0),Kr(this),this.node}function Gr(e){var t,n,i;return t=(n=e.getAttribute("xmlns"))?n:"svg"===e.name?ia.svg:(i=e.parent)?"foreignObject"===i.name?ia.html:i.node.namespaceURI:e.root.el.namespaceURI}function Qr(e){var t,n,i;if(e.select&&(n=e.select.getAttribute("value"),void 0!==n))if(t=e.getAttribute("value"),e.select.node.multiple&&s(n)){for(i=n.length;i--;)if(t==n[i]){e.node.selected=!0;break}}else e.node.selected=t==n}function Kr(e){var t,n,i,r,s;t=e.root;do for(n=t._liveQueries,i=n.length;i--;)r=n[i],s=n["_"+r],s._test(e)&&(e.liveQueries||(e.liveQueries=[])).push(s);while(t=t.parent)}function Zr(e){var t,n,i;if(t=e.getAttribute("value"),void 0===t||!e.select)return!1;if(n=e.select.getAttribute("value"),n==t)return!0;if(e.select.getAttribute("multiple")&&s(n))for(i=n.length;i--;)if(n[i]==t)return!0}function Jr(e){var t,n,i,r;return t=e.attributes,n=t.type,i=t.value,r=t.name,n&&"radio"===n.value&&i&&r.interpolator&&i.value===r.interpolator.value?!0:void 0}function Yr(e){var t=e.toString();return t?" "+t:""}function Xr(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(G),"option"===this.name&&Tr(this),this.attributes.forEach(G),this.conditionalAttributes.forEach(G)}function es(e){var t,n,i;(i=this.transition)&&i.complete(),"option"===this.name?this.detach():e&&ml.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(t=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,n=this.root._twowayBindings[t.keypath.str],n.splice(n.indexOf(t),1)),this.eventHandlers&&this.eventHandlers.forEach(Q),
this.decorator&&ml.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(i=new pg(this,this.outro,!1),ml.registerTransition(i),ml.scheduleTask(function(){return i.start()})),this.liveQueries&&ts(this),"form"===this.name&&Ir(this)}function ts(e){var t,n,i;for(i=e.liveQueries.length;i--;)t=e.liveQueries[i],n=t.selector,t._remove(e.node)}function ns(e,t){var n=wg.exec(t)[0];return null===e||n.length<e.length?n:e}function is(e,t,n){var i;if(i=rs(e,t,n||{}))return i;if(i=op.fromId(t,{noThrow:!0})){i=kg(i);var r=op.parse(i,op.getParseOptions(e));return e.partials[t]=r.t}}function rs(e,t,n){var i=void 0,r=as(t,n.owner);if(r)return r;var s=y("partials",e,t);if(s){if(r=s.partials[t],"function"==typeof r&&(i=r.bind(s),i.isOwner=s.partials.hasOwnProperty(t),r=i.call(e,op)),!r&&""!==r)return void m(Da,t,"partial","partial",{ractive:e});if(!op.isParsed(r)){var o=op.parse(r,op.getParseOptions(s));o.p&&m("Partials ({{>%s}}) cannot contain nested inline partials",t,{ractive:e});var a=i?s:ss(s,t);a.partials[t]=r=o.t}return i&&(r._fn=i),r.v?r.t:r}}function ss(e,t){return e.partials.hasOwnProperty(t)?e:os(e.constructor,t)}function os(e,t){return e?e.partials.hasOwnProperty(t)?e:os(e._Parent,t):void 0}function as(e,t){if(t){if(t.template&&t.template.p&&t.template.p[e])return t.template.p[e];if(t.parentFragment&&t.parentFragment.owner)return as(e,t.parentFragment.owner)}}function ls(e,t){var n,i=y("components",e,t);if(i&&(n=i.components[t],!n._Parent)){var r=n.bind(i);if(r.isOwner=i.components.hasOwnProperty(t),n=r(),!n)return void m(Da,t,"component","component",{ractive:e});"string"==typeof n&&(n=ls(e,n)),n._fn=r,i.components[t]=n}return n}function us(){var e=this.instance.fragment.detach();return Lg.fire(this.instance),e}function cs(e){return this.instance.fragment.find(e)}function hs(e,t){return this.instance.fragment.findAll(e,t)}function ds(e,t){t._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(e,t)}function ps(e){return e&&e!==this.name?this.instance.fragment?this.instance.fragment.findComponent(e):null:this.instance}function fs(){return this.parentFragment.findNextNode(this)}function ms(){return this.rendered?this.instance.fragment.firstNode():null}function vs(e,t,n){function i(e){var n,i;e.value=t,e.updating||(i=e.ractive,n=e.keypath,e.updating=!0,ml.start(i),i.viewmodel.mark(n),ml.end(),e.updating=!1)}var r,s,o,a,l,u;if(r=e.obj,s=e.prop,n&&!n.configurable){if("length"===s)return;throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable')}n&&(o=n.get,a=n.set),l=o||function(){return t},u=function(e){a&&a(e),t=o?o():e,u._ractiveWrappers.forEach(i)},u._ractiveWrappers=[e],Object.defineProperty(r,s,{get:l,set:u,enumerable:!0,configurable:!0})}function gs(e,t){var n,i,r,s;if(this.adaptors)for(n=this.adaptors.length,i=0;n>i;i+=1)if(r=this.adaptors[i],r.filter(t,e,this.ractive))return s=this.wrapped[e]=r.wrap(this.ractive,t,e,bs(e)),void(s.value=t)}function ys(e,t){var n,i={};if(!t)return e;t+=".";for(n in e)e.hasOwnProperty(n)&&(i[t+n]=e[n]);return i}function bs(e){var t;return iy[e]||(t=e?e+".":"",iy[e]=function(n,i){var r;return"string"==typeof n?(r={},r[t+n]=i,r):"object"==typeof n?t?ys(n,e):n:void 0}),iy[e]}function _s(e){var t,n,i=[Ga];for(t=e.length;t--;)for(n=e[t].parent;n&&!n.isRoot;)-1===e.indexOf(n)&&F(i,n),n=n.parent;return i}function ws(e,t,n){var i;xs(e,t),n||(i=t.wildcardMatches(),i.forEach(function(n){ks(e,n,t)}))}function ks(e,t,n){var i,r,s;t=t.str||t,i=e.depsMap.patternObservers,r=i&&i[t],r&&r.forEach(function(t){s=n.join(t.lastKey),xs(e,s),ks(e,t,s)})}function xs(e,t){e.patternObservers.forEach(function(e){e.regex.test(t.str)&&e.update(t)})}function Es(){function e(e){var i=e.key;e.viewmodel===o?(o.clearCache(i.str),e.invalidate(),n.push(i),t(i)):e.viewmodel.mark(i)}function t(n){var i,r;o.noCascade.hasOwnProperty(n.str)||((r=o.deps.computed[n.str])&&r.forEach(e),(i=o.depsMap.computed[n.str])&&i.forEach(t))}var n,i,r,s=this,o=this,a={};return n=this.changes,n.length?(n.slice().forEach(t),i=ry(n),i.forEach(function(t){var i;-1===n.indexOf(t)&&(i=o.deps.computed[t.str])&&i.forEach(e)}),this.changes=[],this.patternObservers.length&&(i.forEach(function(e){return sy(s,e,!0)}),n.forEach(function(e){return sy(s,e)})),this.deps.observers&&(i.forEach(function(e){return Ss(s,null,e,"observers")}),As(this,n,"observers")),this.deps["default"]&&(r=[],i.forEach(function(e){return Ss(s,r,e,"default")}),r.length&&Cs(this,r,n),As(this,n,"default")),n.forEach(function(e){a[e.str]=s.get(e)}),this.implicitChanges={},this.noCascade={},a):void 0}function Ss(e,t,n,i){var r,s;(r=js(e,n,i))&&(s=e.get(n),r.forEach(function(e){t&&e.refineValue?t.push(e):e.setValue(s)}))}function Cs(e,t,n){t.forEach(function(t){for(var i=!1,r=0,s=n.length,o=[];s>r;){var a=n[r];if(a===t.keypath){i=!0;break}a.slice(0,t.keypath.length)===t.keypath&&o.push(a),r++}i&&t.setValue(e.get(t.keypath)),o.length&&t.refineValue(o)})}function As(e,t,n){function i(e){e.forEach(r),e.forEach(s)}function r(t){var i=js(e,t,n);i&&a.push({keypath:t,deps:i})}function s(t){var r;(r=e.depsMap[n][t.str])&&i(r)}function o(t){var n=e.get(t.keypath);t.deps.forEach(function(e){return e.setValue(n)})}var a=[];i(t),a.forEach(o)}function js(e,t,n){var i=e.deps[n];return i?i[t.str]:null}function Ps(){this.captureGroups.push([])}function Ts(e,t){var n,i;if(t||(i=this.wrapped[e])&&i.teardown()!==!1&&(this.wrapped[e]=null),this.cache[e]=void 0,n=this.cacheMap[e])for(;n.length;)this.clearCache(n.pop())}function Fs(e,t){var n=t.firstKey;return!(n in e.data||n in e.computations||n in e.mappings)}function Os(e,t){var n=new dy(e,t);return this.ready&&n.init(this),this.computations[e.str]=n}function Ls(e,t){var n,i,r,s,o,a=this.cache,l=e.str;if(t=t||vy,t.capture&&(s=M(this.captureGroups))&&(~s.indexOf(e)||s.push(e)),ja.call(this.mappings,e.firstKey))return this.mappings[e.firstKey].get(e,t);if(e.isSpecial)return e.value;if(void 0===a[l]?((i=this.computations[l])&&!i.bypass?(n=i.get(),this.adapt(l,n)):(r=this.wrapped[l])?n=r.value:e.isRoot?(this.adapt("",this.data),n=this.data):n=Ds(this,e),a[l]=n):n=a[l],!t.noUnwrap&&(r=this.wrapped[l])&&(n=r.get()),e.isRoot&&t.fullRootGet)for(o in this.mappings)n[o]=this.mappings[o].getValue();return n===fy?void 0:n}function Ds(e,t){var n,i,r,s;return n=e.get(t.parent),(s=e.wrapped[t.parent.str])&&(n=s.get()),null!==n&&void 0!==n?((i=e.cacheMap[t.parent.str])?-1===i.indexOf(t.str)&&i.push(t.str):e.cacheMap[t.parent.str]=[t.str],"object"!=typeof n||t.lastKey in n?(r=n[t.lastKey],e.adapt(t.str,r,!1),e.cache[t.str]=r,r):e.cache[t.str]=fy):void 0}function Ms(){var e;for(e in this.computations)this.computations[e].init(this)}function Is(e,t){var n=this.mappings[e.str]=new by(e,t);return n.initViewmodel(this),n}function Ns(e,t){var n,i=e.str;t&&(t.implicit&&(this.implicitChanges[i]=!0),t.noCascade&&(this.noCascade[i]=!0)),(n=this.computations[i])&&n.invalidate(),-1===this.changes.indexOf(e)&&this.changes.push(e);var r=t?t.keepExistingWrapper:!1;this.clearCache(i,r),this.ready&&this.onchange()}function $s(e,t,n,i){var r,s,o,a;if(this.mark(e),i&&i.compare){o=Vs(i.compare);try{r=t.map(o),s=n.map(o)}catch(l){m('merge(): "%s" comparison failed. Falling back to identity checking',e),r=t,s=n}}else r=t,s=n;a=wy(r,s),this.smartUpdate(e,n,a,t.length!==n.length)}function Rs(e){return JSON.stringify(e)}function Vs(e){if(e===!0)return Rs;if("string"==typeof e)return xy[e]||(xy[e]=function(t){return t[e]}),xy[e];if("function"==typeof e)return e;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function zs(e,t){var n,i,r,s=void 0===arguments[2]?"default":arguments[2];t.isStatic||((n=this.mappings[e.firstKey])?n.register(e,t,s):(i=this.deps[s]||(this.deps[s]={}),r=i[e.str]||(i[e.str]=[]),r.push(t),this.depsMap[s]||(this.depsMap[s]={}),e.isRoot||qs(this,e,s)))}function qs(e,t,n){for(var i,r,s;!t.isRoot;)i=e.depsMap[n],r=i[t.parent.str]||(i[t.parent.str]=[]),s=t.str,void 0===r["_"+s]&&(r["_"+s]=0,r.push(t)),r["_"+s]+=1,t=t.parent}function Bs(){return this.captureGroups.pop()}function Us(e){this.data=e,this.clearCache("")}function Hs(e,t){var n,i,r,s,o=void 0===arguments[2]?{}:arguments[2];if(!o.noMapping&&(n=this.mappings[e.firstKey]))return n.set(e,t);if(i=this.computations[e.str]){if(i.setting)return;i.set(t),t=i.get()}a(this.cache[e.str],t)||(r=this.wrapped[e.str],r&&r.reset&&(s=r.reset(t)!==!1,s&&(t=r.get())),i||s||Ws(this,e,t),o.silent?this.clearCache(e.str):this.mark(e))}function Ws(e,t,n){var i,r,s,o;s=function(){i.set?i.set(t.lastKey,n):(r=i.get(),o())},o=function(){r||(r=Jg(t.lastKey),e.set(t.parent,r,{silent:!0})),r[t.lastKey]=n},i=e.wrapped[t.parent.str],i?s():(r=e.get(t.parent),(i=e.wrapped[t.parent.str])?s():o())}function Gs(e,t,n){var i,r,s,o=this;if(r=n.length,n.forEach(function(t,n){-1===t&&o.mark(e.join(n),Ty)}),this.set(e,t,{silent:!0}),(i=this.deps["default"][e.str])&&i.filter(Qs).forEach(function(e){return e.shuffle(n,t)}),r!==t.length){for(this.mark(e.join("length"),Py),s=n.touchedFrom;s<t.length;s+=1)this.mark(e.join(s));for(s=t.length;r>s;s+=1)this.mark(e.join(s),Ty)}}function Qs(e){return"function"==typeof e.shuffle}function Ks(){var e,t=this;for(Object.keys(this.cache).forEach(function(e){return t.clearCache(e)});e=this.unresolvedImplicitDependencies.pop();)e.teardown()}function Zs(e,t){var n,i,r,s=void 0===arguments[2]?"default":arguments[2];if(!t.isStatic){if(n=this.mappings[e.firstKey])return n.unregister(e,t,s);if(i=this.deps[s][e.str],r=i.indexOf(t),-1===r)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");i.splice(r,1),e.isRoot||Js(this,e,s)}}function Js(e,t,n){for(var i,r;!t.isRoot;)i=e.depsMap[n],r=i[t.parent.str],r["_"+t.str]-=1,r["_"+t.str]||(I(r,t),r["_"+t.str]=void 0),t=t.parent}function Ys(e){this.hook=new nl(e),this.inProcess={},this.queue={}}function Xs(e,t){return e[t._guid]||(e[t._guid]=[])}function eo(e,t){var n=Xs(e.queue,t);for(e.hook.fire(t);n.length;)eo(e,n.shift());delete e.queue[t._guid]}function to(e,t){var n,i={};for(n in t)i[n]=no(e,n,t[n]);return i}function no(e,t,n){var i,r;return"function"==typeof n&&(i=ro(n,e)),"string"==typeof n&&(i=io(e,n)),"object"==typeof n&&("string"==typeof n.get?i=io(e,n.get):"function"==typeof n.get?i=ro(n.get,e):h("`%s` computation must have a `get()` method",t),"function"==typeof n.set&&(r=ro(n.set,e))),{getter:i,setter:r}}function io(e,t){var n,i,r;return n="return ("+t.replace(Ny,function(e,t){return i=!0,'__ractive.get("'+t+'")'})+");",i&&(n="var __ractive = this; "+n),r=new Function(n),i?r.bind(e):r}function ro(e,t){return/this/.test(e.toString())?e.bind(t):e}function so(t){var n,r,s=void 0===arguments[1]?{}:arguments[1],o=void 0===arguments[2]?{}:arguments[2];if(Wb.DEBUG&&Aa(),lo(t,o),wa(t,"data",{get:uo}),$y.fire(t,s),qy.forEach(function(e){t[e]=i(_a(t.constructor[e]||null),s[e])}),r=new Dy({adapt:oo(t,t.adapt,s),data:zu.init(t.constructor,t,s),computed:Iy(t,i(_a(t.constructor.prototype.computed),s.computed)),mappings:o.mappings,ractive:t,onchange:function(){return ml.addRactive(t)}}),t.viewmodel=r,r.init(),yp.init(t.constructor,t,s),Ry.fire(t),Vy.begin(t),t.template){var a=void 0;(o.cssIds||t.cssId)&&(a=o.cssIds?o.cssIds.slice():[],t.cssId&&a.push(t.cssId)),t.fragment=new yb({template:t.template,root:t,owner:t,cssIds:a})}if(Vy.end(t),n=e(t.el)){var l=t.render(n,t.append);Wb.DEBUG_PROMISES&&l["catch"](function(e){throw v("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),m("An error happened during rendering",{ractive:t}),e.stack&&d(e.stack),e})}}function oo(e,t,n){function i(t){return"string"==typeof t&&(t=g("adaptors",e,t),t||h(Ma(t,"adaptor"))),t}var r,s,o;if(t=t.map(i),r=D(n.adapt).map(i),r=ao(t,r),s="magic"in n?n.magic:e.magic,o="modifyArrays"in n?n.modifyArrays:e.modifyArrays,s){if(!na)throw new Error("Getters and setters (magic mode) are not supported in this browser");o&&r.push(ty),r.push(ey)}return o&&r.push(Kg),r}function ao(e,t){for(var n=e.slice(),i=t.length;i--;)~n.indexOf(t[i])||n.push(t[i]);return n}function lo(e,t){e._guid="r-"+zy++,e._subs=_a(null),e._config={},e._twowayBindings=_a(null),e._animations=[],e.nodes={},e._liveQueries=[],e._liveComponentQueries=[],e._boundFunctions=[],e._observers=[],t.component?(e.parent=t.parent,e.container=t.container||null,e.root=e.parent.root,e.component=t.component,t.component.instance=e,e._inlinePartials=t.inlinePartials):(e.root=e,e.parent=e.container=null)}function uo(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function co(e,t,n){this.parentFragment=e.parentFragment,this.callback=n,this.fragment=new yb({template:t,root:e.root,owner:this}),this.update()}function ho(e,t,n){var i;return t.r?i=Hp(e,t.r,n):t.x?i=new Kp(e,e.parentFragment,t.x,n):t.rx&&(i=new Xp(e,t.rx,n)),i}function po(e){return 1===e.length&&e[0].t===Qu}function fo(e,t){var n;for(n in t)t.hasOwnProperty(n)&&mo(e.instance,e.root,n,t[n])}function mo(e,t,n,i){"string"!=typeof i&&h("Components currently only support simple events - you cannot include arguments. Sorry!"),e.on(n,function(){var e,n;return arguments.length&&arguments[0]&&arguments[0].node&&(e=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),zl(t,i,{event:e,args:n}),!1})}function vo(e,t){var n,i;if(!t)throw new Error('Component "'+this.name+'" not found');n=this.parentFragment=e.parentFragment,i=n.root,this.root=i,this.type=sc,this.name=e.template.e,this.index=e.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],Hy(this,t,e.template.a,e.template.f,e.template.p),Wy(this,e.template.v),(e.template.t0||e.template.t1||e.template.t2||e.template.o)&&m('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance}),Gy(this)}function go(e,t){function n(n){n.rebind(e,t)}var i;this.resolvers.forEach(n);for(var r in this.yielders)this.yielders[r][0]&&n(this.yielders[r][0]);(i=this.root._liveComponentQueries["_"+this.name])&&i._makeDirty()}function yo(){var e=this.instance;return e.render(this.parentFragment.getNode()),this.rendered=!0,e.fragment.detach()}function bo(){return this.instance.fragment.toString()}function _o(){var e=this.instance;this.resolvers.forEach(G),wo(this),e._observers.forEach(K),e.fragment.unbind(),e.viewmodel.teardown(),e.fragment.rendered&&e.el.__ractive_instances__&&I(e.el.__ractive_instances__,e),Xy.fire(e)}function wo(e){var t,n;t=e.root;do(n=t._liveComponentQueries["_"+e.name])&&n._remove(e);while(t=t.parent)}function ko(e){this.shouldDestroy=e,this.instance.unrender()}function xo(e){var t=this;this.owner=e.owner,this.parent=this.owner.parentFragment,this.root=e.root,this.pElement=e.pElement,this.context=e.context,this.index=e.index,this.key=e.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in e?e.cssIds:this.parent?this.parent.cssIds:null,this.items=e.template.map(function(n,i){return Eo({parentFragment:t,pElement:e.pElement,template:n,index:i})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function Eo(e){if("string"==typeof e.template)return new Lp(e);switch(e.template.t){case oc:return new ob(e);case Qu:return new of(e);case Zu:return new Cf(e);case Ku:return new Uf(e);case Xu:var t=void 0;return(t=Fg(e.parentFragment.root,e.template.e))?new nb(e,t):new bg(e);case ec:return new Tg(e);case tc:return new rb(e);case lc:return new lb(e);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function So(e,t){(!this.owner||this.owner.hasContext)&&k(this,"context",e,t),this.items.forEach(function(n){n.rebind&&n.rebind(e,t)})}function Co(){var e;return 1===this.items.length?e=this.items[0].render():(e=document.createDocumentFragment(),this.items.forEach(function(t){e.appendChild(t.render())})),this.rendered=!0,e}function Ao(e){return this.items?this.items.map(e?Po:jo).join(""):""}function jo(e){return e.toString()}function Po(e){return e.toString(!0)}function To(){this.bound&&(this.items.forEach(Fo),this.bound=!1)}function Fo(e){e.unbind&&e.unbind()}function Oo(e){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(t){return t.unrender(e)}),this.rendered=!1}function Lo(e){var t,n,i,r,s;if(e=e||{},"object"!=typeof e)throw new Error("The reset method takes either no arguments, or an object containing new data");for((n=this.viewmodel.wrapped[""])&&n.reset?n.reset(e)===!1&&this.viewmodel.reset(e):this.viewmodel.reset(e),i=yp.reset(this),r=i.length;r--;)if(_b.indexOf(i[r])>-1){s=!0;break}if(s){var o=void 0;this.viewmodel.mark(Ga),(o=this.component)&&(o.shouldDestroy=!0),this.unrender(),o&&(o.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new yb({template:this.template,root:this,owner:this})),t=this.render(this.el,this.anchor)}else t=ml.start(this,!0),this.viewmodel.mark(Ga),ml.end();return wb.fire(this,e),t}function Do(e){var t,n;lp.init(null,this,{template:e}),t=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new yb({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=t}function Mo(e,t){var n,i;if(i=ml.start(this,!0),u(e)){n=e;for(e in n)n.hasOwnProperty(e)&&(t=n[e],Io(this,e,t))}else Io(this,e,t);return ml.end(),i}function Io(e,t,n){t=E(A(t)),t.isPattern?S(e,t).forEach(function(t){e.viewmodel.set(t,n)}):e.viewmodel.set(t,n)}function No(e,t){return Qa(this,e,void 0===t?-1:-t)}function $o(){var e;return this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(K),this.fragment.rendered&&this.el.__ractive_instances__&&I(this.el.__ractive_instances__,this),this.shouldDestroy=!0,e=this.fragment.rendered?this.unrender():ol.resolve(),Fb.fire(this),this._boundFunctions.forEach(Ro),e}function Ro(e){delete e.fn[e.prop]}function Vo(e){var t=this;if("string"!=typeof e)throw new TypeError(La);var n=void 0;return/\*/.test(e)?(n={},S(this,E(A(e))).forEach(function(e){n[e.str]=!t.viewmodel.get(e)}),this.set(n)):this.set(e,!this.get(e))}function zo(){return this.fragment.toString(!0)}function qo(){var e,t;if(!this.fragment.rendered)return m("ractive.unrender() was called on a Ractive instance that was not rendered"),ol.resolve();for(e=ml.start(this,!0),t=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(t),I(this.el.__ractive_instances__,this),Mb.fire(this),ml.end(),e}function Bo(e){var t;return e=E(e)||Ga,t=ml.start(this,!0),this.viewmodel.mark(e),ml.end(),$b.fire(this,e),t}function Uo(e,t){var n,i,r;if("string"!=typeof e||t){r=[];for(i in this._twowayBindings)(!e||E(i).equalsOrStartsWith(e))&&r.push.apply(r,this._twowayBindings[i])}else r=this._twowayBindings[e];return n=Ho(this,r),this.set(n)}function Ho(e,t){var n={},i=[];return t.forEach(function(e){var t,r;if(!e.radioName||e.element.node.checked){if(e.checkboxName)return void(i[e.keypath.str]||e.changed()||(i.push(e.keypath),i[e.keypath.str]=e));t=e.attribute.value,r=e.getValue(),L(t,r)||a(t,r)||(n[e.keypath.str]=r)}}),i.length&&i.forEach(function(e){var t,r,s;t=i[e.str],r=t.attribute.value,s=t.getValue(),L(r,s)||(n[e.str]=s)}),n}function Wo(e,t){return"function"==typeof t&&/_super/.test(e)}function Go(e){for(var t={};e;)Qo(e,t),Zo(e,t),e=e._Parent!==Wb?e._Parent:!1;return t}function Qo(e,t){mp.forEach(function(n){Ko(n.useDefaults?e.prototype:e,t,n.name)})}function Ko(e,t,n){var i,r=Object.keys(e[n]);r.length&&((i=t[n])||(i=t[n]={}),r.filter(function(e){return!(e in i)}).forEach(function(t){return i[t]=e[n][t]}))}function Zo(e,t){Object.keys(e.prototype).forEach(function(n){if("computed"!==n){var i=e.prototype[n];if(n in t){if("function"==typeof t[n]&&"function"==typeof i&&t[n]._method){var r=void 0,s=i._method;s&&(i=i._method),r=zb(t[n]._method,i),s&&(r._method=r),t[n]=r}}else t[n]=i._method?i._method:i}})}function Jo(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.length?t.reduce(Yo,this):Yo(this)}function Yo(e){var t,n,r=void 0===arguments[1]?{}:arguments[1];return r.prototype instanceof Wb&&(r=qb(r)),t=function(e){return this instanceof t?void By(this,e):new t(e)},n=_a(e.prototype),n.constructor=t,ka(t,{defaults:{value:n},extend:{value:Jo,writable:!0,configurable:!0},_Parent:{value:e}}),yp.extend(e,n,r),zu.extend(e,n,r),r.computed&&(n.computed=i(_a(e.prototype.computed),r.computed)),t.prototype=n,t}var Xo,ea,ta,na,ia,ra,sa,oa=3,aa={el:void 0,append:!1,template:{v:oa,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},la=aa,ua={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}};Xo="object"==typeof document,ea="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),ta="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),na=!0}catch(ca){na=!1}ia={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ra="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),sa=["o","ms","moz","webkit"];var ha,da,pa,fa,ma,va,ga,ya,ba;if(ha=ra?function(e,t){return t&&t!==ia.html?document.createElementNS(t,e):document.createElement(e)}:function(e,t){if(t&&t!==ia.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(e)},Xo){for(pa=ha("div"),fa=["matches","matchesSelector"],ba=function(e){return function(t,n){return t[e](n)}},ga=fa.length;ga--&&!da;)if(ma=fa[ga],pa[ma])da=ba(ma);else for(ya=sa.length;ya--;)if(va=sa[ga]+ma.substr(0,1).toUpperCase()+ma.substring(1),pa[va]){da=ba(va);break}da||(da=function(e,t){var n,i,r;for(i=e.parentNode,i||(pa.innerHTML="",i=pa,e=e.cloneNode(),pa.appendChild(e)),n=i.querySelectorAll(t),r=n.length;r--;)if(n[r]===e)return!0;return!1})}else da=null;var _a,wa,ka,xa=null;try{Object.defineProperty({},"test",{value:0}),Xo&&Object.defineProperty(document.createElement("div"),"test",{value:0}),wa=Object.defineProperty}catch(Ea){wa=function(e,t,n){e[t]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Ea){throw Ea}Xo&&Object.defineProperties(ha("div"),{test:{value:0}}),ka=Object.defineProperties}catch(Ea){ka=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&wa(e,n,t[n])}}try{Object.create(null),_a=Object.create}catch(Ea){_a=function(){var e=function(){};return function(t,n){var i;return null===t?{}:(e.prototype=t,i=new e,n&&Object.defineProperties(i,n),i)}}()}var Sa,Ca,Aa,ja=Object.prototype.hasOwnProperty,Pa=Object.prototype.toString,Ta=/^\[object (?:Array|FileList)\]$/,Fa=function(){},Oa={};ta?!function(){var e=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],t="You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Aa=function(){var n=!!console.groupCollapsed;console[n?"groupCollapsed":"log"].apply(console,e),console.log(t),n&&console.groupEnd(e),Aa=Fa},Ca=function(e,t){if(Aa(),"object"==typeof t[t.length-1]){var n=t.pop(),i=n?n.ractive:null;if(i){var r=void 0;i.component&&(r=i.component.name)&&(e="<"+r+"> "+e);var s=void 0;(s=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&t.push(s)}}console.warn.apply(console,["%cRactive.js: %c"+e,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(t))},Sa=function(){console.log.apply(console,arguments)}}():Ca=Sa=Aa=Fa;var La="Bad arguments",Da='A function was specified for "%s" %s, but no %s was returned',Ma=function(e,t){return'Missing "'+e+'" '+t+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+t+"s"},Ia=function(e,t,n,i){if(e===t)return b(t);if(i){var r=g("interpolators",n,i);if(r)return r(e,t)||b(t);h(Ma(i,"interpolator"))}return Ra.number(e,t)||Ra.array(e,t)||Ra.object(e,t)||b(t)},Na=Ia,$a={number:function(e,t){var n;return l(e)&&l(t)?(e=+e,t=+t,n=t-e,n?function(t){return e+t*n}:function(){return e}):null},array:function(e,t){var n,i,r,o;if(!s(e)||!s(t))return null;for(n=[],i=[],o=r=Math.min(e.length,t.length);o--;)i[o]=Na(e[o],t[o]);for(o=r;o<e.length;o+=1)n[o]=e[o];for(o=r;o<t.length;o+=1)n[o]=t[o];return function(e){for(var t=r;t--;)n[t]=i[t](e);return n}},object:function(e,t){var n,i,r,s,o;if(!u(e)||!u(t))return null;n=[],s={},r={};for(o in e)ja.call(e,o)&&(ja.call(t,o)?(n.push(o),r[o]=Na(e[o],t[o])):s[o]=e[o]);for(o in t)ja.call(t,o)&&!ja.call(e,o)&&(s[o]=t[o]);return i=n.length,function(e){for(var t,o=i;o--;)t=n[o],s[t]=r[t](e);return s}}},Ra=$a,Va=_,za={},qa=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Ba=/\*/,Ua={},Ha=function(e){var t=e.split(".");this.str=e,"@"===e[0]&&(this.isSpecial=!0,this.value=x(e)),this.firstKey=t[0],this.lastKey=t.pop(),this.isPattern=Ba.test(e),this.parent=""===e?null:E(t.join(".")),this.isRoot=!e};Ha.prototype={equalsOrStartsWith:function(e){return e===this||this.startsWith(e)},join:function(e){return E(this.isRoot?String(e):this.str+"."+e)},replace:function(e,t){return this===e?t:this.startsWith(e)?null===t?t:E(this.str.replace(e.str+".",t.str+".")):void 0},startsWith:function(e){return e?e&&this.str.substr(0,e.str.length+1)===e.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=Va(this.str))}};var Wa,Ga=E(""),Qa=j,Ka="Cannot add to a non-numeric value",Za=P;"undefined"==typeof window?Wa=null:(!function(e,t,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<e.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[e[i]+"RequestAnimationFrame"];n.requestAnimationFrame||(r=n.setTimeout,n.requestAnimationFrame=function(e){var n,i,s;return n=Date.now(),i=Math.max(0,16-(n-t)),s=r(function(){e(n+i)},i),t=n+i,s})}}(sa,0,window),Wa=window.requestAnimationFrame);var Ja,Ya=Wa;Ja="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Xa=Ja,el={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};T.prototype.fire=function(e,t){function n(n){return e[n]?(t?e[n](t):e[n](),!0):void 0}n(this.method),!e[this.method]&&this.deprecate&&n(this.deprecate.deprecated)&&(this.deprecate.message?m(this.deprecate.message):m('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),t?e.fire(this.event,t):e.fire(this.event)};var tl,nl=T,il={},rl={},sl={};"function"==typeof Promise?tl=Promise:(tl=function(e){var t,n,i,r,s,o,a=[],l=[],u=il;i=function(e){return function(i){u===il&&(t=i,u=e,n=R(u===rl?a:l,t),$(n))}},r=i(rl),s=i(sl);try{e(r,s)}catch(c){s(c)}return o={then:function(e,t){var i=new tl(function(r,s){var o=function(e,t,n){t.push("function"==typeof e?function(t){var n;try{n=e(t),V(i,n,r,s)}catch(o){s(o)}}:n)};o(e,a,r),o(t,l,s),u!==il&&$(n)});return i}},o["catch"]=function(e){return this.then(null,e)},o},tl.all=function(e){return new tl(function(t,n){var i,r,s,o=[];if(!e.length)return void t(o);for(s=function(e,r){e&&"function"==typeof e.then?e.then(function(e){o[r]=e,--i||t(o)},n):(o[r]=e,--i||t(o))},i=r=e.length;r--;)s(e[r],r)})},tl.resolve=function(e){return new tl(function(t){t(e)})},tl.reject=function(e){return new tl(function(t,n){n(e)})});var ol=tl,al=function(e){do if(void 0!==e.context)return e.context;while(e=e.parent);return Ga},ll=z,ul=function(e,t){this.callback=e,this.parent=t,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,t&&t.addChild(this)};ul.prototype={addChild:function(e){this.children.push(e),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,Y(this)},decrementTotal:function(){this.totalChildren-=1,Y(this)},add:function(e){var t=e.isIntro?this.intros:this.outros;t.push(e)},addDecorator:function(e){this.decoratorQueue.push(e)},remove:function(e){var t=e.isIntro?this.intros:this.outros;I(t,e),Y(this)},init:function(){this.ready=!0,Y(this)},detachNodes:function(){this.decoratorQueue.forEach(W),this.detachQueue.forEach(Z),this.children.forEach(J)}};var cl,hl,dl=ul,pl=[],fl=new nl("change");hl={start:function(e,t){var n,i;return t&&(n=new ol(function(e){return i=e})),cl={previousBatch:cl,transitionManager:new dl(i,cl&&cl.transitionManager),views:[],tasks:[],ractives:[],instance:e},e&&cl.ractives.push(e),n},end:function(){X(),cl.transitionManager.init(),!cl.previousBatch&&cl.instance&&(cl.instance.viewmodel.changes=[]),cl=cl.previousBatch},addRactive:function(e){cl&&F(cl.ractives,e)},registerTransition:function(e){e._manager=cl.transitionManager,cl.transitionManager.add(e)},registerDecorator:function(e){cl.transitionManager.addDecorator(e)},addView:function(e){cl.views.push(e)},addUnresolved:function(e){pl.push(e)},removeUnresolved:function(e){I(pl,e)},detachWhenReady:function(e){cl.transitionManager.detachQueue.push(e)},scheduleTask:function(e,t){var n;if(cl){for(n=cl;t&&n.previousBatch;)n=n.previousBatch;n.tasks.push(e)}else e()}};var ml=hl,vl=[],gl={tick:function(){var e,t,n;for(n=Xa(),ml.start(),e=0;e<vl.length;e+=1)t=vl[e],t.tick(n)||vl.splice(e--,1);ml.end(),vl.length?Ya(gl.tick):gl.running=!1},add:function(e){vl.push(e),gl.running||(gl.running=!0,Ya(gl.tick))},abort:function(e,t){for(var n,i=vl.length;i--;)n=vl[i],n.root===t&&n.keypath===e&&n.stop()}},yl=gl,bl=function(e){var t;this.startTime=Date.now();

for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.interpolator=Na(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};bl.prototype={tick:function(){var e,t,n,i,r,s;return s=this.keypath,this.running?(i=Date.now(),e=i-this.startTime,e>=this.duration?(null!==s&&(ml.start(this.root),this.root.viewmodel.set(s,this.to),ml.end()),this.step&&this.step(1,this.to),this.complete(this.to),r=this.root._animations.indexOf(this),-1===r&&m("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(t=this.easing?this.easing(e/this.duration):e/this.duration,null!==s&&(n=this.interpolator(t),ml.start(this.root),this.root.viewmodel.set(s,n),ml.end()),this.step&&this.step(t,n),!0)):!1},stop:function(){var e;this.running=!1,e=this.root._animations.indexOf(this),-1===e&&m("Animation was not found"),this.root._animations.splice(e,1)}};var _l=bl,wl=ne,kl={stop:Fa},xl=re,El=new nl("detach"),Sl=se,Cl=oe,Al=function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),-1!==n&&(e.splice(n,1),e[t]=null)},jl=function(e,t){var n,i,r,s,o,a,l,u,c,h;for(n=le(e.component||e._ractive.proxy),i=le(t.component||t._ractive.proxy),r=M(n),s=M(i);r&&r===s;)n.pop(),i.pop(),o=r,r=M(n),s=M(i);if(r=r.component||r,s=s.component||s,c=r.parentFragment,h=s.parentFragment,c===h)return a=c.items.indexOf(r),l=h.items.indexOf(s),a-l||n.length-i.length;if(u=o.fragments)return a=u.indexOf(c),l=u.indexOf(h),a-l||n.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Pl=function(e,t){var n;return e.compareDocumentPosition?(n=e.compareDocumentPosition(t),2&n?1:-1):jl(e,t)},Tl=function(){this.sort(this._isComponentQuery?jl:Pl),this._dirty=!1},Fl=function(){var e=this;this._dirty||(this._dirty=!0,ml.scheduleTask(function(){e._sort()}))},Ol=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);-1!==t&&this.splice(t,1)},Ll=ue,Dl=ce,Ml=he,Il=de,Nl=pe,$l=fe,Rl={enqueue:function(e,t){e.event&&(e._eventQueue=e._eventQueue||[],e._eventQueue.push(e.event)),e.event=t},dequeue:function(e){e._eventQueue&&e._eventQueue.length?e.event=e._eventQueue.pop():delete e.event}},Vl=Rl,zl=me,ql=ye,Bl=be,Ul={capture:!0,noUnwrap:!0,fullRootGet:!0},Hl=_e,Wl=new nl("insert"),Gl=ke,Ql=function(e,t,n,i){this.root=e,this.keypath=t,this.callback=n,this.defer=i.defer,this.context=i&&i.context?i.context:e};Ql.prototype={init:function(e){this.value=this.root.get(this.keypath.str),e!==!1?this.update():this.oldValue=this.value},setValue:function(e){var t=this;a(e,this.value)||(this.value=e,this.defer&&this.ready?ml.scheduleTask(function(){return t.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Kl,Zl=Ql,Jl=xe,Yl=Array.prototype.slice;Kl=function(e,t,n,i){this.root=e,this.callback=n,this.defer=i.defer,this.keypath=t,this.regex=new RegExp("^"+t.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=i&&i.context?i.context:e},Kl.prototype={init:function(e){var t,n;if(t=Jl(this.root,this.keypath),e!==!1)for(n in t)t.hasOwnProperty(n)&&this.update(E(n));else this.values=t},update:function(e){var t,n=this;if(e.isPattern){t=Jl(this.root,e);for(e in t)t.hasOwnProperty(e)&&this.update(E(e))}else if(!this.root.viewmodel.implicitChanges[e.str])return this.defer&&this.ready?void ml.scheduleTask(function(){return n.getProxy(e).update()}):void this.reallyUpdate(e)},reallyUpdate:function(e){var t,n,i,r;return t=e.str,n=this.root.viewmodel.get(e),this.updating?void(this.values[t]=n):(this.updating=!0,a(n,this.values[t])&&this.ready||(i=Yl.call(this.regex.exec(t),1),r=[n,this.values[t],t].concat(i),this.values[t]=n,this.callback.apply(this.context,r)),void(this.updating=!1))},getProxy:function(e){var t=this;return this.proxies[e.str]||(this.proxies[e.str]={update:function(){return t.reallyUpdate(e)}}),this.proxies[e.str]}};var Xl,eu,tu,nu,iu,ru,su=Kl,ou=Ee,au={},lu=Se,uu=Ce,cu=function(e){return e.trim()},hu=function(e){return""!==e},du=Ae,pu=je,fu=Pe,mu=Te,vu=Array.prototype,gu=function(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];var o,a,l,u,c=[];if(t=E(A(t)),o=this.viewmodel.get(t),a=o.length,!s(o))throw new Error("Called ractive."+e+"('"+t.str+"'), but '"+t.str+"' does not refer to an array");return c=mu(o,e,i),u=vu[e].apply(o,i),l=ml.start(this,!0).then(function(){return u}),c?this.viewmodel.smartUpdate(t,o,c):this.viewmodel.mark(t),ml.end(),l}},yu=gu("pop"),bu=gu("push"),_u="/* Ractive.js component styles */\n",wu=[],ku=!1;Xo?(tu=document.createElement("style"),tu.type="text/css",nu=document.getElementsByTagName("head")[0],ru=!1,iu=tu.styleSheet,eu=function(){var e=_u+wu.map(function(e){return"\n/* {"+e.id+"} */\n"+e.styles}).join("\n");iu?iu.cssText=e:tu.innerHTML=e,ru||(nu.appendChild(tu),ru=!0)},Xl={add:function(e){wu.push(e),ku=!0},apply:function(){ku&&(eu(),ku=!1)}}):Xl={add:Fa,apply:Fa};var xu,Eu,Su=Xl,Cu=Oe,Au=new nl("render"),ju=new nl("complete"),Pu={extend:function(e,t,n){t.adapt=De(t.adapt,D(n.adapt))},init:function(){}},Tu=Pu,Fu=Me,Ou=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Lu=/\/\*.*?\*\//g,Du=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Mu=/^@media/,Iu=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Nu=1,$u={name:"css",extend:function(e,t,n){if(n.css){var i=Nu++,r=n.noCssTransform?n.css:Fu(n.css,i);t.cssId=i,Su.add({id:i,styles:r})}},init:function(){}},Ru=$u,Vu={name:"data",extend:function(e,t,n){var i=void 0,r=void 0;if(n.data&&u(n.data))for(i in n.data)r=n.data[i],r&&"object"==typeof r&&(u(r)||s(r))&&m("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");t.data=Re(t.data,n.data)},init:function(e,t,n){var i=Re(e.prototype.data,n.data);return"function"==typeof i&&(i=i.call(t)),i||{}},reset:function(e){var t=this.init(e.constructor,e,e.viewmodel);return e.viewmodel.reset(t),!0}},zu=Vu,qu=/^\s+/;Eu=function(e){this.name="ParseError",this.message=e;try{throw new Error(e)}catch(t){this.stack=t.stack}},Eu.prototype=Error.prototype,xu=function(e,t){var n,i,r=0;for(this.str=e,this.options=t||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(e){var t=r+e.length+1;return r=t,t},0),this.init&&this.init(e,t),n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,t):n},xu.prototype={read:function(e){var t,n,i,r;for(e||(e=this.converters),t=this.pos,i=e.length,n=0;i>n;n+=1)if(this.pos=t,r=e[n](this))return r;return null},getLinePos:function(e){for(var t,n=0,i=0;e>=this.lineEnds[n];)i=this.lineEnds[n],n+=1;return t=e-i,[n+1,t+1,e]},error:function(e){var t=this.getLinePos(this.pos),n=t[0],i=t[1],r=this.lines[t[0]-1],s=0,o=r.replace(/\t/g,function(e,n){return n<t[1]&&(s+=1),"  "})+"\n"+new Array(t[1]+s).join(" ")+"^----",a=new Eu(""+e+" at line "+n+" character "+i+":\n"+o);throw a.line=t[0],a.character=t[1],a.shortMessage=e,a},matchString:function(e){return this.str.substr(this.pos,e.length)===e?(this.pos+=e.length,e):void 0},matchPattern:function(e){var t;return(t=e.exec(this.remaining()))?(this.pos+=t[0].length,t[1]||t[0]):void 0},allowWhitespace:function(){this.matchPattern(qu)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},xu.extend=function(e){var t,n,i=this;t=function(e,t){xu.call(this,e,t)},t.prototype=_a(i.prototype);for(n in e)ja.call(e,n)&&(t.prototype[n]=e[n]);return t.extend=xu.extend,t};var Bu,Uu,Hu,Wu=xu,Gu=1,Qu=2,Ku=3,Zu=4,Ju=5,Yu=6,Xu=7,ec=8,tc=9,nc=10,ic=13,rc=14,sc=15,oc=16,ac=17,lc=18,uc=20,cc=21,hc=22,dc=23,pc=24,fc=25,mc=26,vc=27,gc=30,yc=31,bc=32,_c=33,wc=34,kc=35,xc=36,Ec=40,Sc=50,Cc=51,Ac=52,jc=53,Pc=54,Tc=60,Fc=61,Oc=qe,Lc=/^[^\s=]+/,Dc=/^\s+/,Mc=Be,Ic=/^(\/(?:[^\n\r\u2028\u2029\/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Nc=Ue,$c={t:nc,exclude:!0},Rc="Expected a JavaScript expression",Vc="Expected closing paren",zc=We,qc=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Bc=Ge;Bu=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Uu=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Hu=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Uc,Hc,Wc=function(e){return function(t){var n,i,r,s;for(n=t.pos,i='"',r=!1;!r;)s=t.matchPattern(Bu)||t.matchPattern(Uu)||t.matchString(e),s?i+='"'===s?'\\"':"\\'"===s?"'":s:(s=t.matchPattern(Hu),s?i+="\\u"+("000"+s.charCodeAt(1).toString(16)).slice(-4):r=!0);return i+='"',JSON.parse(i)}},Gc=Wc('"'),Qc=Wc("'"),Kc=function(e){var t,n;return t=e.pos,e.matchString('"')?(n=Qc(e),e.matchString('"')?{t:cc,v:n}:(e.pos=t,null)):e.matchString("'")?(n=Gc(e),e.matchString("'")?{t:cc,v:n}:(e.pos=t,null)):null},Zc=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Jc=Qe,Yc=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Xc=Ke,eh=Ze,th=function(e){var t,n;return t=e.pos,e.allowWhitespace(),e.matchString("{")?(n=eh(e),e.allowWhitespace(),e.matchString("}")?{t:dc,m:n}:(e.pos=t,null)):(e.pos=t,null)},nh=Je,ih=function(e){var t,n;return t=e.pos,e.allowWhitespace(),e.matchString("[")?(n=nh(e),e.matchString("]")?{t:hc,m:n}:(e.pos=t,null)):(e.pos=t,null)},rh=Ye,sh=Xe,oh=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;Uc=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,Hc=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var ah,lh,uh=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,ch=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,hh=et,dh=function(e){return rh(e)||sh(e)||hh(e)},ph=tt,fh=function(e){var t,n,i,r;if(n=dh(e),!n)return null;for(;n;)if(t=e.pos,i=ph(e))n={t:bc,x:n,r:i};else{if(!e.matchString("("))break;e.allowWhitespace(),r=nh(e),e.allowWhitespace(),e.matchString(")")||e.error(Vc),n={t:Ec,x:n},r&&(n.o=r)}return n};lh=function(e,t){return function(n){var i;return(i=t(n))?i:n.matchString(e)?(n.allowWhitespace(),i=jh(n),i||n.error(Rc),{s:e,o:i,t:_c}):null}},function(){var e,t,n,i,r;for(i="! ~ + - typeof".split(" "),r=fh,e=0,t=i.length;t>e;e+=1)n=lh(i[e],r),r=n;ah=r}();var mh,vh,gh=ah;vh=function(e,t){return function(n){var i,r,s;if(r=t(n),!r)return null;for(;;){if(i=n.pos,n.allowWhitespace(),!n.matchString(e))return n.pos=i,r;if("in"===e&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=i,r;if(n.allowWhitespace(),s=t(n),!s)return n.pos=i,r;r={t:xc,s:e,o:[r,s]}}}},function(){var e,t,n,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=gh,e=0,t=i.length;t>e;e+=1)n=vh(i[e],r),r=n;mh=r}();var yh,bh,_h,wh,kh,xh,Eh,Sh,Ch=mh,Ah=nt,jh=it,Ph=rt,Th=ot,Fh=/^[0-9][1-9]*$/,Oh=lt,Lh=ut,Dh=ct,Mh=ht,Ih=dt,Nh=pt,$h=ft,Rh=/^yield\s*/,Vh=mt,zh=vt,qh=/^\s*else\s*/,Bh=gt,Uh=/^\s*elseif\s+/,Hh={each:Ac,"if":Sc,"if-with":Pc,"with":jc,unless:Cc},Wh=yt,Gh=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Qh=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Kh=new RegExp("^("+Object.keys(Hh).join("|")+")\\b"),Zh=xt,Jh="<!--",Yh="-->";yh=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,bh=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,_h={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},wh=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],kh=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(_h).join("|")+"));?","g"),xh=/</g,Eh=/>/g,Sh=/&/g;var Xh,ed,td,nd,id,rd,sd,od=/^\s*\r?\n/,ad=/\r?\n\s*$/,ld=function(e){var t,n,i,r,s;for(t=1;t<e.length;t+=1)n=e[t],i=e[t-1],r=e[t-2],At(n)&&jt(i)&&At(r)&&ad.test(r)&&od.test(n)&&(e[t-2]=r.replace(ad,"\n"),e[t]=n.replace(od,"")),Pt(n)&&At(i)&&ad.test(i)&&At(n.f[0])&&od.test(n.f[0])&&(e[t-1]=i.replace(ad,"\n"),n.f[0]=n.f[0].replace(od,"")),At(n)&&Pt(i)&&(s=M(i.f),At(s)&&ad.test(s)&&od.test(n)&&(i.f[i.f.length-1]=s.replace(ad,"\n"),e[t]=n.replace(od,"")));return e},ud=function(e,t,n){var i;t&&(i=e[0],"string"==typeof i&&(i=i.replace(t,""),i?e[0]=i:e.shift())),n&&(i=M(e),"string"==typeof i&&(i=i.replace(n,""),i?e[e.length-1]=i:e.pop()))},cd=Tt,hd=/[ \t\f\r\n]+/g,dd=/^(?:pre|script|style|textarea)$/i,pd=/^[ \t\f\r\n]+/,fd=/[ \t\f\r\n]+$/,md=/^(?:\r\n|\r|\n)/,vd=/(?:\r\n|\r|\n)$/,gd=Ft,yd=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,bd=function(e,t){var n,i,r;for(n=t.length;n--;){if(i=e.indexOf(t[n]),!i)return 0;-1!==i&&(!r||r>i)&&(r=i)}return r||-1},_d=Ot,wd=/^[^\s"'>\/=]+/,kd=/^[^\s"'=<>`]+/;ed={"true":!0,"false":!1,undefined:void 0,"null":null},td=new RegExp("^(?:"+Object.keys(ed).join("|")+")"),nd=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,id=/\$\{([^\}]+)\}/g,rd=/^\$\{([^\}]+)\}/,sd=/^\s*$/,Xh=Wu.extend({init:function(e,t){this.values=t.values,this.allowWhitespace()},postProcess:function(e){return 1===e.length&&sd.test(this.leftover)?{value:e[0].v}:null},converters:[function(e){var t;return e.values?(t=e.matchPattern(rd),t&&e.values.hasOwnProperty(t)?{v:e.values[t]}:void 0):null},function(e){var t;return(t=e.matchPattern(td))?{v:ed[t]}:void 0},function(e){var t;return(t=e.matchPattern(nd))?{v:+t}:void 0},function(e){var t,n=Kc(e);return n&&(t=e.values)?{v:n.v.replace(id,function(e,n){return n in t?t[n]:n})}:n},function(e){var t,n;if(!e.matchString("{"))return null;if(t={},e.allowWhitespace(),e.matchString("}"))return{v:t};for(;n=$t(e);){if(t[n.key]=n.value,e.allowWhitespace(),e.matchString("}"))return{v:t};if(!e.matchString(","))return null}return null},function(e){var t,n;if(!e.matchString("["))return null;if(t=[],e.allowWhitespace(),e.matchString("]"))return{v:t};for(;n=e.read();){if(t.push(n.v),e.allowWhitespace(),e.matchString("]"))return{v:t};if(!e.matchString(","))return null;e.allowWhitespace()}return null}]});var xd,Ed=function(e,t){var n=new Xh(e,{values:t});return n.result},Sd=Rt,Cd=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,Ad=/\)\s*$/;xd=Wu.extend({converters:[jh]});var jd,Pd=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Td=/^[\s\n\/>]/,Fd=/^on/,Od=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Ld=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,Dd={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},Md={exclude:!0};jd={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var Id,Nd=Vt,$d=qt,Rd=Bt,Vd=/[-\/\\^$*+?.()|[\]{}]/g,zd=Ut,qd=/^<!--\s*/,Bd=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,Ud=/\s*-->/,Hd=Ht,Wd=/^#\s*partial\s+/,Gd=Wt,Qd=Gt,Kd=[Dh,Lh,Wh,$h,Nh,Mh],Zd=[Oh],Jd=[Lh,Wh,Nh],Yd=void 0,Xd=[Nc,Zh,Nd,$d],ep=[zd,Hd];Yd=Wu.extend({init:function(e,t){var n=t.tripleDelimiters||["{{{","}}}"],i=t.staticDelimiters||["[[","]]"],r=t.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=t.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:Kd},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:Zd},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:Jd},{isStatic:!0,isTriple:!0,open:r[0],close:r[1],readers:Zd}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!t.interpolate||t.interpolate.script!==!1,style:!t.interpolate||t.interpolate.style!==!1},t.sanitize===!0&&(t.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=t.stripComments!==!1,this.preserveWhitespace=t.preserveWhitespace,this.sanitizeElements=t.sanitize&&t.sanitize.elements,this.sanitizeEventAttributes=t.sanitize&&t.sanitize.eventAttributes,this.includeLinePositions=t.includeLinePositions},postProcess:function(e){return e.length?(this.sectionDepth>0&&this.error("A section was left open"),cd(e[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),e[0]):{t:[],v:oa}},converters:[Gd],sortMustacheTags:function(){this.tags.sort(function(e,t){return t.open.length-e.open.length})}});var tp,np,ip,rp=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],sp={fromId:Zt,isHashedId:Jt,isParsed:Yt,getParseOptions:Xt,createHelper:Qt,parse:Kt},op=sp,ap={name:"template",extend:function(e,t,n){var i;"template"in n&&(i=n.template,t.template="function"==typeof i?i:rn(i,t))},init:function(e,t,n){var i,r;i="template"in n?n.template:e.prototype.template,"function"==typeof i&&(r=i,i=tn(t,r),t._config.template={fn:r,result:i}),i=rn(i,t),t.template=i.t,i.p&&sn(t.partials,i.p)},reset:function(e){var t,n=en(e);return n?(t=rn(n,e),e.template=t.t,sn(e.partials,t.p,!0),!0):void 0}},lp=ap;tp=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],np=function(e,t){this.name=e,this.useDefaults=t},np.prototype={constructor:np,extend:function(e,t,n){this.configure(this.useDefaults?e.defaults:e,this.useDefaults?t:t.constructor,n)},init:function(){},configure:function(e,t,n){var i,r=this.name,s=n[r];i=_a(e[r]);for(var o in s)i[o]=s[o];t[r]=i},reset:function(e){var t=e[this.name],n=!1;return Object.keys(t).forEach(function(e){var i=t[e];i._fn&&(i._fn.isOwner?t[e]=i._fn:delete t[e],n=!0)}),n}},ip=tp.map(function(e){return new np(e,"computed"===e)});var up,cp,hp,dp,pp,fp,mp=ip,vp=on,gp=cn;dp={adapt:Tu,css:Ru,data:zu,template:lp},hp=Object.keys(la),fp=pn(hp.filter(function(e){return!dp[e]})),pp=pn(hp.concat(mp.map(function(e){return e.name}))),cp=[].concat(hp.filter(function(e){return!mp[e]&&!dp[e]}),mp,dp.data,dp.template,dp.css),up={extend:function(e,t,n){return hn("extend",e,t,n)},init:function(e,t,n){return hn("init",e,t,n)},reset:function(e){return cp.filter(function(t){return t.reset&&t.reset(e)}).map(function(e){return e.name})},order:cp};var yp=up,bp=fn,_p=mn,wp=vn,kp=gn,xp=yn,Ep=bn,Sp=_n,Cp=wn,Ap=kn,jp=xn,Pp=En,Tp=Sn,Fp=function(){return t(this.node)},Op=function(e){this.type=Gu,this.text=e.template};Op.prototype={detach:Fp,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(e){return e?Ct(this.text):this.text},unrender:function(e){return e?this.detach():void 0}};var Lp=Op,Dp=Cn,Mp=An,Ip=function(e,t,n){var i;this.ref=t,this.resolved=!1,this.root=e.root,this.parentFragment=e.parentFragment,this.callback=n,i=ll(e.root,t,e.parentFragment),void 0!=i?this.resolve(i):ml.addUnresolved(this)};Ip.prototype={resolve:function(e){this.keypath&&!e&&ml.addUnresolved(this),this.resolved=!0,this.keypath=e,this.callback(e)},forceResolution:function(){this.resolve(E(this.ref))},rebind:function(e,t){var n;void 0!=this.keypath&&(n=this.keypath.replace(e,t),void 0!==n&&this.resolve(n))},unbind:function(){this.resolved||ml.removeUnresolved(this)}};var Np=Ip,$p=function(e,t,n){this.parentFragment=e.parentFragment,this.ref=t,this.callback=n,this.rebind()},Rp={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};$p.prototype={rebind:function(){var e,t=this.ref,n=this.parentFragment,i=Rp[t];if(!i)throw new Error('Unknown special reference "'+t+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(E("@"+i.prefix+jn(this.cached,i)));if(-1!==i.prop.indexOf("index")||-1!==i.prop.indexOf("key"))for(;n;){if(n.owner.currentSubtype===Ac&&void 0!==(e=jn(n,i)))return this.cached=n,n.registerIndexRef(this),this.callback(E("@"+i.prefix+e));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else for(;n;){if(void 0!==(e=jn(n,i)))return this.callback(E("@"+i.prefix+e.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Vp=$p,zp=function(e,t,n){this.parentFragment=e.parentFragment,this.ref=t,this.callback=n,t.ref.fragment.registerIndexRef(this),this.rebind()};zp.prototype={rebind:function(){var e,t=this.ref.ref;e="k"===t.ref.t?"k"+t.fragment.key:"i"+t.fragment.index,void 0!==e&&this.callback(E("@"+e))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var qp=zp,Bp=Pn;Pn.resolve=function(e){var t,n,i={};for(t in e.refs)n=e.refs[t],i[n.ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return i};var Up,Hp=Tn,Wp=Fn,Gp={},Qp=Function.prototype.bind;Up=function(e,t,n,i){var r,s=this;r=e.root,this.root=r,this.parentFragment=t,this.callback=i,this.owner=e,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map(function(e,t){return Hp(s,e,function(e){s.resolve(t,e)})}),this.ready=!0,this.bubble()},Up.prototype={bubble:function(){this.ready&&(this.uniqueString=Ln(this.str,this.keypaths),this.keypath=Dn(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var e;e=this.refResolvers.pop();)e.unbind()},resolve:function(e,t){this.keypaths[e]=t,this.bubble()},createEvaluator:function(){var e,t,n,i,r,s=this;i=this.keypath,e=this.root.viewmodel.computations[i.str],e?this.root.viewmodel.mark(i):(r=Wp(this.str,this.refResolvers.length),t=this.keypaths.map(function(e){var t;return"undefined"===e?function(){return void 0}:e.isSpecial?(t=e.value,function(){return t}):function(){var t=s.root.viewmodel.get(e,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof t&&(t=In(t,s.root)),t}}),n={deps:this.keypaths.filter(Mn),getter:function(){var e=t.map(On);return r.apply(null,e)}},e=this.root.viewmodel.compute(i,n))},rebind:function(e,t){this.refResolvers.forEach(function(n){return n.rebind(e,t)})}};var Kp=Up,Zp=function(e,t,n){var i=this;this.resolver=t,this.root=t.root,this.parentFragment=n,this.viewmodel=t.root.viewmodel,"string"==typeof e?this.value=e:e.t===gc?this.refResolver=Hp(this,e.n,function(e){i.resolve(e)}):new Kp(t,n,e,function(e){i.resolve(e)})};Zp.prototype={resolve:function(e){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=e,this.value=this.viewmodel.get(e),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(e,t){this.refResolver&&this.refResolver.rebind(e,t)},setValue:function(e){this.value=e,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Jp=Zp,Yp=function(e,t,n){var i,r,s,o,a=this;this.parentFragment=o=e.parentFragment,this.root=i=e.root,this.mustache=e,this.ref=r=t.r,this.callback=n,this.unresolved=[],(s=ll(i,r,o))?this.base=s:this.baseResolver=new Np(this,r,function(e){a.base=e,a.baseResolver=null,a.bubble()}),this.members=t.m.map(function(e){return new Jp(e,a,o)}),this.ready=!0,this.bubble()};Yp.prototype={getKeypath:function(){var e=this.members.map(Nn);return!e.every($n)||this.baseResolver?null:this.base.join(e.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(G)},rebind:function(e,t){var n;if(this.base){var i=this.base.replace(e,t);i&&i!==this.base&&(this.base=i,n=!0)}this.members.forEach(function(i){i.rebind(e,t)&&(n=!0)}),n&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=E(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Rn),this.bubble()}};var Xp=Yp,ef=Vn,tf=zn,nf=qn,rf={getValue:Mp,init:ef,resolve:tf,rebind:nf},sf=function(e){this.type=Qu,rf.init(this,e)};sf.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:rf.resolve,rebind:rf.rebind,detach:Fp,unbind:Dp,render:function(){return this.node||(this.node=document.createTextNode(n(this.value))),this.node},unrender:function(e){e&&t(this.node)},getValue:rf.getValue,setValue:function(e){var t;this.keypath&&(t=this.root.viewmodel.wrapped[this.keypath.str])&&(e=t.get()),a(e,this.value)||(this.value=e,this.parentFragment.bubble(),this.node&&ml.addView(this))},firstNode:function(){return this.node},toString:function(e){var t=""+n(this.value);return e?Ct(t):t}};var of=sf,af=Bn,lf=Un,uf=Hn,cf=Wn,hf=Gn,df=Qn,pf=Kn,ff=Zn,mf=Jn,vf=function(e,t){rf.rebind.call(this,e,t)},gf=Xn,yf=ei,bf=hi,_f=di,wf=pi,kf=vi,xf=function(e){this.type=Zu,this.subtype=this.currentSubtype=e.template.n,this.inverted=this.subtype===Cc,this.pElement=e.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],e.template.i&&(this.indexRefs=e.template.i.split(",").map(function(e,t){return{n:e,t:0===t?"k":"i"}})),this.renderedFragments=[],this.length=0,rf.init(this,e)};xf.prototype={bubble:af,detach:lf,find:uf,findAll:cf,findAllComponents:hf,findComponent:df,findNextNode:pf,firstNode:ff,getIndexRef:function(e){if(this.indexRefs)for(var t=this.indexRefs.length;t--;){var n=this.indexRefs[t];if(n.n===e)return n}},getValue:rf.getValue,shuffle:mf,rebind:vf,render:gf,resolve:rf.resolve,setValue:yf,toString:bf,unbind:_f,unrender:wf,update:kf};var Ef,Sf,Cf=xf,Af=gi,jf=yi,Pf=bi,Tf=_i,Ff={};try{ha("table").innerHTML="foo"}catch(Ea){Ef=!0,Sf={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Of=function(e,t,n){var i,r,s,o,a,l=[];if(null!=e&&""!==e){for(Ef&&(r=Sf[t.tagName])?(i=wi("DIV"),i.innerHTML=r[0]+e+r[1],i=i.querySelector(".x"),"SELECT"===i.tagName&&(s=i.options[i.selectedIndex])):t.namespaceURI===ia.svg?(i=wi("DIV"),i.innerHTML='<svg class="x">'+e+"</svg>",i=i.querySelector(".x")):(i=wi(t.tagName),i.innerHTML=e,"SELECT"===i.tagName&&(s=i.options[i.selectedIndex]));o=i.firstChild;)l.push(o),n.appendChild(o);if("SELECT"===t.tagName)for(a=l.length;a--;)l[a]!==s&&(l[a].selected=!1)}return l},Lf=ki,Df=Ei,Mf=Si,If=Ci,Nf=Ai,$f=ji,Rf=function(e){this.type=Ku,rf.init(this,e)};Rf.prototype={detach:Af,find:jf,findAll:Pf,firstNode:Tf,getValue:rf.getValue,rebind:rf.rebind,render:Df,resolve:rf.resolve,setValue:Mf,toString:If,unbind:Dp,unrender:Nf,update:$f};var Vf,zf,qf,Bf,Uf=Rf,Hf=function(){this.parentFragment.bubble()},Wf=Pi,Gf=function(e){return this.node?da(this.node,e)?this.node:this.fragment&&this.fragment.find?this.fragment.find(e):void 0:null},Qf=function(e,t){t._test(this,!0)&&t.live&&(this.liveQueries||(this.liveQueries=[])).push(t),this.fragment&&this.fragment.findAll(e,t)},Kf=function(e,t){this.fragment&&this.fragment.findAllComponents(e,t)},Zf=function(e){return this.fragment?this.fragment.findComponent(e):void 0},Jf=Ti,Yf=Fi,Xf=Oi,em=/^true|on|yes|1$/i,tm=/^[0-9]+$/,nm=function(e,t){var n,i,r;return r=t.a||{},i={},n=r.twoway,void 0!==n&&(i.twoway=0===n||em.test(n)),n=r.lazy,void 0!==n&&(i.lazy=0!==n&&tm.test(n)?parseInt(n):0===n||em.test(n)),i},im=Li;Vf="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),zf="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),qf=function(e){for(var t={},n=e.length;n--;)t[e[n].toLowerCase()]=e[n];return t},Bf=qf(Vf.concat(zf));var rm=function(e){var t=e.toLowerCase();

return Bf[t]||t},sm=function(e,t){var n,i;if(n=t.indexOf(":"),-1===n||(i=t.substr(0,n),"xmlns"===i))e.name=e.element.namespace!==ia.html?rm(t):t;else if(t=t.substring(n+1),e.name=rm(t),e.namespace=ia[i.toLowerCase()],e.namespacePrefix=i,!e.namespace)throw'Unknown namespace ("'+i+'")'},om=Di,am=Mi,lm=Ii,um=Ni,cm={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},hm=$i,dm=Vi,pm=zi,fm=qi,mm=Bi,vm=Ui,gm=Hi,ym=Wi,bm=Gi,_m=Qi,wm=Ki,km=Zi,xm=Ji,Em=Yi,Sm=Xi,Cm=function(e){this.init(e)};Cm.prototype={bubble:im,init:am,rebind:lm,render:um,toString:hm,unbind:dm,update:Sm};var Am,jm=Cm,Pm=function(e,t){var n,i,r=[];for(n in t)"twoway"!==n&&"lazy"!==n&&t.hasOwnProperty(n)&&(i=new jm({element:e,name:n,value:t[n],root:e.root}),r[n]=i,"value"!==n&&r.push(i));return(i=r.value)&&r.push(i),r};"undefined"!=typeof document&&(Am=ha("div"));var Tm=function(e,t){this.element=e,this.root=e.root,this.parentFragment=e.parentFragment,this.attributes=[],this.fragment=new yb({root:e.root,owner:this,template:[t]})};Tm.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(e,t){this.fragment.rebind(e,t)},render:function(e){this.node=e,this.isSvg=e.namespaceURI===ia.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var e,t,n=this;e=this.fragment.toString(),t=er(e,this.isSvg),this.attributes.filter(function(e){return tr(t,e)}).forEach(function(e){n.node.removeAttribute(e.name)}),t.forEach(function(e){n.node.setAttribute(e.name,e.value)}),this.attributes=t},toString:function(){return this.fragment.toString()}};var Fm=Tm,Om=function(e,t){return t?t.map(function(t){return new Fm(e,t)}):[]},Lm=function(e){var t,n,i,r;if(this.element=e,this.root=e.root,this.attribute=e.attributes[this.name||"value"],t=this.attribute.interpolator,t.twowayBinding=this,n=t.keypath){if("}"===n.str.slice(-1))return v("Two-way binding does not work with expressions (`%s` on <%s>)",t.resolver.uniqueString,e.name,{ractive:this.root}),!1;if(n.isSpecial)return v("Two-way binding does not work with %s",t.resolver.ref,{ractive:this.root}),!1}else{var s=t.template.r?"'"+t.template.r+"' reference":"expression";m("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",s,{ractive:this.root}),t.resolver.forceResolution(),n=t.keypath}this.attribute.isTwoway=!0,this.keypath=n,i=this.root.viewmodel.get(n),void 0===i&&this.getInitialValue&&(i=this.getInitialValue(),void 0!==i&&this.root.viewmodel.set(n,i)),(r=nr(e))&&(this.resetValue=i,r.formBindings.push(this))};Lm.prototype={handleChange:function(){var e=this;ml.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),ml.scheduleTask(function(){return e.attribute.locked=!1}),ml.end()},rebound:function(){var e,t,n;t=this.keypath,n=this.attribute.interpolator.keypath,t!==n&&(I(this.root._twowayBindings[t.str],this),this.keypath=n,e=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),e.push(this))},unbind:function(){}},Lm.extend=function(e){var t,n=this;return t=function(e){Lm.call(this,e),this.init&&this.init()},t.prototype=_a(n.prototype),i(t.prototype,e),t.extend=Lm.extend,t};var Dm,Mm=Lm,Im=ir;Dm=Mm.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var e,t=this.element.node,n=!1;this.rendered=!0,e=this.root.lazy,this.element.lazy===!0?e=!0:this.element.lazy===!1?e=!1:l(this.element.lazy)?(e=!1,n=+this.element.lazy):l(e||"")&&(n=+e,e=!1,this.element.lazy=n),this.handler=n?sr:Im,t.addEventListener("change",Im,!1),e||(t.addEventListener("input",this.handler,!1),t.attachEvent&&t.addEventListener("keyup",this.handler,!1)),t.addEventListener("blur",rr,!1)},unrender:function(){var e=this.element.node;this.rendered=!1,e.removeEventListener("change",Im,!1),e.removeEventListener("input",this.handler,!1),e.removeEventListener("keyup",this.handler,!1),e.removeEventListener("blur",rr,!1)}});var Nm=Dm,$m=Nm.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),Rm=$m,Vm=or,zm={},qm=Mm.extend({name:"checked",init:function(){this.siblings=Vm(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var e=this.element.node;e.addEventListener("change",Im,!1),e.attachEvent&&e.addEventListener("click",Im,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",Im,!1),e.removeEventListener("click",Im,!1)},handleChange:function(){ml.start(this.root),this.siblings.forEach(function(e){e.root.viewmodel.set(e.keypath,e.getValue())}),ml.end()},getValue:function(){return this.element.node.checked},unbind:function(){I(this.siblings,this)}}),Bm=qm,Um=Mm.extend({name:"name",init:function(){this.siblings=Vm(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var e=this.element.node;e.name="{{"+this.keypath.str+"}}",e.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),e.addEventListener("change",Im,!1),e.attachEvent&&e.addEventListener("click",Im,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",Im,!1),e.removeEventListener("click",Im,!1)},getValue:function(){var e=this.element.node;return e._ractive?e._ractive.value:e.value},handleChange:function(){this.element.node.checked&&Mm.prototype.handleChange.call(this)},rebound:function(e,t){var n;Mm.prototype.rebound.call(this,e,t),(n=this.element.node)&&(n.name="{{"+this.keypath.str+"}}")},unbind:function(){I(this.siblings,this)}}),Hm=Um,Wm=Mm.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var e,t;this.checkboxName=!0,this.siblings=Vm(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(e=this.root.viewmodel.get(this.keypath),t=this.element.getAttribute("value"),e.push(t))},unbind:function(){I(this.siblings,this)},render:function(){var e,t,n=this.element.node;e=this.root.viewmodel.get(this.keypath),t=this.element.getAttribute("value"),this.isChecked=s(e)?O(e,t):e==t,n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",Im,!1),n.attachEvent&&n.addEventListener("click",Im,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",Im,!1),e.removeEventListener("click",Im,!1)},changed:function(){var e=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===e},handleChange:function(){this.isChecked=this.element.node.checked,Mm.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(ar).map(lr)}}),Gm=Wm,Qm=Mm.extend({name:"checked",render:function(){var e=this.element.node;e.addEventListener("change",Im,!1),e.attachEvent&&e.addEventListener("click",Im,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",Im,!1),e.removeEventListener("click",Im,!1)},getValue:function(){return this.element.node.checked}}),Km=Qm,Zm=Mm.extend({getInitialValue:function(){var e,t,n,i,r=this.element.options;if(void 0===this.element.getAttribute("value")&&(t=e=r.length,e)){for(;t--;)if(r[t].getAttribute("selected")){n=r[t].getAttribute("value"),i=!0;break}if(!i)for(;++t<e;)if(!r[t].getAttribute("disabled")){n=r[t].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",Im,!1)},unrender:function(){this.element.node.removeEventListener("change",Im,!1)},setValue:function(e){this.root.viewmodel.set(this.keypath,e)},getValue:function(){var e,t,n,i,r;for(e=this.element.node.options,n=e.length,t=0;n>t;t+=1)if(i=e[t],e[t].selected)return r=i._ractive?i._ractive.value:i.value},forceUpdate:function(){var e=this,t=this.getValue();void 0!==t&&(this.attribute.locked=!0,ml.scheduleTask(function(){return e.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,t))}}),Jm=Zm,Ym=Jm.extend({getInitialValue:function(){return this.element.options.filter(function(e){return e.getAttribute("selected")}).map(function(e){return e.getAttribute("value")})},render:function(){var e;this.element.node.addEventListener("change",Im,!1),e=this.root.viewmodel.get(this.keypath),void 0===e&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",Im,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var e,t,n,i,r,s;for(e=[],t=this.element.node.options,i=t.length,n=0;i>n;n+=1)r=t[n],r.selected&&(s=r._ractive?r._ractive.value:r.value,e.push(s));return e},handleChange:function(){var e,t,n;return e=this.attribute,t=e.value,n=this.getValue(),void 0!==t&&L(n,t)||Jm.prototype.handleChange.call(this),this},forceUpdate:function(){var e=this,t=this.getValue();void 0!==t&&(this.attribute.locked=!0,ml.scheduleTask(function(){return e.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,t))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Xm=Ym,ev=Mm.extend({render:function(){this.element.node.addEventListener("change",Im,!1)},unrender:function(){this.element.node.removeEventListener("change",Im,!1)},getValue:function(){return this.element.node.files}}),tv=ev,nv=Nm.extend({getInitialValue:function(){return void 0},getValue:function(){var e=parseFloat(this.element.node.value);return isNaN(e)?void 0:e}}),iv=ur,rv=hr,sv=dr,ov=pr,av=fr,lv=/^event(?:\.(.+))?/,uv=yr,cv=br,hv={},dv={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},pv=wr,fv=kr,mv=xr,vv=Er,gv=Sr,yv=function(e,t,n){this.init(e,t,n)};yv.prototype={bubble:rv,fire:sv,getAction:ov,init:av,listen:cv,rebind:pv,render:fv,resolve:mv,unbind:vv,unrender:gv};var bv=yv,_v=function(e,t){var n,i,r,s,o=[];for(i in t)if(t.hasOwnProperty(i))for(r=i.split("-"),n=r.length;n--;)s=new bv(e,r[n],t[i]),o.push(s);return o},wv=function(e,t){var n,i,r,s=this;this.element=e,this.root=n=e.root,i=t.n||t,("string"==typeof i||(r=new yb({template:i,root:n,owner:e}),i=r.toString(),r.unbind(),""!==i))&&(t.a?this.params=t.a:t.d&&(this.fragment=new yb({template:t.d,root:n,owner:e}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,s.params=this.getArgsList(),s.ready&&s.update()}),this.fn=g("decorators",n,i),this.fn||h(Ma(i,"decorator")))};wv.prototype={init:function(){var e,t,n;if(e=this.element.node,this.params?(n=[e].concat(this.params),t=this.fn.apply(this.root,n)):t=this.fn.call(this.root,e),!t||!t.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=t,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(e,t){this.fragment&&this.fragment.rebind(e,t)},teardown:function(e){this.torndown=!0,this.ready&&this.actual.teardown(),!e&&this.fragment&&this.fragment.unbind()}};var kv,xv,Ev,Sv=wv,Cv=Or,Av=Lr,jv=Rr,Pv=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})};Xo?(xv={},Ev=ha("div").style,kv=function(e){var t,n,i;if(e=Pv(e),!xv[e])if(void 0!==Ev[e])xv[e]=e;else for(i=e.charAt(0).toUpperCase()+e.substring(1),t=sa.length;t--;)if(n=sa[t],void 0!==Ev[n+i]){xv[e]=n+i;break}return xv[e]}):kv=null;var Tv,Fv,Ov=kv;Xo?(Fv=window.getComputedStyle||xa.getComputedStyle,Tv=function(e){var t,n,i,r,o;if(t=Fv(this.node),"string"==typeof e)return o=t[Ov(e)],"0px"===o&&(o=0),o;if(!s(e))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=e.length;i--;)r=e[i],o=t[Ov(r)],"0px"===o&&(o=0),n[r]=o;return n}):Tv=null;var Lv=Tv,Dv=function(e,t){var n;if("string"==typeof e)this.node.style[Ov(e)]=t;else for(n in e)e.hasOwnProperty(n)&&(this.node.style[Ov(n)]=e[n]);return this},Mv=function(e){var t;this.duration=e.duration,this.step=e.step,this.complete=e.complete,"string"==typeof e.easing?(t=e.root.easing[e.easing],t||(v(Ma(e.easing,"easing")),t=Vr)):t="function"==typeof e.easing?e.easing:Vr,this.easing=t,this.start=Xa(),this.end=this.start+this.duration,this.running=!0,yl.add(this)};Mv.prototype={tick:function(e){var t,n;return this.running?e>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(t=e-this.start,n=this.easing(t/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var Iv,Nv,$v,Rv,Vv,zv,qv,Bv,Uv=Mv,Hv=new RegExp("^-(?:"+sa.join("|")+")-"),Wv=function(e){return e.replace(Hv,"")},Gv=new RegExp("^(?:"+sa.join("|")+")([A-Z])"),Qv=function(e){var t;return e?(Gv.test(e)&&(e="-"+e),t=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})):""},Kv={},Zv={};Xo?(Nv=ha("div").style,function(){void 0!==Nv.transition?($v="transition",Rv="transitionend",Vv=!0):void 0!==Nv.webkitTransition?($v="webkitTransition",Rv="webkitTransitionEnd",Vv=!0):Vv=!1}(),$v&&(zv=$v+"Duration",qv=$v+"Property",Bv=$v+"TimingFunction"),Iv=function(e,t,n,i,r){setTimeout(function(){var s,o,a,l,u;l=function(){o&&a&&(e.root.fire(e.name+":end",e.node,e.isIntro),r())},s=(e.node.namespaceURI||"")+e.node.tagName,e.node.style[qv]=i.map(Ov).map(Qv).join(","),e.node.style[Bv]=Qv(n.easing||"linear"),e.node.style[zv]=n.duration/1e3+"s",u=function(t){var n;n=i.indexOf(Pv(Wv(t.propertyName))),-1!==n&&i.splice(n,1),i.length||(e.node.removeEventListener(Rv,u,!1),a=!0,l())},e.node.addEventListener(Rv,u,!1),setTimeout(function(){for(var r,c,h,d,p,f=i.length,v=[];f--;)d=i[f],r=s+d,Vv&&!Zv[r]&&(e.node.style[Ov(d)]=t[d],Kv[r]||(c=e.getStyle(d),Kv[r]=e.getStyle(d)!=t[d],Zv[r]=!Kv[r],Zv[r]&&(e.node.style[Ov(d)]=c))),(!Vv||Zv[r])&&(void 0===c&&(c=e.getStyle(d)),h=i.indexOf(d),-1===h?m("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:e.node}):i.splice(h,1),p=/[^\d]*$/.exec(t[d])[0],v.push({name:Ov(d),interpolator:Na(parseFloat(c),parseFloat(t[d])),suffix:p}));v.length?new Uv({root:e.root,duration:n.duration,easing:Pv(n.easing||""),step:function(t){var n,i;for(i=v.length;i--;)n=v[i],e.node.style[n.name]=n.interpolator(t)+n.suffix},complete:function(){o=!0,l()}}):o=!0,i.length||(e.node.removeEventListener(Rv,u,!1),a=!0,l())},0)},n.delay||0)}):Iv=null;var Jv,Yv,Xv,eg,tg,ng=Iv;if("undefined"!=typeof document){if(Jv="hidden",tg={},Jv in document)Xv="";else for(eg=sa.length;eg--;)Yv=sa[eg],Jv=Yv+"Hidden",Jv in document&&(Xv=Yv);void 0!==Xv?(document.addEventListener(Xv+"visibilitychange",zr),zr()):("onfocusout"in document?(document.addEventListener("focusout",qr),document.addEventListener("focusin",Br)):(window.addEventListener("pagehide",qr),window.addEventListener("blur",qr),window.addEventListener("pageshow",Br),window.addEventListener("focus",Br)),tg.hidden=!1)}var ig,rg,sg,og=tg;Xo?(rg=window.getComputedStyle||xa.getComputedStyle,ig=function(e,t,n){var i,r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(og.hidden)return this.setStyle(e,t),sg||(sg=ol.resolve());"string"==typeof e?(i={},i[e]=t):(i=e,n=t),n||(v('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var s=new ol(function(e){var t,s,o,a,l,u,c;if(!n.duration)return r.setStyle(i),void e();for(t=Object.keys(i),s=[],o=rg(r.node),l={},u=t.length;u--;)c=t[u],a=o[Ov(c)],"0px"===a&&(a=0),a!=i[c]&&(s.push(c),r.node.style[Ov(c)]=a);return s.length?void ng(r,i,n,s,e):void e()});return s}):ig=null;var ag=ig,lg=function(e,t){return"number"==typeof e?e={duration:e}:"string"==typeof e?e="slow"===e?{duration:600}:"fast"===e?{duration:200}:{duration:400}:e||(e={}),r({},e,t)},ug=Ur,cg=function(e,t,n){this.init(e,t,n)};cg.prototype={init:jv,start:ug,getStyle:Lv,setStyle:Dv,animateStyle:ag,processParams:lg};var hg,dg,pg=cg,fg=Wr;hg=function(){var e=this.node,t=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(e.type="text/css"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},dg=function(){this.node.type&&"text/javascript"!==this.node.type||m("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1)};var mg=function(){var e,t;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(e="<"+this.template.e,e+=this.attributes.map(Yr).join("")+this.conditionalAttributes.map(Yr).join(""),"option"===this.name&&Zr(this)&&(e+=" selected"),"input"===this.name&&Jr(this)&&(e+=" checked"),e+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?e+=Ct(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(e+=this.getAttribute("value")||""),this.fragment&&(t="script"!==this.name&&"style"!==this.name,e+=this.fragment.toString(t)),bh.test(this.template.e)||(e+="</"+this.template.e+">"),e)},vg=Xr,gg=es,yg=function(e){this.init(e)};yg.prototype={bubble:Hf,detach:Wf,find:Gf,findAll:Qf,findAllComponents:Kf,findComponent:Zf,findNextNode:Jf,firstNode:Yf,getAttribute:Xf,init:Cv,rebind:Av,render:fg,toString:mg,unbind:vg,unrender:gg};var bg=yg,_g=/^\s*$/,wg=/^\s*/,kg=function(e){var t,n,i,r;return t=e.split("\n"),n=t[0],void 0!==n&&_g.test(n)&&t.shift(),i=M(t),void 0!==i&&_g.test(i)&&t.pop(),r=t.reduce(ns,null),r&&(e=t.map(function(e){return e.replace(r,"")}).join("\n")),e},xg=is,Eg=function(e,t){var n;return t?n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n"):e},Sg='Could not find template for partial "%s"',Cg=function(e){var t,n;t=this.parentFragment=e.parentFragment,this.root=t.root,this.type=ec,this.index=e.index,this.name=e.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,rf.init(this,e),this.keypath||((n=xg(this.root,this.name,t))?(Dp.call(this),this.isNamed=!0,this.setTemplate(n)):v(Sg,this.name))};Cg.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(e,t){this.isNamed||nf.call(this,e,t),this.fragment&&this.fragment.rebind(e,t)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:rf.resolve,setValue:function(e){var t;(void 0===e||e!==this.value)&&(void 0!==e&&(t=xg(this.root,""+e,this.parentFragment)),!t&&this.name&&(t=xg(this.root,this.name,this.parentFragment))&&(Dp.call(this),this.isNamed=!0),t||v(Sg,this.name,{ractive:this.root}),this.value=e,this.setTemplate(t||[]),this.bubble(),this.rendered&&ml.addView(this))},setTemplate:function(e){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new yb({template:e,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(e){var t,n,i,r;return t=this.fragment.toString(e),n=this.parentFragment.items[this.index-1],n&&n.type===Gu?(i=n.text.split("\n").pop(),(r=/^\s+$/.exec(i))?Eg(t,r[0]):t):t},unbind:function(){this.isNamed||Dp.call(this),this.fragment&&this.fragment.unbind()},unrender:function(e){this.rendered&&(this.fragment&&this.fragment.unrender(e),this.rendered=!1)},update:function(){var e,t;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(e=this.parentFragment.getNode(),t=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,t))}};var Ag,jg,Pg,Tg=Cg,Fg=ls,Og=us,Lg=new nl("detach"),Dg=cs,Mg=hs,Ig=ds,Ng=ps,$g=fs,Rg=ms,Vg=function(e,t,n,i){var r=e.root,s=e.keypath;i?r.viewmodel.smartUpdate(s,t,i):r.viewmodel.mark(s)},zg=[],qg=["pop","push","reverse","shift","sort","splice","unshift"];qg.forEach(function(e){var t=function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];var r,s,o,a;for(r=mu(this,e,n),s=Array.prototype[e].apply(this,arguments),ml.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)o=this._ractive.wrappers[a],ml.addRactive(o.root),Vg(o,this,e,r);return ml.end(),this._ractive.setting=!1,s};wa(zg,e,{value:t})}),Ag={},Ag.__proto__?(jg=function(e){e.__proto__=zg},Pg=function(e){e.__proto__=Array.prototype}):(jg=function(e){var t,n;for(t=qg.length;t--;)n=qg[t],wa(e,n,{value:zg[n],configurable:!0})},Pg=function(e){var t;for(t=qg.length;t--;)delete e[qg[t]]}),jg.unpatch=Pg;var Bg,Ug,Hg,Wg=jg;Bg={filter:function(e){return s(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new Ug(e,t,n)}},Ug=function(e,t,n){this.root=e,this.value=t,this.keypath=E(n),t._ractive||(wa(t,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Wg(t)),t._ractive.instances[e._guid]||(t._ractive.instances[e._guid]=0,t._ractive.instances.push(e)),t._ractive.instances[e._guid]+=1,t._ractive.wrappers.push(this)},Ug.prototype={get:function(){return this.value},teardown:function(){var e,t,n,i,r;if(e=this.value,t=e._ractive,n=t.wrappers,i=t.instances,t.setting)return!1;if(r=n.indexOf(this),-1===r)throw new Error(Hg);if(n.splice(r,1),n.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(r=i.indexOf(this.root),-1===r)throw new Error(Hg);i.splice(r,1)}}else delete e._ractive,Wg.unpatch(this.value)}},Hg="Something went wrong in a rather interesting way";var Gg,Qg,Kg=Bg,Zg=/^\s*[0-9]+\s*$/,Jg=function(e){return Zg.test(e)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Gg={filter:function(e,t,n){var i,r;return t?(t=E(t),(i=n.viewmodel.wrapped[t.parent.str])&&!i.magic?!1:(r=n.viewmodel.get(t.parent),s(r)&&/^[0-9]+$/.test(t.lastKey)?!1:r&&("object"==typeof r||"function"==typeof r))):!1},wrap:function(e,t,n){return new Qg(e,t,n)}},Qg=function(e,t,n){var i,r,s;return n=E(n),this.magic=!0,this.ractive=e,this.keypath=n,this.value=t,this.prop=n.lastKey,i=n.parent,this.obj=i.isRoot?e.viewmodel.data:e.viewmodel.get(i),r=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),r&&r.set&&(s=r.set._ractiveWrappers)?void(-1===s.indexOf(this)&&s.push(this)):void vs(this,t,r)},Qg.prototype={get:function(){return this.value},reset:function(e){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=e,ml.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0)},set:function(e,t){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=Jg(e),this.updating=!1),this.obj[this.prop][e]=t)},teardown:function(){var e,t,n,i,r;return this.updating?!1:(e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e&&e.set,void(t&&(i=t._ractiveWrappers,r=i.indexOf(this),-1!==r&&i.splice(r,1),i.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}}}catch(Ea){Gg=!1}var Yg,Xg,ey=Gg;ey&&(Yg={filter:function(e,t,n){return ey.filter(e,t,n)&&Kg.filter(e)},wrap:function(e,t,n){return new Xg(e,t,n)}},Xg=function(e,t,n){this.value=t,this.magic=!0,this.magicWrapper=ey.wrap(e,t,n),this.arrayWrapper=Kg.wrap(e,t,n)},Xg.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}});var ty=Yg,ny=gs,iy={},ry=_s,sy=ws,oy=Es,ay=Ps,ly=Ts,uy=function(e,t){this.computation=e,this.viewmodel=e.viewmodel,this.ref=t,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};uy.prototype={resolve:function(e){this.computation.softDeps.push(e),this.computation.unresolvedDeps[e.str]=null,this.viewmodel.register(e,this.computation,"computed")}};var cy=uy,hy=function(e,t){this.key=e,this.getter=t.getter,this.setter=t.setter,this.hardDeps=t.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};hy.prototype={constructor:hy,init:function(e){var t,n=this;this.viewmodel=e,this.bypass=!0,t=e.get(this.key),e.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==t&&this.set(t),this.hardDeps&&this.hardDeps.forEach(function(t){return e.register(t,n,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var e,t,n=this,i=!1;if(this.getting){var r="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";return f(r),this.value}if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?i=!0:[this.hardDeps,this.softDeps].forEach(function(e){var t,r,s;if(!i)for(s=e.length;s--;)if(t=e[s],r=n.viewmodel.get(t),!a(r,n.depValues[t.str]))return n.depValues[t.str]=r,void(i=!0)}),i){this.viewmodel.capture();try{this.value=this.getter()}catch(s){m('Failed to compute "%s"',this.key.str),d(s.stack||s),this.value=void 0}e=this.viewmodel.release(),t=this.updateDependencies(e),t&&[this.hardDeps,this.softDeps].forEach(function(e){e.forEach(function(e){n.depValues[e.str]=n.viewmodel.get(e)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(e){if(this.setting)return void(this.value=e);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(e)},updateDependencies:function(e){var t,n,i,r,s;for(n=this.softDeps,t=n.length;t--;)i=n[t],-1===e.indexOf(i)&&(r=!0,this.viewmodel.unregister(i,this,"computed"));for(t=e.length;t--;)i=e[t],-1!==n.indexOf(i)||this.hardDeps&&-1!==this.hardDeps.indexOf(i)||(r=!0,Fs(this.viewmodel,i)&&!this.unresolvedDeps[i.str]?(s=new cy(this,i.str),e.splice(t,1),this.unresolvedDeps[i.str]=s,ml.addUnresolved(s)):this.viewmodel.register(i,this,"computed"));return r&&(this.softDeps=e.slice()),r}};var dy=hy,py=Os,fy={FAILED_LOOKUP:!0},my=Ls,vy={},gy=Ms,yy=Is,by=function(e,t){this.localKey=e,this.keypath=t.keypath,this.origin=t.origin,this.deps=[],this.unresolved=[],this.resolved=!1};by.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(e,t){return this.resolved?this.origin.get(this.map(e),t):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(e){this.local=e,this.setup()},map:function(e){return void 0===typeof this.keypath?this.localKey:e.replace(this.localKey,this.keypath)},register:function(e,t,n){this.deps.push({keypath:e,dep:t,group:n}),this.resolved&&this.origin.register(this.map(e),t,n)},resolve:function(e){void 0!==this.keypath&&this.unbind(!0),this.keypath=e,this.setup()},set:function(e,t){this.resolved||this.forceResolution(),this.origin.set(this.map(e),t)},setup:function(){var e=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(t){var n=e.map(t.keypath);if(e.origin.register(n,t.dep,t.group),t.dep.setValue)t.dep.setValue(e.origin.get(n));else{if(!t.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");t.dep.invalidate()}}),this.origin.mark(this.keypath)))},setValue:function(e){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,e)},unbind:function(e){var t=this;e||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach(function(e){t.origin.unregister(t.map(e.keypath),e.dep,e.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(e,t,n){var i,r;if(this.resolved){for(i=this.deps,r=i.length;r--;)if(i[r].dep===t){i.splice(r,1);break}this.origin.unregister(this.map(e),t,n)}}};var _y=Ns,wy=function(e,t){var n,i,r,s;return n={},i=0,r=e.map(function(e,r){var o,a,l;a=i,l=t.length;do{if(o=t.indexOf(e,a),-1===o)return s=!0,-1;a=o+1}while(n[o]&&l>a);return o===i&&(i+=1),o!==r&&(s=!0),n[o]=!0,o})},ky=$s,xy={},Ey=zs,Sy=Bs,Cy=Us,Ay=Hs,jy=Gs,Py={implicit:!0},Ty={noCascade:!0},Fy=Ks,Oy=Zs,Ly=function(e){var t,n,i=e.adapt,r=e.data,s=e.ractive,o=e.computed,a=e.mappings;this.ractive=s,this.adaptors=i,this.onchange=e.onchange,this.cache={},this.cacheMap=_a(null),this.deps={computed:_a(null),"default":_a(null)},this.depsMap={computed:_a(null),"default":_a(null)},this.patternObservers=[],this.specials=_a(null),this.wrapped=_a(null),this.computations=_a(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=r,this.mappings=_a(null);for(t in a)this.map(E(t),a[t]);if(r)for(t in r)(n=this.mappings[t])&&void 0===n.getValue()&&n.setValue(r[t]);for(t in o)a&&t in a&&h("Cannot map to a computed property ('%s')",t),this.compute(E(t),o[t]);this.ready=!0};Ly.prototype={adapt:ny,applyChanges:oy,capture:ay,clearCache:ly,compute:py,get:my,init:gy,map:yy,mark:_y,merge:ky,register:Ey,release:Sy,reset:Cy,set:Ay,smartUpdate:jy,teardown:Fy,unregister:Oy};var Dy=Ly;Ys.prototype={constructor:Ys,begin:function(e){this.inProcess[e._guid]=!0},end:function(e){var t=e.parent;t&&this.inProcess[t._guid]?Xs(this.queue,t).push(e):eo(this,e),delete this.inProcess[e._guid]}};var My=Ys,Iy=to,Ny=/\$\{([^\}]+)\}/g,$y=new nl("construct"),Ry=new nl("config"),Vy=new My("init"),zy=0,qy=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],By=so,Uy=co;co.prototype={bubble:function(){this.dirty||(this.dirty=!0,ml.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(e,t){this.fragment.rebind(e,t)},unbind:function(){this.fragment.unbind()}};var Hy=function(e,t,n,r,o){var a,l,u,c,h,d,p={},f={},v={},g=[];for(l=e.parentFragment,u=e.root,o=o||{},i(p,o),o.content=r||[],p[""]=o.content,t.defaults.el&&m("The <%s/> component has a default `el` property; it has been disregarded",e.name),c=l;c;){if(c.owner.type===oc){h=c.owner.container;break}c=c.parent}return n&&Object.keys(n).forEach(function(t){var i,r,o=n[t];if("string"==typeof o)i=Ed(o),f[t]=i?i.value:o;else if(0===o)f[t]=!0;else{if(!s(o))throw new Error("erm wut");po(o)?(v[t]={origin:e.root.viewmodel,keypath:void 0},r=ho(e,o[0],function(e){e.isSpecial?d?a.set(t,e.value):(f[t]=e.value,delete v[t]):d?a.viewmodel.mappings[t].resolve(e):v[t].keypath=e})):r=new Uy(e,o,function(e){d?a.set(t,e):f[t]=e}),g.push(r)}}),a=_a(t.prototype),By(a,{el:null,append:!0,data:f,partials:o,magic:u.magic||t.defaults.magic,modifyArrays:u.modifyArrays,adapt:u.adapt},{parent:u,component:e,container:h,mappings:v,
inlinePartials:p,cssIds:l.cssIds}),d=!0,e.resolvers=g,a},Wy=fo,Gy=function(e){var t,n;for(t=e.root;t;)(n=t._liveComponentQueries["_"+e.name])&&n.push(e.instance),t=t.parent},Qy=vo,Ky=go,Zy=yo,Jy=bo,Yy=_o,Xy=new nl("teardown"),eb=ko,tb=function(e,t){this.init(e,t)};tb.prototype={detach:Og,find:Dg,findAll:Mg,findAllComponents:Ig,findComponent:Ng,findNextNode:$g,firstNode:Rg,init:Qy,rebind:Ky,render:Zy,toString:Jy,unbind:Yy,unrender:eb};var nb=tb,ib=function(e){this.type=tc,this.value=e.template.c};ib.prototype={detach:Fp,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(e){e&&this.node.parentNode.removeChild(this.node)}};var rb=ib,sb=function(e){var t,n;this.type=oc,this.container=t=e.parentFragment.root,this.component=n=t.component,this.container=t,this.containerFragment=e.parentFragment,this.parentFragment=n.parentFragment;var i=this.name=e.template.n||"",r=t._inlinePartials[i];r||(m('Could not find template for partial "'+i+'"',{ractive:e.root}),r=[]),this.fragment=new yb({owner:this,root:t.parent,template:r,pElement:this.containerFragment.pElement}),s(n.yielders[i])?n.yielders[i].push(this):n.yielders[i]=[this],ml.scheduleTask(function(){if(n.yielders[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time")})};sb.prototype={detach:function(){return this.fragment.detach()},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(e){return this.fragment.getValue(e)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(e){this.fragment.unrender(e),I(this.component.yielders[this.name],this)},rebind:function(e,t){this.fragment.rebind(e,t)},toString:function(){return this.fragment.toString()}};var ob=sb,ab=function(e){this.declaration=e.template.a};ab.prototype={init:Fa,render:Fa,unrender:Fa,teardown:Fa,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var lb=ab,ub=xo,cb=So,hb=Co,db=Ao,pb=To,fb=Oo,mb=function(e){this.init(e)};mb.prototype={bubble:bp,detach:_p,find:wp,findAll:kp,findAllComponents:xp,findComponent:Ep,findNextNode:Sp,firstNode:Cp,getArgsList:jp,getNode:Pp,getValue:Tp,init:ub,rebind:cb,registerIndexRef:function(e){var t=this.registeredIndexRefs;-1===t.indexOf(e)&&t.push(e)},render:hb,toString:db,unbind:pb,unregisterIndexRef:function(e){var t=this.registeredIndexRefs;t.splice(t.indexOf(e),1)},unrender:fb};var vb,gb,yb=mb,bb=Lo,_b=["template","partials","components","decorators","events"],wb=new nl("reset"),kb=function(e,t){function n(t,i,r){r&&r.partials[e]||t.forEach(function(t){t.type===ec&&t.getPartialName()===e&&i.push(t),t.fragment&&n(t.fragment.items,i,r),s(t.fragments)?n(t.fragments,i,r):s(t.items)?n(t.items,i,r):t.type===sc&&t.instance&&n(t.instance.fragment.items,i,t.instance),t.type===Xu&&(s(t.attributes)&&n(t.attributes,i,r),s(t.conditionalAttributes)&&n(t.conditionalAttributes,i,r))})}var i,r=[];return n(this.fragment.items,r),this.partials[e]=t,i=ml.start(this,!0),r.forEach(function(t){t.value=void 0,t.setValue(e)}),ml.end(),i},xb=Do,Eb=gu("reverse"),Sb=Mo,Cb=gu("shift"),Ab=gu("sort"),jb=gu("splice"),Pb=No,Tb=$o,Fb=new nl("teardown"),Ob=Vo,Lb=zo,Db=qo,Mb=new nl("unrender"),Ib=gu("unshift"),Nb=Bo,$b=new nl("update"),Rb=Uo,Vb={add:Za,animate:wl,detach:xl,find:Sl,findAll:Dl,findAllComponents:Ml,findComponent:Il,findContainer:Nl,findParent:$l,fire:ql,get:Bl,insert:Hl,merge:Gl,observe:lu,observeOnce:uu,off:du,on:pu,once:fu,pop:yu,push:bu,render:Cu,reset:bb,resetPartial:kb,resetTemplate:xb,reverse:Eb,set:Sb,shift:Cb,sort:Ab,splice:jb,subtract:Pb,teardown:Tb,toggle:Ob,toHTML:Lb,toHtml:Lb,unrender:Db,unshift:Ib,update:Nb,updateModel:Rb},zb=function(e,t,n){return n||Wo(e,t)?function(){var n,i="_super"in this,r=this._super;return this._super=t,n=e.apply(this,arguments),i&&(this._super=r),n}:e},qb=Go,Bb=Jo,Ub=function(e){var t,n,i={};return e&&(t=e._ractive)?(i.ractive=t.root,i.keypath=t.keypath.str,i.index={},(n=Bp(t.proxy.parentFragment))&&(i.index=Bp.resolve(n)),i):i};vb=function(e){return this instanceof vb?void By(this,e):new vb(e)},gb={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Bb},getNodeInfo:{value:Ub},parse:{value:Qd},Promise:{value:ol},svg:{value:ra},magic:{value:na},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:ua},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Ra},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},ka(vb,gb),vb.prototype=i(Vb,la),vb.prototype.constructor=vb,vb.defaults=vb.prototype;var Hb="function";if(typeof Date.now!==Hb||typeof String.prototype.trim!==Hb||typeof Object.keys!==Hb||typeof Array.prototype.indexOf!==Hb||typeof Array.prototype.forEach!==Hb||typeof Array.prototype.map!==Hb||typeof Array.prototype.filter!==Hb||"undefined"!=typeof window&&typeof window.addEventListener!==Hb)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var Wb=vb;return Wb})},{}],185:[function(t,n,i){!function(t,i){"object"==typeof n&&n.exports?n.exports=i():"function"==typeof e&&e.amd?e(i):t.Spinner=i()}(this,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var r=["opacity",t,~~(100*e),n,i].join("-"),s=.01+n/i*100,o=Math.max(1-(1-e)/t*(100-s),e),a=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[r]||(c.insertRule("@"+l+"keyframes "+r+"{0%{opacity:"+o+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}100%{opacity:"+o+"}}",c.cssRules.length),d[r]=1),r}function i(e,t){var n,i,r=e.style;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==r[t])return t;for(i=0;i<h.length;i++)if(n=h[i]+t,void 0!==r[n])return n}function r(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function o(e,t){return"string"==typeof e?e:e[t%e.length]}function a(e){this.opts=s(e||{},a.defaults,p)}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}c.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,i){function s(){return r(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function a(e,a,l){t(d,t(r(s(),{rotation:360/i.lines*e+"deg",left:~~a}),t(r(n("roundrect",{arcsize:i.corners}),{width:u,height:i.scale*i.width,left:i.scale*i.radius,top:-i.scale*i.width>>1,filter:l}),n("fill",{color:o(i.color,e),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,u=i.scale*(i.length+i.width),c=2*i.scale*u,h=-(i.width+i.length)*i.scale*2+"px",d=r(s(),{position:"absolute",top:h,left:h});if(i.shadow)for(l=1;l<=i.lines;l++)a(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)a(l);return t(e,d)},a.prototype.opacity=function(e,t,n,i){var r=e.firstChild;i=i.shadow&&i.lines||0,r&&t+i<r.childNodes.length&&(r=r.childNodes[t+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}}var u,c,h=["webkit","Moz","ms","O"],d={},p={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(a.defaults={},s(a.prototype,{spin:function(t){this.stop();var n=this,i=n.opts,s=n.el=e(null,{className:i.className});if(r(s,{position:i.position,width:0,zIndex:i.zIndex,left:i.left,top:i.top}),t&&t.insertBefore(s,t.firstChild||null),s.setAttribute("role","progressbar"),n.lines(s,n.opts),!u){var o,a=0,l=(i.lines-1)*(1-i.direction)/2,c=i.fps,h=c/i.speed,d=(1-i.opacity)/(h*i.trail/100),p=h/i.lines;!function f(){a++;for(var e=0;e<i.lines;e++)o=Math.max(1-(a+(i.lines-e)*p)%h*d,i.opacity),n.opacity(s,e*i.direction+l,o,i);n.timeout=n.el&&setTimeout(f,~~(1e3/c))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,s){function a(t,n){return r(e(),{position:"absolute",width:s.scale*(s.length+s.width)+"px",height:s.scale*s.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*c+s.rotate)+"deg) translate("+s.scale*s.radius+"px,0)",borderRadius:(s.corners*s.scale*s.width>>1)+"px"})}for(var l,c=0,h=(s.lines-1)*(1-s.direction)/2;c<s.lines;c++)l=r(e(),{position:"absolute",top:1+~(s.scale*s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:u&&n(s.opacity,s.trail,h+c*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&t(l,r(a("#000","0 0 4px #000"),{top:"2px"})),t(i,t(l,a(o(s.color,c),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),"undefined"!=typeof document){c=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}();var f=r(e("group"),{behavior:"url(#default#VML)"});!i(f,"transform")&&f.adj?l():u=i(f,"animation")}return a})},{}],186:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={appId:null,authToken:null,apiBase:"api/v3/",api:{tokens:{base:"tokens.json",reset:"tokens/reset.json"},notifications:"notifications.json",users:{base:"users.json",logout:"users/sign_out.json",registration:"users.json",profile:"profile.json",groups:"users/{user_id}/groups.json",follows:"users/{user_id}/follows.json",followers:"users/{user_id}/followers.json",followersItem:"users/{user_id}/followers/{id}.json",friends:"users/{user_id}/friends.json",friendsItem:"users/{user_id}/friends/{id}.json",password:"profile/password.json",passwordReset:"profile/password/reset.json",confirmPhone:"profile/phone/confirm.json",status:"users/status.json",socialProfiles:"users/{user_id}/social_profiles.json",socialProfile:"users/{user_id}/social_profiles/{id}.json"},videos:{base:"videos.json",video:"videos/{id}.json",convert:"videos/{id}/convert.json",feed:"videos/feed.json",setLastViewed:"videos/{id}/set_last_viewed.json",removeFromGroups:"videos/{id}/remove_from_groups.json"},groups:{base:"groups.json",group:"groups/{id}.json",join:"groups/{id}/join.json",leave:"groups/{id}/leave.json",invite:"groups/{id}/invite.json",kick:"groups/{id}/kick.json",setLastViewed:"groups/{id}/set_last_viewed.json",users:"groups/{id}/users.json"},graph:{root:"graph/root.json",rootCollection:"graph/root/collection.json"},storages:{avatar:"storages/{provider}/avatar_upload_url.json",video:"storages/{provider}/video_upload_urls.json"},requests:{base:"requests.json",accept:"requests/{id}/accept.json",reject:"requests/{id}/reject.json"}},webSocketHost:"ws://api.wecommunicate.co:9090/",storageHost:"http://we-media.storage.googleapis.com/",apiHost:"http://api.wecommunicate.co/",isLocalBuild:!1},t.exports=n["default"]},{}],187:[function(e,t,n){"use strict";function i(e,t,n){var i=d[e];i&&("OK"===t.statusText?!function(){var e=t.response;if("object"!=typeof e)try{e=JSON.parse(e)}catch(n){}i.forEach(function(t){return t.resolve(e)})}():!function(){var e=t.statusText;if(t.responseText&&(e=t.responseText),e)try{e=JSON.parse(e)}catch(r){}u["default"].triggerError('API call "'+n+'" returns error: '+e),i.forEach(function(t){return t.reject(e)})}(),delete d[e])}function r(e,t,n,r){var a=new s(function(s,a){var l=["GET","POST","PUT","DELETE"],c=void 0,p=[t,n,r],f={resolve:s,reject:a},m=void 0,v=void 0;if(t=null,n=null,r=null,p.forEach(function(e){switch(typeof e){case"string":t=e;break;case"object":n=e;break;case"function":r=e}}),t=t?t.toUpperCase():"GET",-1===l.indexOf(t))return void u["default"].triggerError(t+"method is not supported");if(e=h["default"].apiHost+e,n&&(o(n).forEach(function(t){var i=n[t],r=new RegExp("{"+t+"}","g");-1!==e.search(r)&&(e=e.replace(r,i),delete n[t])}),("GET"===t||"DELETE"===t)&&(e+="?"+o(n).map(function(e){var t=n[e];return"object"==typeof t?t.length?(e+="[]",t.map(function(t){return e+"="+t}).join("&")):e+"="+window.encodeURIComponent(JSON.stringify(t,function(e,t){return"number"==typeof t?""+t:t})):e+"="+t}).join("&"))),m=[t,e,JSON.stringify(n),h["default"].appId,h["default"].authToken].join("_"),v=d[m])v.push(f);else{if(d[m]=[f],!(XMLHttpRequest&&"withCredentials"in new XMLHttpRequest))return void u["default"].triggerError("Unfortunately, API component of V SDK does not support your browser");c=new XMLHttpRequest,c.onreadystatechange=function(){4===c.readyState&&i(m,c,e)},c.open(t,e,!0),h["default"].appId&&c.setRequestHeader("X-APP-ID",h["default"].appId),h["default"].authToken&&c.setRequestHeader("X-AUTH-TOKEN",h["default"].authToken),c.setRequestHeader("Content-type","application/json"),c.send(JSON.stringify(n))}});return r&&a.then(function(e){r({success:!0,data:e})},function(e){r({success:!1,data:e})}),a}var s=e("babel-runtime/core-js/promise")["default"],o=e("babel-runtime/core-js/object/keys")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var l=e("./common/helpers"),u=a(l),c=e("../config"),h=a(c),d={};t.exports=n["default"]},{"../config":186,"./common/helpers":188,"babel-runtime/core-js/object/keys":6,"babel-runtime/core-js/promise":8,"babel-runtime/helpers/interop-require-default":13}],188:[function(e,t,n){"use strict";var i=e("lodash/utility/times"),r=e("babel-runtime/helpers/interop-require-default")["default"],s=r(i),o=e("lodash/object/extend"),a=r(o);Object.defineProperty(n,"__esModule",{value:!0});var l=e("ractive"),u=r(l),c=e("spin.js"),h=r(c),d=e("../../config"),p=r(d),f={triggerError:function(e,t){if(t)throw new Error(e);console.error(e)},zeroFill:function(e,t){return s["default"](t-e.toString().length).reduce(function(e){return e+"0"},"")+e},formatDate:function(e,t){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e=e instanceof Date?e:new Date(e),t.replace(/(yyyy|yy|mmmm|mmm|mm|m|dddd|ddd|dd|hh|ss|a\/p|tz)/gi,function(t){switch(t.toLowerCase()){case"yy":return e.getFullYear().toString().substr(2);case"yyyy":return e.getFullYear();case"mmmm":return n[e.getMonth()];case"mmm":return n[e.getMonth()].substr(0,3);case"mm":return f.zeroFill(e.getMonth()+1,2);case"dddd":return i[e.getDay()];case"ddd":return i[e.getDay()].substr(0,3);case"dd":return f.zeroFill(e.getDate(),2);case"hh":return f.zeroFill(e.getHours()%12?e.getHours():12,2);case"m":return f.zeroFill(e.getMinutes(),2);case"ss":return f.zeroFill(e.getSeconds(),2);case"tz":var r=e.getTimezoneOffset(),s=Math.floor(Math.abs(r/60)),o=r%60;return""+(r>0?"-":"+")+f.zeroFill(s,2)+":"+(o||"00");case"a/p":return e.getHours()<12?"am":"pm"}})},stringToColor:function(e){var t=void 0;if(e){var n=["#99cc00","#33b5e5","#0099cc","#547bca","#aa66cc","#9933cc","#669900","#aeb857","#cc0000","#df5948","#ff4444","#ae6b23","#ff8800","#e5ae4f","#ffbb33","#cccccc","#888888"],i=e.substr(0,1).toLowerCase();t=n[(parseInt(i,10)||i.charCodeAt(0)-97)%n.length]}return t},absolutePath:function(e){return!e||/http/.test(e)?e:p["default"].storageHost+e},requestFullScreen:function(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},createSpinner:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return new h["default"](a["default"]({lines:11,length:16,width:6,radius:20,color:"#fff",shadow:!0,zIndex:2,className:"v-spinner"},e))},capitalize:function(e){return e.replace(/^(.)/,function(e){return e.toUpperCase()})},isMobile:/iphone|ipad|ipod|android|iemobile|blackberry/i.test(window.navigator.userAgent),queryParams:function(e){var t=e.split("?")[1],n={};return t&&t.split("&").forEach(function(e){if(e&&-1!==e.indexOf("=")){var t=e.split("=");n[t[0]]=t[1]}}),n},getScrollBoxes:function(e){for(var t=[],n=e;n;)/auto|scroll/.test(window.getComputedStyle(n).overflowY)&&t.push(n),n=n.parentElement;return t.push(window),t},getDataAttributes:function(e,t){var n={};if(e.dataset)n=e.dataset;else for(var i=0;i<e.attributes.length;i++){var r=e.attributes[i];if(/^data-/.test(r.name)){var s=r.name.replace(/^data-/,"").replace(/-[a-z]/g,function(e){return e.substr(1).toUpperCase()});n[s]=r.value}}return t?n[t]:n},setDataAttribute:function(e,t,n){e.dataset?e.dataset[t]=n:e.setAttribute("data-"+t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),n)}};u["default"].defaults.data.formatTime=function(e){if(e){var t=Math.floor(e/6e4),n=Math.round(e/1e3-60*t)+"";return t+":"+f.zeroFill(n,2)}return"0:00"},n["default"]=f,t.exports=n["default"]},{"../../config":186,"babel-runtime/helpers/interop-require-default":13,"lodash/object/extend":173,"lodash/utility/times":182,ractive:184,"spin.js":185}],189:[function(e,t,n){"use strict";var i=e("babel-runtime/helpers/create-class")["default"],r=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(){r(this,e),this._subscribers=[]}return i(e,[{key:"subscribe",value:function(e,t){this._subscribers.push({event:e,callback:t})}},{key:"unsubscribe",value:function(e,t){"function"==typeof e&&(t=e,e=null);var n=this._find(e,t);this._subscribers=this._subscribers.filter(function(e){return-1===n.indexOf(e)})}},{key:"publish",value:function(e,t){var n=this;this._find(e).forEach(function(i){i.callback&&i.callback.call(n,e,t)})}},{key:"_find",value:function(e,t){return this._subscribers.filter(function(n){var i=!1,r=!t||t===n.callback;return n.event&&"*"!==n.event?n.event.split(" ").some(function(t){return i=-1!==e.search(new RegExp("^"+t+"(.|$)"))}):i=!0,i&&r})}}]),e}();n["default"]=s,t.exports=n["default"]},{"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10}],190:[function(e,t,n){"use strict";function i(e,t){var n=new f(function(t,n){e(t,n)});return t&&"function"==typeof t&&n.then(function(e){t({success:!0,data:e})},function(e){t({success:!1,data:e})}),n}function r(e){return i(function(t,n){var i=e.source,r=e.url,o=e.method,a=e.params,l=e.pageParams,c=e.update;i=i||[],o=o||"get",a=a||{},l=l||{},l.page=l.page||1,l.per_page=l.per_page||50,l.all?(delete l.all,i._loaded?t(i):!function(){var e=function h(){s(r,o,u["default"]({},a,l)).then(function(e){i=i.concat(e),e.length===l.per_page?(l.page++,h()):(i._loaded=!0,c&&c(i),t(i))},n)};e()}()):!function(){var e=(l.offset||0)+(l.page-1)*l.per_page,d=h["default"](i.slice(e,e+l.per_page));d.length===l.per_page||i._loaded?t(d):s(r,o,u["default"](a,l)).then(function(n){var r=n.length!==l.per_page&&i.length>=e;n.forEach(function(t,n){return i[e+n]=t}),i=p["default"](i),i._loaded=r,c&&c(i),t(n)},n)}()})}function s(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t[0]=v["default"].apiBase+t[0],y["default"].apply(null,t)}function o(){var e=arguments.length<=0||void 0===arguments[0]?"device":arguments[0];return(window.btoa?window.btoa(e):e)+"_"+(new Date).getTime()}var a=e("lodash/object/assign"),l=e("babel-runtime/helpers/interop-require-default")["default"],u=l(a),c=e("lodash/array/compact"),h=l(c),d=e("lodash/array/uniq"),p=l(d),f=e("babel-runtime/core-js/promise")["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.async=i,n.fetchCollection=r,n.api=s,n.createDeviceToken=o;var m=e("../../config"),v=l(m),g=e("../api"),y=l(g)},{"../../config":186,"../api":187,"babel-runtime/core-js/promise":8,"babel-runtime/helpers/interop-require-default":13,"lodash/array/compact":81,"lodash/array/uniq":85,"lodash/object/assign":172}],191:[function(e,t,n){"use strict";function i(){r(),$["default"].subscribe("token",r)}function r(){R=[],V=[],z=null}function s(e){return e=x["default"](e)?e:[e],R.filter(function(t){return-1!==e.indexOf(t.id)})}function o(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return I.async(function(n,i){var r=!e;e=x["default"](e)?e:[e];var o=s(e);if(o.length!==e.length||t){var a=void 0,l={};t?a=e:!function(){var t=R.map(function(e){return e.id});a=e.filter(function(e){return t.indexOf(e)})}(),r||(l.group_ids=a),I.api(L["default"].api.groups.base,l).then(function(t){R=S["default"](t.concat(R),"id"),n(r?t:s(e))},i)}else n(o)},n)}function a(e){return I.async(function(e,t){z?e(z):I.api(L["default"].api.graph.root).then(function(t){var n=function i(e){e.related_groups&&e.related_groups.forEach(function(e){i(e)}),R.push(e)};z=t,n(z),e(z)},t)},e)}function l(e,t){return"function"==typeof e&&(t=e,e=null),I.async(function(t,n){I.fetchCollection({source:V,pageParams:e,url:L["default"].api.users.groups,params:{user_id:"self"},update:function(e){V=e,R=R.concat(V)}}).then(t,n)},t)}function u(e,t,n){return"function"==typeof t&&(n=t,t=null),I.async(function(n,i){return o(e).then(function(r){var s=r[0];s.users=s.users||[],I.fetchCollection({source:s.users,pageParams:t,url:L["default"].api.groups.users,params:{id:e}}).then(n,i)})},n)}function c(e,t,n){return"function"==typeof t&&(n=t,t=null),I.async(function(n,i){I.fetchCollection({source:[],pageParams:t,url:L["default"].api.groups.base,params:{name:e}}).then(n,i)},n)}function h(e){var t=A["default"](R,{id:e.id});P["default"](t)?R.push(e):F["default"](t,e),R=S["default"](R,"id"),d()}function d(){var e=V._loaded;V=R.filter(function(e){return!P["default"](e.relation_type)}),V._loaded=e}function p(e,t,n){return"function"==typeof t&&(n=t,t=null),I.async(function(n,i){t?(h(e),n(e)):I.api(L["default"].api.groups.base,"post",e).then(function(t){h(e),n(t),q.publish("create",t)},i)},n)}function f(e,t,n){return"function"==typeof t&&(n=t,t=null),I.async(function(n,i){t?(h(e),n(e)):I.api(L["default"].api.groups.group,"put",e).then(function(e){h(e),n(e),q.publish("update",e)},i)},n)}function m(e,t){return I.async(function(t,n){I.api(L["default"].api.groups.group,"delete",{id:e}).then(function(n){R=R.filter(function(t){return t.id!==e}),d(),t(n),q.publish("remove",e)},n)},t)}function v(e,t,n){var i={id:e};return"function"==typeof t&&(n=t,t=null),t&&(i.relation_type=t),I.async(function(e,t){I.api(L["default"].api.groups.join,"post",i).then(function(t){h(t.target),e(t),q.publish("join",t.target)},t)},n)}function g(e,t){return I.async(function(t,n){I.api(L["default"].api.groups.leave,"post",{id:e}).then(function(n){h({id:e,relation_type:null}),t(n),q.publish("leave",n)},n)},t)}function y(e,t,n,i){var r={id:e,user_id:t};return"function"==typeof n&&(i=n,n=null),n&&(r.relation_type=n),I.async(function(e,t){I.api(L["default"].api.groups.invite,"post",r).then(function(t){e(t),q.publish("invite",t)},t)},i)}function b(e,t,n){return I.async(function(n,i){I.api(L["default"].api.groups.kick,"post",{id:e,user_id:t}).then(function(e){n(e),q.publish("kick",e)},i)},n)}function _(e,t,n){return I.async(function(n,i){I.api(L["default"].api.groups.setLastViewed,"post",{id:e,video_id:t}).then(n,i)},n)}var w=e("lodash/lang/isArray"),k=e("babel-runtime/helpers/interop-require-default")["default"],x=k(w),E=e("lodash/array/uniq"),S=k(E),C=e("lodash/collection/find"),A=k(C),j=e("lodash/lang/isEmpty"),P=k(j),T=e("lodash/object/extend"),F=k(T);Object.defineProperty(n,"__esModule",{value:!0});var O=e("../../config"),L=k(O),D=e("../common/pubsub"),M=k(D),I=e("./base"),N=e("./user"),$=k(N),R=void 0,V=void 0,z=void 0,q=new M["default"];i(),n["default"]={get:o,getRootGraph:a,getUserGroups:l,getParticipants:u,search:c,create:p,update:f,remove:m,join:v,leave:g,invite:y,kick:b,setLastViewed:_,subscribe:q.subscribe.bind(q),unsubscribe:q.unsubscribe.bind(q)},t.exports=n["default"]},{"../../config":186,"../common/pubsub":189,"./base":190,"./user":195,"babel-runtime/helpers/interop-require-default":13,"lodash/array/uniq":85,"lodash/collection/find":86,"lodash/lang/isArray":161,"lodash/lang/isEmpty":163,"lodash/object/extend":173}],192:[function(e,t,n){"use strict";function i(){c["default"].authToken?c["default"].authToken!==b.authToken&&(r(),b.ws=new WebSocket(c["default"].webSocketHost+"stream/"+c["default"].authToken),b.authToken=c["default"].authToken,b.ws.onmessage=function(e){for(var t=e.data;"string"==typeof t;)try{t=JSON.parse(t)}catch(n){break}if(t){var i=t.notification_type.replace(/^(create|update|accept|reject)(ed|d)$/,"$1");y.publish(t.target_type.toLowerCase()+"."+i,t)}}):b.ws&&r()}function r(){b.ws&&b.ws.close(),b.ws=null,b.authToken=null}function s(e,t){var n=c["default"].webSocketHost,i=void 0;return e=l["default"]({},e),e.group_id?(n+="groups/"+e.group_id,delete e.group_id):n+="videos/"+c["default"].appId,i=new WebSocket(n),i.onmessage=function(n){for(var i=n.data;"string"==typeof i;)try{i=JSON.parse(i)}catch(r){break}i&&"video"===i.target_type.toLowerCase()&&"updated"===i.notification_type&&m.api(c["default"].api.videos.base,l["default"]({},e,{video_ids:[i.target_id],with_mp4:!0,with_hls:!1})).then(function(e){var n=e[0];n&&t(n)})},function(){i&&i.close(),i=null}}var o=e("lodash/object/assign"),a=e("babel-runtime/helpers/interop-require-default")["default"],l=a(o);Object.defineProperty(n,"__esModule",{value:!0});var u=e("../../config"),c=a(u),h=e("../common/helpers"),d=a(h),p=e("../common/pubsub"),f=a(p),m=e("./base"),v=e("./user"),g=a(v),y=new f["default"],b={ws:null,authToken:null};window.WebSocket?(g["default"].subscribe("token",i),i()):d["default"].triggerError("Unfortunately, notification component of V SDK does not support your browser"),n["default"]={subscribe:y.subscribe.bind(y),unsubscribe:y.unsubscribe.bind(y),subscribeOnNewVideo:s},t.exports=n["default"]},{"../../config":186,"../common/helpers":188,"../common/pubsub":189,"./base":190,"./user":195,"babel-runtime/helpers/interop-require-default":13,"lodash/object/assign":172}],193:[function(e,t,n){"use strict";function i(){r(),b["default"].subscribe("token",r),w["default"].subscribe("request.create",function(){k.pending=null,s().then(function(e){var t=c["default"](k,{id:e.target_id});t&&x.publish("create",t)})})}function r(){k={pending:null,accepted:null,rejected:null}}function s(){var e=arguments.length<=0||void 0===arguments[0]?"pending":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return g.async(function(t,n){if(null===k[e])g.api(d["default"].api.requests.base,{state:e}).then(function(n){k[e]=n.filter(function(e){return e.requester_id!==b["default"].getProfile().id}),t(k[e])},n);else if(void 0===k[e]){var i="Unknown state of request";n({error:i}),f["default"].triggerError("V.requests.get(): "+i)}else t(k[e])},t)}function o(e,t){return g.async(function(t,n){g.api(d["default"].api.requests.accept,{id:e}).then(function(){x.publish("accept",c["default"](k.pending,{id:e})),k.pending=k.pending.filter(function(t){return t.id!==e})}).then(t,n)},t)}function a(e,t){return g.async(t,function(t,n){g.api(d["default"].api.requests.reject,{id:e}).then(function(){x.publish("reject",c["default"](k.pending,{id:e})),k.pending=k.pending.filter(function(t){return t.id!==e})}).then(t,n)})}var l=e("lodash/collection/find"),u=e("babel-runtime/helpers/interop-require-default")["default"],c=u(l);Object.defineProperty(n,"__esModule",{value:!0});var h=e("../../config"),d=u(h),p=e("../common/helpers"),f=u(p),m=e("../common/pubsub"),v=u(m),g=e("./base"),y=e("./user"),b=u(y),_=e("./notifications"),w=u(_),k=void 0,x=new v["default"];i(),n["default"]={get:s,accept:o,reject:a,subscribe:x.subscribe.bind(x),unsubscribe:x.unsubscribe.bind(x)},t.exports=n["default"]},{"../../config":186,"../common/helpers":188,"../common/pubsub":189,"./base":190,"./notifications":192,"./user":195,"babel-runtime/helpers/interop-require-default":13,"lodash/collection/find":86}],194:[function(e,t,n){"use strict";function i(e,t){return l.async(function(t,n){l.api(a["default"].api.storages.avatar,e).then(t,n)},t)}function r(e,t){return l.async(function(t,n){l.api(a["default"].api.storages.video,e).then(t,n)},t)}var s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../config"),a=s(o),l=e("./base");n["default"]={getAvatarStorage:i,getVideoStorage:r},t.exports=n["default"]},{"../../config":186,"./base":190,"babel-runtime/helpers/interop-require-default":13}],195:[function(e,t,n){"use strict";function i(){V={},z=null,B=null,U=null,H=null,I["default"].authToken=null,q&&(clearInterval(q),q=null)}function r(e,t,n){return R.async(function(n,i){e&&t?R.api(I["default"].api.tokens.base,"post",{email:e,password:t,device_token:R.createDeviceToken(e)}).then(function(e){m(e).then(n,i)},i):i({error:"You should pass email and password for login"})},n)}function s(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return R.async(function(t,n){var i=function(){var e=(new Date).getTime().toString(36)+Math.random().toString(36).substr(2,9),i=e+"-web@vapps.xyz",s={user:{email:i,nickname:e,password:e},device_token:R.createDeviceToken(i),is_guest:!0};return R.api(I["default"].api.users.base,"post",s).then(function(e){return(e.token?m(e.token):r(s.email,s.password)).then(function(e){return t(e),e},n)},n)},s=function(e){return localStorage.vGuestUserToken=JSON.stringify(e)};if(e){var o=void 0;try{o=JSON.parse(localStorage.vGuestUserToken)}catch(a){}o?m(o).then(t)["catch"](i):i().then(s)}else i()},t)}function o(e,t){return R.async(function(t,n){/facebook|twitter/.test(e)?!function(){var i=function r(e){if(e.data&&"string"==typeof e.data){var i={};try{i=JSON.parse(e.data.replace(/\n/g,""))}catch(s){}"social_auth"===i.type&&i.data&&(i.data.success===!0?(delete i.data.success,m(i.data).then(t,n)):n({error:i.data.message||"Authentication failed"}),window.removeEventListener("message",r,!1))}};window.addEventListener("message",i,!1),window.open(I["default"].apiHost+"/api/auth/"+e+"?app_id="+I["default"].appId,"","width=1000,height=600")}():n({error:"V SDK supports only facebook and twitter for authorization"})},t)}function a(e){return R.async(function(e,t){I["default"].authToken?R.api(I["default"].api.tokens.reset,"post",{auth_token:I["default"].authToken}).then(function(t){i(),e(t),W.publish("token.delete")},t):t({error:"You are not authorized"})},e)}function l(){return!j["default"](z)}function u(){return l()&&V.guest}function c(){return l()&&!V.guest}function h(){return V}function d(e){return R.async(function(e,t){j["default"](V)?R.api(I["default"].api.users.profile).then(function(t){V=t,e(V)},t):e(V)},e)}function p(e,t){return R.async(function(t,n){R.api(I["default"].api.users.profile,"put",e).then(function(e){V=T["default"](V,e),t(e),W.publish("profile.update",V)},n)},t)}function f(){return z}function m(e,t){return R.async(function(t,n){
e.token?(i(),I["default"].authToken=e.token,z=e,d().then(function(e){V=e,t(z),W.publish("token.create",z)},n)):n(e)},t)}function v(e,t){return R.async(function(t,n){R.api(I["default"].api.users.password,"put",e).then(function(e){t(e),W.publish("password.update",V)},n)},t)}function g(e,t){return R.async(function(t,n){R.api(I["default"].api.users.confirmPhone,"post",{code:e}).then(t,n)},t)}function y(e,t,n){return R.async(function(n,i){q&&clearInterval(q),t&&(q=setInterval(function(){R.api(I["default"].api.users.status,"post",{status:e})},3e4)),R.api(I["default"].api.users.status,"post",{status:e}).then(function(t){n(t),W.publish("status.update",e)},i)},n)}function b(){q&&clearInterval(q)}function _(e,t){return R.async(function(t,n){c()?/facebook|twitter/.test(e)?!function(){var i=function r(i){if(i.data&&"string"==typeof i.data){var s={};try{s=JSON.parse(i.data.replace(/\n/g,""))}catch(o){}"social_auth"===s.type&&s.data&&(s.data.success===!0?d().then(function(n){var i=O["default"](n.social_profiles,{provider:e});t(i),W.publish("socialprofile.attache",i)}):n({error:s.data.message}),window.removeEventListener("message",r,!1))}};window.addEventListener("message",i,!1),window.open(I["default"].apiHost+"/api/auth/"+e+"?app_id="+I["default"].appId+"&auth_token="+I["default"].authToken,"","width=1000,height=600")}():n({error:"V SDK supports only facebook and twitter"}):n({error:"To attach social profile you should be authorized"})},t)}function w(e,t){return R.async(function(t,n){R.api(I["default"].api.users.socialProfiles,"delete",{id:e,user_id:"self"}).then(function(n){V.social_profiles=V.social_profiles.filter(function(t){return t.id!==e}),t(n),W.publish("socialProfile.detache",n)},n)},t)}function k(e,t){return R.async(function(t,n){R.api(I["default"].api.users.friends,"post",{id:e,user_id:"self"}).then(function(e){B.splice(0,0,e),B=D["default"](B,"id"),t(e),W.publish("friend.request",e)},n)},t)}function x(e,t){return R.async(function(t,n){R.api(I["default"].api.users.friends,"delete",{id:e,user_id:"self"}).then(function(n){B=B.filter(function(t){return t.id!==e}),t(n),W.publish("friend.delete",e)},n)},t)}function E(e,t){return R.async(function(t,n){R.api(I["default"].api.users.followers,"post",{id:e,user_id:"self"}).then(function(e){U.splice(0,0,e),U=D["default"](U,"id"),t(e),W.publish("follow.request",e)},n)},t)}function S(e,t){return R.async(function(t,n){R.api(I["default"].api.users.followers,"delete",{id:e,user_id:"self"}).then(function(n){U=U.filter(function(t){return t.id!==e}),t(n),W.publish("follow.delete",e)},n)},t)}var C=e("lodash/lang/isEmpty"),A=e("babel-runtime/helpers/interop-require-default")["default"],j=A(C),P=e("lodash/object/assign"),T=A(P),F=e("lodash/collection/find"),O=A(F),L=e("lodash/array/uniq"),D=A(L);Object.defineProperty(n,"__esModule",{value:!0});var M=e("../../config"),I=A(M),N=e("../common/pubsub"),$=A(N),R=e("./base"),V=void 0,z=void 0,q=void 0,B=void 0,U=void 0,H=void 0,W=new $["default"];i(),n["default"]={login:r,loginAsGuest:s,loginWithSocialNetwork:o,logout:a,fetchProfile:d,getProfile:h,updateProfile:p,getToken:f,setToken:m,isAuthorized:l,isAuthorizedAsGuest:u,isAuthorizedAsUser:c,updatePassword:v,confirmPhone:g,setStatus:y,clearStatus:b,attachSocialProfile:_,detachSocialProfile:w,addFriend:k,deleteFriend:x,followUser:E,unFollowUser:S,subscribe:W.subscribe.bind(W),unsubscribe:W.unsubscribe.bind(W)},t.exports=n["default"]},{"../../config":186,"../common/pubsub":189,"./base":190,"babel-runtime/helpers/interop-require-default":13,"lodash/array/uniq":85,"lodash/collection/find":86,"lodash/lang/isEmpty":163,"lodash/object/assign":172}],196:[function(e,t,n){"use strict";function i(){r(),j["default"].subscribe("token",r)}function r(){O={},P=null,T=null,F=null}function s(e){e=g["default"](e)?e:[e],e.forEach(function(e){O[e.id]=b["default"](O[e.id]||{},e)})}function o(e,t){return C.async(function(t,n){var i=[];e=g["default"](e)?e:[e],e.forEach(function(e){var t=O[e];w["default"](t)||i.push(t)}),e.length===i.length?t(i):C.api(x["default"].api.users.base,{user_ids:e}).then(function(e){s(e),t(e)},n)},t)}function a(e,t,n){return C.async(function(n,i){C.fetchCollection({source:[],pageParams:t,url:x["default"].api.users.base,params:{nickname:e}}).then(function(e){s(e),n(e)},i)},n)}function l(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return C.async(function(n,i){t.device_token=t.device_token||C.createDeviceToken(e.email),t.user=e,C.api(x["default"].api.users.base,"post",t).then(function(e){s(e),n(e),L.publish("create",e)},i)},n)}function u(e,t){return C.async(function(t,n){C.api(x["default"].api.users.passwordReset,"post",e).then(t,n)},t)}function c(e,t){return C.async(function(t,n){e=g["default"](e)?e:[e],C.api(x["default"].api.users.status,{user_ids:e.join(",")}).then(function(e){s(e),t(e)},n)},t)}function h(){var e=arguments.length<=0||void 0===arguments[0]?"self":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return C.async(function(t,n){C.api(x["default"].api.users.socialProfiles,{user_id:e}).then(t,n)},t)}function d(){var e=arguments.length<=0||void 0===arguments[0]?"self":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return C.async(function(t,n){P&&"self"===e?t(P):C.api(x["default"].api.users.friends,{user_id:e}).then(function(e){P=e,t(e)},n)},t)}function p(){var e=arguments.length<=0||void 0===arguments[0]?"self":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return C.async(function(t,n){T&&"self"===e?t(T):C.api(x["default"].api.users.followers,{user_id:e}).then(function(e){T=e,t(e)},n)},t)}function f(){var e=arguments.length<=0||void 0===arguments[0]?"self":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return C.async(function(t,n){F&&"self"===e?t(F):C.api(x["default"].api.users.follows,{user_id:e}).then(function(e){F=e,t(e)},n)},t)}var m=e("lodash/lang/isArray"),v=e("babel-runtime/helpers/interop-require-default")["default"],g=v(m),y=e("lodash/object/extend"),b=v(y),_=e("lodash/lang/isEmpty"),w=v(_);Object.defineProperty(n,"__esModule",{value:!0});var k=e("../../config"),x=v(k),E=e("../common/pubsub"),S=v(E),C=e("./base"),A=e("./user"),j=v(A),P=void 0,T=void 0,F=void 0,O=void 0,L=new S["default"];i(),n["default"]={get:o,search:a,create:l,resetPassword:u,getStatus:c,getSocialProfiles:h,getFriends:d,getFollowers:p,getFollows:f,subscribe:L.subscribe.bind(L),unsubscribe:L.unsubscribe.bind(L)},t.exports=n["default"]},{"../../config":186,"../common/pubsub":189,"./base":190,"./user":195,"babel-runtime/helpers/interop-require-default":13,"lodash/lang/isArray":161,"lodash/lang/isEmpty":163,"lodash/object/extend":173}],197:[function(e,t,n){"use strict";function i(){r(),T["default"].subscribe("token",r),A["default"].subscribe("video.update",function(e,t){F=F.filter(function(e){return e.id!==t.target_id})})}function r(){F=[]}function s(e,t){return j.async(function(t,n){e=m["default"](e)?e:[e];var i=F.filter(function(t){return-1!==e.indexOf(t.id)});i.length===e.length?t(i):j.api(x["default"].api.videos.base,{video_ids:e,with_mp4:!0,with_hls:!1}).then(function(e){F=g["default"](F.concat(e),"id"),t(e)},n)},t)}function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return j.async(function(t,n){e.with_mp4=!0,e.with_hls=!1,j.api(x["default"].api.videos.base,e).then(function(e){F=g["default"](F.concat(e),"id"),t(e)},n)},t)}function a(e,t){return j.async(function(t,n){j.api(x["default"].api.videos.base,"post",e).then(function(e){F.push(e),t(e),O.publish("create",e)},n)},t)}function l(e,t){return j.async(function(t,n){j.api(x["default"].api.videos.video,"put",e).then(function(e){b["default"](w["default"](F,{id:e.id}),e),t(e),O.publish("update",e)},n)},t)}function u(e,t){return j.async(function(t,n){j.api(x["default"].api.videos.video,"delete",{id:e}).then(function(n){F=F.filter(function(t){return t.id!==e}),t(n),O.publish("delete",e)},n)},t)}function c(e,t,n){return j.async(function(n,i){t="string"==typeof t?[t]:t,j.api(x["default"].api.videos.removeFromGroups,"delete",{id:e,group_ids:t}).then(function(i){F=F.filter(function(t){return t.id!==e}),n(i),O.publish("deleteFromGroup",{id:e,groupIds:t})},i)},n)}function h(e,t,n){return j.async(function(n,i){j.api(x["default"].api.videos.convert,"post",{id:e,path:t}).then(n,i)},n)}function d(e,t){return j.async(function(t,n){j.api(x["default"].api.videos.setLastViewed,"put",{id:e}).then(t,n)},t)}var p=e("lodash/lang/isArray"),f=e("babel-runtime/helpers/interop-require-default")["default"],m=f(p),v=e("lodash/array/uniq"),g=f(v),y=e("lodash/object/extend"),b=f(y),_=e("lodash/collection/find"),w=f(_);Object.defineProperty(n,"__esModule",{value:!0});var k=e("../../config"),x=f(k),E=e("../common/pubsub"),S=f(E),C=e("./notifications"),A=f(C),j=e("./base"),P=e("./user"),T=f(P),F=void 0,O=new S["default"];i(),n["default"]={get:s,search:o,create:a,update:l,remove:u,removeFromGroups:c,convert:h,setLastViewed:d,subscribe:O.subscribe.bind(O),unsubscribe:O.unsubscribe.bind(O)},t.exports=n["default"]},{"../../config":186,"../common/pubsub":189,"./base":190,"./notifications":192,"./user":195,"babel-runtime/helpers/interop-require-default":13,"lodash/array/uniq":85,"lodash/collection/find":86,"lodash/lang/isArray":161,"lodash/object/extend":173}],198:[function(e,t,n){"use strict";var i=e("babel-runtime/helpers/create-class")["default"],r=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/core-js/promise")["default"],o=e("babel-runtime/core-js/object/keys")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(n,"__esModule",{value:!0});var l=e("ractive"),u=a(l),c=e("../common/helpers"),h=a(c),d=e("../common/pubsub"),p=a(d),f=function(){function e(t){var n=this;r(this,e);var i=this.constructor.params||{};t.container="string"==typeof t.container?document.getElementById(t.container):t.container,t.data=t.data||{},t.replace&&(t.replaceElement=t.container,t.container=t.container.parentElement),t.container?window.jQuery&&t.container instanceof window.jQuery&&(t.container=t.container[0]):h["default"].triggerError("Container element is not found"),new s(function(e){var r=i.template;if(t.data.template){var s=n._parseTemplate(t.data.template);r=s.template,t.data.templateElements=s.elements}n._ractive=new u["default"]({el:t.container,template:r,data:n._parseData(t.data),append:t.replaceElement||!0,magic:!0,onrender:e})}).then(function(){t.replaceElement?(n._element=t.replaceElement.previousSibling,t.replaceElement.parentNode&&t.replaceElement.parentNode.removeChild(t.replaceElement),t.replaceElement=null):n._element=n._ractive.find(i.rootSelector),t.id&&(n.id=t.id,h["default"].setDataAttribute(n._element,"id",t.id)),n._init(),n._triggerEvent("init",n._element)}),this._pubSub=new p["default"],this._externalListeners=[]}return i(e,[{key:"_parseTemplate",value:function(e){var t=this.constructor.params||{},n=[],i=document.createElement("div");return t.templateElements&&(n=[],o(t.templateElements).forEach(function(i){if(-1!==e.indexOf("<%"+i+"%>")){var r=t.templateElements[i];e=e.replace("<%"+i+"%>","{{>"+r+"}}"),n.push(i)}}),e=e.replace(/<%=([^%]*)%>/g,"{{{customData.$1}}}")),i.innerHTML=e,i.querySelector(t.rootSelector)||(e='<div class="'+t.rootSelector.replace(".","")+'">'+e+"</div>"),{template:e,elements:n}}},{key:"subscribe",value:function(e,t){return this._pubSub.subscribe(e,t)}},{key:"unsubscribe",value:function(e,t){return this._pubSub.unsubscribe(e,t)}},{key:"destroy",value:function(){this._externalListeners.forEach(function(e){return e.element.removeEventListener(e.eventName,e.listener)}),this._ractive.teardown()}},{key:"_triggerEvent",value:function(e,t){this._pubSub.publish(e,t)}},{key:"_externalEventListener",value:function(e,t,n){var i=this;t.split(" ").forEach(function(t){i._externalListeners.push({element:e,eventName:t,listener:n}),e.addEventListener(t,n)})}}]),e}();n["default"]=f,t.exports=n["default"]},{"../common/helpers":188,"../common/pubsub":189,"babel-runtime/core-js/object/keys":6,"babel-runtime/core-js/promise":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,ractive:184}],199:[function(e,t,n){"use strict";function i(){r(),"complete"===document.readyState?o.init():window.addEventListener("load",function(){o.init()})}function r(){var e=window.document.querySelector('script[src*="v.js"]');if(e&&!b["default"].isLocalBuild){var t=document.querySelector("head"),n=t.querySelector("link[rel=stylesheet]"),i=document.createElement("link");i.rel="stylesheet",i.href=e.src.replace(".js",".css"),n?t.insertBefore(i,n):t.appendChild(i)}}function s(e,t){for(var n=++O,i=new e(u["default"]({id:n},t)),r=v(i),s=Object.getPrototypeOf(i),o={};s!==Object.prototype;)r=r.concat(g(s)),s=Object.getPrototypeOf(s);r.forEach(function(e){if(!/^_|^constructor$/.test(e)){var t=i[e];void 0!==t&&(o[e]="function"==typeof t?t.bind(i):t)}}),i.subscribe("init",function(e,t){o.element=t});var a=o.destroy;return o.destroy=function(){a(),delete F[n]},F[n]=o,o}function o(e,t,n){var i=T[e];return i?s(i,{container:t,data:n}):void w["default"].triggerError("There is no ui component named "+e)}var a=e("lodash/object/extend"),l=e("babel-runtime/helpers/interop-require-default")["default"],u=l(a),c=e("lodash/object/values"),h=l(c),d=e("lodash/collection/forEach"),p=l(d),f=e("lodash/object/keys"),m=l(f),v=e("babel-runtime/core-js/object/keys")["default"],g=e("babel-runtime/core-js/object/get-own-property-names")["default"];Object.defineProperty(n,"__esModule",{value:!0});var y=e("../../config"),b=l(y),_=e("../common/helpers"),w=l(_),k=e("./player/player"),x=l(k),E=e("./qrcode/qrcode"),S=l(E),C=e("./playlist/playlist"),A=l(C),j=e("./upload/upload"),P=l(j),T={player:x["default"],playlist:A["default"],upload:P["default"],qrcode:S["default"]},F={},O=0;o.init=function(){var e=arguments.length<=0||void 0===arguments[0]?document.body:arguments[0];h["default"](T).forEach(function(t){p["default"](e.querySelectorAll(t.params.elementName),function(e){var n=w["default"].getDataAttributes(e),i={};m["default"](n).forEach(function(e){var t=n[e];if(-1!==t.search(/\[|\{/)){t=t.replace(/'/g,'"'),t=t.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ');try{t=JSON.parse(t)}catch(r){}}else/^(\d|\.)*$/g.test(t)?t=parseFloat(t):/^(true|false)$/.test(t)&&(t="true"===t);i[e]=t}),s(t,{container:e,data:i,replace:!0})})})},o.getInstance=function(e){return F["string"==typeof e?e:w["default"].getDataAttributes(e,"id")]},i(),n["default"]=o,t.exports=n["default"]},{"../../config":186,"../common/helpers":188,"./player/player":210,"./playlist/playlist":213,"./qrcode/qrcode":218,"./upload/upload":220,"babel-runtime/core-js/object/get-own-property-names":5,"babel-runtime/core-js/object/keys":6,"babel-runtime/helpers/interop-require-default":13,"lodash/collection/forEach":87,"lodash/object/extend":173,"lodash/object/keys":174,"lodash/object/values":179}],200:[function(e,t,n){t.exports='<div class="v-player-expand{{#isScreenExpanded}} v-player-expand--active{{/}}{{^isShowScreenExpansion}} v-hide{{/}}" on-click="toggleScreenExpansion"></div>'},{}],201:[function(e,t,n){t.exports='<div class="v-player-fullscreen{{#isFullScreen}} v-player-fullscreen--active{{/}}" on-click="toggleFullScreen"></div>'},{}],202:[function(e,t,n){t.exports='<div class="v-player-progress"><div class="v-player-progress-time">{{formatTime(progress)}}/{{formatTime(duration)}}</div> <input class="v-player-progress-el" /></div>'},{}],203:[function(e,t,n){t.exports='<div class="v-player-rate"> <input class="v-player-rate-el" /></div>'},{}],204:[function(e,t,n){t.exports='<div class="v-player-video" style="\n	{{#containerStyleWidth}}width: {{containerStyleWidth}};{{/}}\n	{{#containerStyleHeight}}height: {{containerStyleHeight}};{{/}}\n"><div class="v-player-video-inner" style="\n		{{#videoWidth}}width: {{videoWidth + \'px\'}};{{/}}\n		{{#videoHeight}}height: {{videoHeight + \'px\'}};{{/}}\n		{{#videoTop}}top: {{videoTop + \'px\'}};{{/}}\n		{{#videoLeft}}left: {{videoLeft + \'px\'}};{{/}}\n	"><video class="v-player-video-el" webkit-playsinline></video>{{#posterSrc}} <img class="v-player-video-poster{{^showPoster}} v-hide{{/}}" src="{{posterSrc}}" /> {{/}}<div class="v-player-video-screen" on-click="togglePlayback"></div></div></div>'},{}],205:[function(e,t,n){t.exports='<div class="v-player-info"> {{#nickname}}<div class="v-player-info-avatar" style="background-color: {{userColor}}"> {{#avatarPath}} <img class="v-player-info-avatar-image" src="{{avatarPath}}" /> {{else}}<div class="v-player-info-avatar-letter">{{nickname.substr(0, 1)}}</div> {{/}}</div> {{/}}<div class="v-player-info-text"> {{#nickname}} <span class="v-player-info-name">{{nickname}}</span> {{/}} {{#shotOn}} <span class="v-player-info-date">{{shotOn}}</span> {{/}} {{#address}} <span class="v-player-info-location">{{address}}</span> {{/}}</div></div>'},{}],206:[function(e,t,n){t.exports='<div class="v-player-video" style="\n	{{#containerStyleWidth}}width: {{containerStyleWidth}};{{/}}\n	{{#containerStyleHeight}}height: {{containerStyleHeight}};{{/}}\n"><div class="v-player-video-inner" style="\n		{{#videoWidth}}width: {{videoWidth + \'px\'}};{{/}}\n		{{#videoHeight}}height: {{videoHeight + \'px\'}};{{/}}\n		{{#videoTop}}top: {{videoTop + \'px\'}};{{/}}\n		{{#videoLeft}}left: {{videoLeft + \'px\'}};{{/}}\n	"> {{#posterSrc}} <img class="v-player-video-poster" src="{{posterSrc}}" /> {{/}}</div></div>'},{}],207:[function(e,t,n){t.exports='<div class="v-player-volume"> <input class="v-player-volume-el" /></div>'},{}],208:[function(e,t,n){"use strict";var i=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../config"),s=i(r),o=e("../../common/helpers"),a=i(o),l={getVideoData:function(e,t){var n=e.storage_path?s["default"].storageHost+e.storage_path+"/":"",i=function(e){return e=e||"",(-1===e.indexOf("/")?n:s["default"].storageHost)+e},r={};return r.ratio=e.width?e.width/e.height:16/9,r.videoSrc=i(e.mp4_path||e.lossless_mp4_path||"video.mp4"),r.posterSrc=i(e.thumb),r.nickname=e.owner&&e.owner.nickname,r.userColor=r.nickname&&a["default"].stringToColor(r.nickname),r.avatarPath=e.owner&&a["default"].absolutePath(e.owner.avatar_path),r.shotOn=e.shot_on&&a["default"].formatDate(e.shot_on,"MMM dd, yyyy at hh:m a/p"),r.address=e.address,t&&(r.customData=t(e)),r},getPlayerSize:function(e){var t=e.element,n=e.videoElement,i=e.video,r=e.ratio,s=e.isFullScreen,o=e.customSize,a={width:(n||t).offsetWidth,styleWidth:"100%",styleHeight:"100%"};if(s)a.height=window.innerHeight;else if(a.height=t.parentElement.offsetHeight,o){switch(typeof o){case"string":"auto"===o&&(a.height=a.width/r);break;case"object":a.height=o.height||a.height,a.width=o.width||a.width;break;case"function":a=o(i,{width:a.width,height:a.height})}a.styleHeight=a.height+"px","auto"!==o&&(a.styleWidth=a.width+"px")}return a},getPlayerPosition:function(e){var t=e.containerWidth,n=e.containerHeight,i=e.ratio,r=e.isScreenExpanded,s=e.videoMode,o=t/n,a=void 0,l=void 0,u=0,c=0,h=r,d=1,p=i>o?o/i:i/o;return"full"===s&&(r=!0),1-p>.5&&r===!1&&"cut"!==s&&(d=2*p),o>=i===r?(l=d*n,a=l*i,u=(1-d)*n/2,c=(t-a)/2):(a=d*t,l=a/i,u=(n-l)/2,c=(1-d)*t/2),1>i&&(h=!0),{height:l,width:a,top:u,left:c,isShowScreenExpansion:h}}};n["default"]=l,t.exports=n["default"]},{"../../../config":186,"../../common/helpers":188,"babel-runtime/helpers/interop-require-default":13}],209:[function(e,t,n){t.exports='<div class="v-player{{#noSource}} v-player--error{{/}}{{#videoSrc}} v-player--inited{{/}}{{#(containerStyleWidth && containerStyleWidth !== \'100%\')}} v-player--fixed{{/}}"> {{>videoElement}} {{#modules.videoInfo}} {{>videoInfo}} {{/}}<div class="v-player-controls"> {{#modules.progress}} {{>progress}} {{/}} {{#modules.rate}} {{>rate}} {{/}} {{#modules.volume}} {{>volume}} {{/}} {{#modules.expand}} {{>expand}} {{/}} {{#modules.fullscreen}} {{>fullscreen}} {{/}}</div> {{#noSource}}<div class="v-player-error">This video is either unavailable or not supported in this browser</div> {{/}}</div>'},{}],210:[function(e,t,n){"use strict";var i=e("lodash/lang/isNumber"),r=e("babel-runtime/helpers/interop-require-default")["default"],s=r(i),o=e("lodash/object/merge"),a=r(o),l=e("lodash/lang/isBoolean"),u=r(l),c=e("lodash/collection/indexBy"),h=r(c),d=e("lodash/object/pick"),p=r(d),f=e("lodash/array/findIndex"),m=r(f),v=e("babel-runtime/helpers/get")["default"],g=e("babel-runtime/helpers/inherits")["default"],y=e("babel-runtime/helpers/create-class")["default"],b=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(n,"__esModule",{value:!0});var _=e("ractive"),w=r(_),k=e("bootstrap-slider"),x=r(k),E=e("../../common/helpers"),S=r(E),C=e("../base"),A=r(C),j=e("../../services/videos"),P=r(j),T=e("./helpers"),F=r(T);w["default"].partials.videoElement=e("./elements/videoElement.html"),w["default"].partials.videoPoster=e("./elements/videoPoster.html"),w["default"].partials.videoInfo=e("./elements/videoInfo.html"),w["default"].partials.progress=e("./elements/progress.html"),w["default"].partials.rate=e("./elements/rate.html"),w["default"].partials.volume=e("./elements/volume.html"),w["default"].partials.expand=e("./elements/expand.html"),w["default"].partials.fullscreen=e("./elements/fullscreen.html");var O=function(t){function n(e){b(this,n),v(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this._ractive.on("togglePlayback",this._togglePlayback.bind(this)),this._ractive.on("toggleScreenExpansion",this._toggleScreenExpansion.bind(this)),this._ractive.on("toggleFullScreen",this.toggleFullScreen.bind(this))}return g(n,t),y(n,null,[{key:"params",get:function(){return{elementName:"v-player",rootSelector:".v-player",template:e("./player.html"),templateElements:{VIDEO_ELEMENT:"videoElement",VIDEO_INFO_MODULE:"videoInfo",PROGRESS_MODULE:"progress",RATE_MODULE:"rate",VOLUME_MODULE:"volume",EXPAND_MODULE:"expand",FULLSCREEN_MODULE:"fullscreen"}}}}]),y(n,[{key:"_init",value:function(){var e=this;this._videoInner=this._element.querySelector(".v-player-video"),this._videoEl=this._element.querySelector(".v-player-video-el"),this._spinner=S["default"].createSpinner(),this._videoEl.addEventListener("playing",function(){clearTimeout(e._playTimeout),clearTimeout(e._spinnerTimeout),e._togglePoster(!1),e._data.isPlaying=!0,e._data.isPaused=!1,e._data.isLoading=!1,e._triggerEvent("playing")}),this._videoEl.addEventListener("play",function(){clearTimeout(e._playTimeout),e._triggerEvent("play"),e._playTimeout=setTimeout(function(){e._togglePoster(!0)},50)}),this._videoEl.addEventListener("pause",function(){e._data.isLoading=!1,e._data.isStartPlaying=!1,e._data.isPlaying=!1,e._data.isPaused=!0,e._triggerEvent("pause")}),this._videoEl.addEventListener("ended",function(){e._triggerEvent("ended"),e._params.loop===!0&&e._videoEl.play()}),this._videoEl.addEventListener("webkitbeginfullscreen",function(){e._data.isFullScreen=!0,e._triggerEvent("enterfullscreen")}),this._videoEl.addEventListener("webkitendfullscreen",function(){e._data.isFullScreen=!1,e._triggerEvent("exitfullscreen")}),this._videoEl.addEventListener("suspend",function(){e._data.isLoaded||(e._data.isLoaded=!0,e._triggerEvent("loaded"))}),this._videoEl.addEventListener("progress",function(){var t=void 0;e._videoEl&&e._videoEl.buffered.length&&(t=parseInt((e._videoEl.buffered.end(0)/e._videoEl.duration).toFixed(1))),t&&(1===t?e._data.isLoaded||(e._data.isLoaded=!0,e._triggerEvent("loaded")):e._triggerEvent("progress",t))}),this._videoEl.addEventListener("timeupdate",function(){e._data.progress=1e3*e._videoEl.currentTime,e._triggerEvent("timeupdate",e._videoEl.currentTime)}),this._videoEl.addEventListener("error",function(){var t=-1!==e._videoEl.src.indexOf(".mp4");e._videoEl.error&&e._videoEl.error.MEDIA_ERR_SRC_NOT_SUPPORTED===e._videoEl.error.code&&t&&(e._data.isLoading=!1,e._data.noSource=!0,clearTimeout(e._spinnerTimeout)),e._triggerEvent("error",e._videoEl.error)}),this._videoEl.addEventListener("canplay",this._initControls.bind(this)),this._video.id&&this._initVideo(),this._videoId&&P["default"].get(this._videoId).then(function(t){return t.length&&e.setVideo(t[0])}),this._params.playOnFocus&&S["default"].getScrollBoxes(this._element).forEach(function(t){var n=void 0,i=function(){n=t.innerHeight||t.offsetHeight};i(),e._externalEventListener(window,"resize",i),e._externalEventListener(t,"scroll",function(){if(!e._userPause){var t=e._element.getBoundingClientRect().top,i=n/2,r=t+e._data.containerHeight>i&&i>t;(r!==e._data.isStartPlaying||r===e._data.isPaused)&&e[r?"play":"pause"]()}})}),this._videoEl.volume=(s["default"](this._params.volume)?this._params.volume:50)/100,this._videoEl.playbackRate=this._params.rate||1,this._params.autoPlay&&this.play(),this._createControls(),this._externalEventListener(window,"resize",this._updateSize.bind(this)),this._externalEventListener(document,"fullscreenchange webkitfullscreenchange mozfullscreenchange\n			MSFullscreenChange",this._onFullScreenChange.bind(this))}},{key:"_initVideo",value:function(){this._clearData(),a["default"](this._data,F["default"].getVideoData(this._video,this.templateData)),this._updateSize(!0)}},{key:"_clearData",value:function(){this._data.isLoaded=!1,this._data.isPlaying=!1,this._data.isStartPlaying=!1,this._data.isPaused=!1,this._data.noSource=!1,this._data.toggleFullScreen=!1,this._data.isScreenExpanded=!1,this._data.isShowScreenExpansion=!1,this._data.showPoster=!0,this._data.ratio=4/3,this._data.videoSrc="",this._data.posterSrc="",this._data.duration=0,this._data.progress=0,this._data.video=null,this._data.nickname="",this._data.userColor="",this._data.avatarPath="",this._data.shotOn="",this._data.address="",this._data.customData=null,this._data.containerWidth=0,this._data.containerHeight=0,this._data.containerStyleWidth="",this._data.containerStyleHeight="",this._data.videoWidth=0,this._data.videoHeight=0,this._data.videoTop=0,this._data.videoLeft=0,void 0===this._data.rate&&(this._data.rate=2),void 0===this._data.volume&&(this._data.volume=50)}},{key:"_parseData",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this._video=e.video||{},this._data={},this._data.modules=[],this._videoId=e.videoId,this.templateData=e.templateData,!u["default"](e.modules)||e.modules){var t=e.modules||["progress","rate","volume","expand","fullscreen","videoInfo"];e.videoMode&&"auto"!==e.videoMode&&(t=t.filter(function(e){return"expand"!==e})),e.template&&e.templateElements&&(t=t.filter(function(t){var n=t.replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()}).toUpperCase()+"_MODULE";return-1!==e.templateElements.indexOf(n)})),this._data.modules=h["default"](t)}return this._data.videoMode=e.videoMode,this._params=p["default"](e,"volume","rate","loop","autoPlay","size","playOnFocus"),this._params.playOnFocus&&delete this._params.autoPlay,this._clearData(),this._data}},{key:"load",value:function(){(-1===this._data.videoSrc.search("http")?-1===this._videoEl.src.indexOf(this._data.videoSrc):this._videoEl.src!==this._data.videoSrc)&&(this._videoEl.setAttribute("preload","auto"),this._videoEl.setAttribute("src",this._data.videoSrc),this._videoEl.load())}},{key:"unload",value:function(){this.pause(),this._videoEl.setAttribute("preload","none"),this._videoEl.setAttribute("src",""),this._data.isLoaded=!1,this._togglePoster(!0)}},{key:"play",value:function(e){var t=this;e=e||{},this._data.noSource||this._data.isPlaying||(this.load(),clearTimeout(this._playTimeout),clearTimeout(this._spinnerTimeout),this._playTimeout=setTimeout(function(){t._togglePoster(!0)},50),this._spinnerTimeout=setTimeout(function(){t._data.isLoading=!0},2e3),this._videoEl.play(),this._data.isStartPlaying=!0,e.currentTime&&this._videoEl.duration>e.currentTime&&(this._videoEl.currentTime=e.currentTime))}},{key:"pause",value:function(){clearTimeout(this._playTimeout),clearTimeout(this._spinnerTimeout),this._data.isLoading=!1,this._data.isStartPlaying=!1,this._data.isPlaying=!1,this._data.isPaused=!0,this._videoEl.pause()}},{key:"getVideo",value:function(){return this._video}},{key:"setVideo",value:function(e){this.unload(),this._video=e,this._initVideo(),this._params.autoPlay&&this.play()}},{key:"getVolume",value:function(){return this._videoEl.volume}},{key:"setVolume",value:function(e){if(e=e>1?e/100:e,e!==this._videoEl.volume){if(this._videoEl.volume=e,this._data.modules.volume){var t=100*e;this._sliders.volume.getValue()!==t&&this._sliders.volume.setValue(t)}this._triggerEvent("volumeupdate",this._videoEl.volume)}}},{key:"getCurrentTime",value:function(){return this._videoEl.currentTime}},{key:"setCurrentTime",value:function(e){this._videoEl.currentTime=e}},{key:"getPlaybackRate",value:function(){return this._videoEl.playbackRate}},{key:"setPlaybackRate",value:function(e){if(this._videoEl.playbackRate!==e){if(this._videoEl.playbackRate=e,this._data.modules.rate){var t=m["default"](this._rates,function(t){return t===e});this._sliders.rate.getValue()!==t&&this._sliders.rate.setValue(t)}this._triggerEvent("rateupdate",e)}}},{key:"getLoop",value:function(){return this._params.loop}},{key:"setLoop",value:function(e){this._params.loop=e}},{key:"getState",value:function(){return this._videoEl.paused?"paused":"playing"}},{key:"isLoaded",value:function(){return this._data.isLoaded}},{key:"isFullScreen",value:function(){return this._data.isFullScreen}},{key:"toggleFullScreen",value:function(){this._data.isFullScreen?S["default"].exitFullScreen():(this._data.isFullScreen=!0,S["default"].requestFullScreen(this._element))}},{key:"updateSize",value:function(){this._updateSize()}},{key:"destroy",value:function(){this.unload(),v(Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"_updateSize",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=F["default"].getPlayerSize({element:this._element,video:this._video,videoElement:this._videoInner,ratio:this._data.ratio,isFullScreen:this._data.isFullScreen,customSize:this._params.size});this._data.containerWidth=t.width,this._data.containerHeight=t.height,this._data.containerStyleWidth=t.styleWidth,this._data.containerStyleHeight=t.styleHeight,e===!0?this._updatePosition():setTimeout(this._updatePosition.bind(this),0)}},{key:"_updatePosition",value:function(){if(this._video.id){var e=F["default"].getPlayerPosition(this._data);this._data.isShowScreenExpansion=e.isShowScreenExpansion,this._data.videoWidth=e.width,this._data.videoHeight=e.height,this._data.videoTop=e.top,this._data.videoLeft=e.left}}},{key:"_toggleSpinner",value:function(e){e?this._spinner.spin(this._element):this._spinner.stop()}},{key:"_togglePoster",value:function(e){this._ractive.set("showPoster",e)}},{key:"_togglePlayback",value:function(){this._userPause=!this._videoEl.paused,this[this._videoEl.paused?"play":"pause"]()}},{key:"_toggleScreenExpansion",value:function(){this._data.isScreenExpanded=!this._data.isScreenExpanded,this._updatePosition()}},{key:"_createControls",value:function(){var e=this;this._rates=[.5,.7,1,1.5,2],this._sliders={},this._data.modules.progress&&(this._sliders.progress=new x["default"](this._element.querySelector(".v-player-progress-el"),{min:0,step:1,max:1e3*this._videoEl.duration}).on("change",function(t){Math.abs(t.newValue-t.oldValue)>1e3&&e.setCurrentTime(t.newValue/1e3)}).on("slide",function(t){return e.setCurrentTime(t/1e3)}),this._ractive.observe("progress",function(t){return e._sliders.progress.setValue(t)})),this._data.modules.rate&&(this._sliders.rate=new x["default"](this._element.querySelector(".v-player-rate-el"),{min:0,step:1,max:4,value:2,orientation:"vertical",selection:"after",reversed:!0,formatter:function(t){return e._rates[t]+"X";

}}).on("change",function(t){return e.setPlaybackRate(e._rates[t.newValue])}).on("slide",function(t){return e.setPlaybackRate(e._rates[t])})),this._data.modules.volume&&(this._sliders.volume=new x["default"](this._element.querySelector(".v-player-volume-el"),{min:0,step:1,max:100,value:50,orientation:"vertical",selection:"after",reversed:!0,formatter:function(t){return e._rates[t]+"X"}}).on("change",function(t){return e.setVolume(t.newValue)}).on("slide",function(t){return e.setVolume(t)}))}},{key:"_initControls",value:function(){this._data.modules.progress&&(this._data.duration=1e3*this._videoEl.duration,this._sliders.progress.setAttribute("max",this._data.duration)),this._data.modules.rate&&this._videoEl.playbackRate&&(this._videoEl.playbackRate=this._rates[this._data.rate])}},{key:"_onFullScreenChange",value:function(){this._data.isFullScreen&&(this._data.isFullScreen=!!S["default"].getFullScreenElement(),this._triggerEvent(this._data.isFullScreen?"enterfullscreen":"exitfullscreen"))}}]),n}(A["default"]);n["default"]=O,t.exports=n["default"]},{"../../common/helpers":188,"../../services/videos":197,"../base":198,"./elements/expand.html":200,"./elements/fullscreen.html":201,"./elements/progress.html":202,"./elements/rate.html":203,"./elements/videoElement.html":204,"./elements/videoInfo.html":205,"./elements/videoPoster.html":206,"./elements/volume.html":207,"./helpers":208,"./player.html":209,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,"bootstrap-slider":79,"lodash/array/findIndex":82,"lodash/collection/indexBy":88,"lodash/lang/isBoolean":162,"lodash/lang/isNumber":166,"lodash/object/merge":176,"lodash/object/pick":178,ractive:184}],211:[function(e,t,n){t.exports='<div class="v-playlist v-playlist--feed"><div class="v-playlist-players"><div class="v-playlist-players-item v-playlist-players-item--left"></div><div class="v-playlist-players-item v-playlist-players-item--center"></div><div class="v-playlist-players-item v-playlist-players-item--right"></div></div><div class="v-playlist-feed"> {{#videoFeed}}<div class="v-playlist-feed-item{{#videoWidth}} v-playlist-feed-item--inited{{/}}"> <%PLAYER%></div> {{/}}</div></div>'},{}],212:[function(e,t,n){"use strict";var i=e("lodash/array/findIndex"),r=e("babel-runtime/helpers/interop-require-default")["default"],s=r(i),o=e("lodash/lang/isEmpty"),a=r(o),l=e("lodash/collection/indexBy"),u=r(l),c=e("lodash/object/extend"),h=r(c),d=e("lodash/collection/find"),p=r(d),f=e("babel-runtime/helpers/get")["default"],m=e("babel-runtime/helpers/inherits")["default"],v=e("babel-runtime/helpers/create-class")["default"],g=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(n,"__esModule",{value:!0});var y=e("../../../common/helpers"),b=r(y),_=e("../../player/player"),w=r(_),k=e("../../player/helpers"),x=r(k),E=e("../standard/standard"),S=r(E),C=function(t){function n(e){g(this,n);var t=n.params.template,i=w["default"].params.template;e.data.player&&e.data.player.template&&(i=w["default"].prototype._parseTemplate(e.data.player.template).template),i=i.replace("{{>videoElement}}","{{>videoPoster}}"),e.data.template=t.replace("<%PLAYER%>",i),f(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e)}return m(n,t),v(n,null,[{key:"params",get:function(){return{elementName:"v-playlist",rootSelector:".v-playlist",template:e("./feed.html")}}}]),v(n,[{key:"_init",value:function(){var e=this;f(Object.getPrototypeOf(n.prototype),"_init",this).call(this),this._currentVideo={},this._scrollPosition=0,this._playVideoTimeout=null,this._playVideoTimeoutDuration=0,this._scrollPosition=0,this._scrollTimestamp=(new Date).getTime(),this._fullScreenVideoId="",this._isFullScreen=!1,this._scrollBoxes=b["default"].getScrollBoxes(this._element),this._players.forEach(function(t){var n=t.instance;n.subscribe("play",function(){e._currentVideo.id!==n.getVideo().id&&e._pauseCurrentVideo()}),n.subscribe("ended",function(){if(e._isCenterPlayer(n)&&e._isFullScreen){var i=s["default"](e._data.videoFeed,function(t){return t.id===e._currentVideo.id}),r=e._data.videoFeed[i+1];r&&(e._currentVideo=r,t.id=r.id,n.setVideo(r.video),n.play())}}),n.subscribe("enterfullscreen",function(){e._fullScreenVideoId=e._currentVideo.id,e._isFullScreen=!0}),n.subscribe("exitfullscreen",function(){e._currentVideo.id!==e._fullScreenVideoId?!function(){var t=function n(){setTimeout(function(){window.removeEventListener("resize",n),e._scrollToVideo(e._currentVideo,!0),e._isFullScreen=!1},0)};e._setCurrentVideo(e._currentVideo,!0),window.addEventListener("resize",t)}():e._isFullScreen=!1,e._fullScreenVideoId=""})}),this._videos.unsubscribe("update"),this._videos.subscribe("update",function(t,n){e._toggleSpinner(!1),e._updateVideoFeed(),e._triggerEvent("playlist.change",n)}),this._externalEventListener(window,"resize",function(){e._updateVideoFeedSizes(),e._updatePlayersPosition()}),this._scrollBoxes.forEach(function(t){e._externalEventListener(t,"scroll",function(){if(!e._isFullScreen){var n=(new Date).getTime(),i=t.innerHeight||t.offsetHeight,r=-e._element.getBoundingClientRect().top;if(e._playVideoTimeoutDuration=50*Math.abs(e._scrollPosition-r)/(n-e._scrollTimestamp),e._scrollPosition=r,e._scrollTimestamp=n,!a["default"](e._data.videoFeed)){var s=Math.max(i/2+r,0),o=void 0,l=void 0,u=void 0,c=void 0;if(s){do{if("undefined"==typeof u?(u=0,c=0,l=0):u++,o=e._data.videoFeed[u],!o)break;c=o.element?o.element.offsetTop:0,l=o.outerHeight}while(!(s>=c&&c+l>=s));o?(e._currentVideo.id!==o.id||e._currentVideo.overScrollPause===!0)&&e._playVideo(o):e._pauseCurrentVideo()}else e._pauseCurrentVideo()}}})})}},{key:"_parseData",value:function(e){return f(Object.getPrototypeOf(n.prototype),"_parseData",this).call(this,e),this._playerParams.size=e.player.size||"auto",this._playerParams.loop=!0,this._data.videoFeed=[],this._data}},{key:"_updateVideoFeed",value:function(){var e=this,t=this._videos.getVideos(),n=this._players.center.instance._data.modules,i=u["default"](this._data.videoFeed,"id");this._ractive.merge("videoFeed",t.map(function(t){var r=x["default"].getVideoData(t,e._playerParams.templateData);return r.id=t.id,r.video=t,r.modules=n,h["default"]({},i[t.id],r)}),{compare:"id"}),setTimeout(this._updateVideoFeedSizes.bind(this)),setTimeout(this._updateVideos.bind(this))}},{key:"_updateVideoFeedSizes",value:function(){var e=this,t=this._currentVideo.element,n=this._element.querySelectorAll(".v-playlist-feed-item"),i=void 0;t&&(i=t.getBoundingClientRect().top),this._ractive.merge("videoFeed",this._data.videoFeed.map(function(r,s){var o=n[s],a=o.querySelector(".v-player-video"),l=x["default"].getPlayerSize({element:e._element,videoElement:a,video:r,ratio:r.ratio,customSize:e._playerParams.size}),u=x["default"].getPlayerPosition({containerWidth:l.width,containerHeight:l.height,ratio:r.ratio,isScreenExpanded:!1}),c=window.getComputedStyle(o),h=parseInt(c.marginTop,10)+parseInt(c.marginBottom,10);return r.containerWidth=l.width,r.containerHeight=l.height,r.containerStyleWidth=l.styleWidth,r.containerStyleHeight=l.styleHeight,r.videoWidth=u.width,r.videoHeight=u.height,r.videoTop=u.top,r.videoLeft=u.left,r.outerHeight=o.offsetHeight+h+(r.element?0:r.containerHeight),r.element=o,t&&e._currentVideo.id===r.id&&e._scrollContainer(e._getClosestScrollBox(),o.getBoundingClientRect().top-i),r}),{compare:"id"})}},{key:"_updateVideos",value:function(){if(f(Object.getPrototypeOf(n.prototype),"_updateVideos",this).call(this),this._updatePlayersPosition(),(this._currentVideo.id||this._autoPlay)&&this._currentVideo.id!==this._players.center.id){var e=p["default"](this._data.videoFeed,{id:this._players.center.id});e&&(this._currentVideo=e,e.element&&this._scrollToVideo(e),this._players.center.instance.play())}}},{key:"_updatePlayersPosition",value:function(){var e=this;this._data.videoFeed.forEach(function(e){return e.element&&e.element.classList.remove("v-invisible")}),this._players.forEach(function(t){var n=t.instance._element.parentElement,i=p["default"](e._data.videoFeed,{id:t.id});if(i&&i.element){var r=i.element.getBoundingClientRect().top-e._element.getBoundingClientRect().top;n.style.height=i.element.offsetHeight+"px",n.style.width=i.element.offsetWidth+"px",n.style.left=i.element.offsetLeft+"px",n.style.top=r+"px",n.classList.remove("v-hide"),i.element.classList.add("v-invisible"),t.instance.updateSize()}else n.classList.add("v-hide")})}},{key:"_playVideo",value:function(e){var t=this;b["default"].isMobile?this._setCurrentVideo(e):(clearTimeout(this._playVideoTimeout),this._playVideoTimeout=setTimeout(function(){t._setCurrentVideo(e),t._playVideoTimeoutDuration=0},this._playVideoTimeoutDuration))}},{key:"_setCurrentVideo",value:function(e,t){if(this._currentVideo.overScrollPause=!1,this._currentVideo.id!==e.id||t)this._pauseCurrentVideo(),this._currentVideo=e,this._videos.setCurrentVideo(e.id);else{var n=this._players.center.instance;"playing"!==n.getState()&&n.play()}}},{key:"_pauseCurrentVideo",value:function(){var e=this._players.center.instance;e&&"paused"!==e.getState()&&(this._currentVideo.overScrollPause=!0,e.pause())}},{key:"_scrollToVideo",value:function(e,t){var n=e.element||(p["default"](this._data.videoFeed,{id:e.id})||{}).element;if(n){var i=n.getBoundingClientRect().top,r=this._getClosestScrollBox(),s=r.innerHeight||r.offsetHeight;(i>s||e.outerHeight+i<=0||t)&&this._scrollContainer(r,i+e.outerHeight/2-s/2)}}},{key:"_getClosestScrollBox",value:function(){var e=-1,t=void 0;do e++,t=this._scrollBoxes[e];while(t&&t.scrollHeight<=t.clientHeight);return t||window}},{key:"_scrollContainer",value:function(e,t){(e===window?document.body:e).scrollTop+=t}},{key:"toggleFullScreen",value:function(){var e=this._players.center.instance;e._data.isFullScreen?b["default"].exitFullScreen():(e._data.isFullScreen=!0,b["default"].requestFullScreen(e._element))}}]),n}(S["default"]);n["default"]=C,t.exports=n["default"]},{"../../../common/helpers":188,"../../player/helpers":208,"../../player/player":210,"../standard/standard":215,"./feed.html":211,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,"lodash/array/findIndex":82,"lodash/collection/find":86,"lodash/collection/indexBy":88,"lodash/lang/isEmpty":163,"lodash/object/extend":173}],213:[function(e,t,n){"use strict";var i=e("babel-runtime/helpers/create-class")["default"],r=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../common/helpers"),a=s(o),l=e("./feed/feed"),u=s(l),c=e("./standard/standard"),h=s(c),d=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e);var n=t.data&&t.data.type||"standard";return"standard"===n?new h["default"](t):"feed"===n?new u["default"](t):void a["default"].triggerError("Wrong type of playlist component")}return i(e,null,[{key:"params",get:function(){return{elementName:"v-playlist",rootSelector:".v-playlist"}}}]),e}();n["default"]=d,t.exports=n["default"]},{"../../common/helpers":188,"./feed/feed":212,"./standard/standard":215,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13}],214:[function(e,t,n){t.exports='<div class="v-playlist{{#type}} v-playlist--{{type}}{{/}}"><div class="v-playlist-players"><div class="v-playlist-players-item v-playlist-players-item--left"></div><div class="v-playlist-players-item v-playlist-players-item--center"></div><div class="v-playlist-players-item v-playlist-players-item--right"></div></div><div class="v-playlist-arrow v-playlist-arrow--prev{{^prevExists}} v-hide{{/}}" on-click="previousVideo"></div><div class="v-playlist-arrow v-playlist-arrow--next{{^nextExists}} v-hide{{/}}" on-click="nextVideo"></div></div>'},{}],215:[function(e,t,n){"use strict";var i=e("lodash/object/assign"),r=e("babel-runtime/helpers/interop-require-default")["default"],s=r(i),o=e("lodash/lang/isBoolean"),a=r(o),l=e("lodash/lang/isEmpty"),u=r(l),c=e("lodash/collection/forEach"),h=r(c),d=e("lodash/utility/times"),p=r(d),f=e("babel-runtime/helpers/get")["default"],m=e("babel-runtime/helpers/inherits")["default"],v=e("babel-runtime/helpers/create-class")["default"],g=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(n,"__esModule",{value:!0});var y=e("../../../common/helpers"),b=r(y),_=e("../../player/player"),w=r(_),k=e("../../base"),x=r(k),E=e("../storage"),S=r(E),C=function(t){function n(e){g(this,n),f(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this._ractive.on("previousVideo",this.previousVideo.bind(this)),this._ractive.on("nextVideo",this.nextVideo.bind(this))}return m(n,t),v(n,null,[{key:"params",get:function(){return{elementName:"v-playlist",rootSelector:".v-playlist",template:e("./standard.html")}}}]),v(n,[{key:"_init",value:function(){var e=this;this._players=[],Object.defineProperty(this._players,"left",{get:function(){return this[0]}}),Object.defineProperty(this._players,"center",{get:function(){return this[1]}}),Object.defineProperty(this._players,"right",{get:function(){return this[2]}}),["left","center","right"].forEach(function(t){var n=e._element.querySelector(".v-playlist-players-item--"+t),i=new w["default"]({container:n,data:e._playerParams});e._players.push({position:t,element:n,instance:i}),i._ractive.off("toggleFullScreen"),i._ractive.on("toggleFullScreen",e.toggleFullScreen.bind(e)),i.subscribe("loaded",function(){e._isCenterPlayer(i)&&(e._players.left.instance.load(),e._players.right.instance.load())}),i.subscribe("ended",function(){e._isCenterPlayer(i)&&!i.getLoop()&&e.nextVideo()}),i.subscribe("rateupdate",function(t,n){e._isCenterPlayer(i)&&(e._players.left.instance.setPlaybackRate(n),e._players.right.instance.setPlaybackRate(n))}),i.subscribe("volumeupdate",function(t,n){e._isCenterPlayer(i)&&(e._players.left.instance.setVolume(n),e._players.right.instance.setVolume(n))}),i.subscribe("*",function(t,n){e._isCenterPlayer(i)&&e._triggerEvent("video."+t,n)})}),this._spinner=b["default"].createSpinner(),this._toggleSpinner(!0),this._videos.subscribe("update",function(t,n){e._toggleSpinner(!1),e._updateVideos(),e._triggerEvent("playlist.change",n)}),this._videos.subscribe("empty",function(){e._triggerEvent("playlist.empty")}),this._videos.subscribe("currentchange",this._updateVideos.bind(this)),this._externalEventListener(document,"fullscreenchange webkitfullscreenchange mozfullscreenchange\n			MSFullscreenChange",this._onFullScreenChange.bind(this))}},{key:"_parseData",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this._playerParams=s["default"]({},e.player),a["default"](this._playerParams.autoPlay)&&(this._autoPlay=this._playerParams.autoPlay,delete this._playerParams.autoPlay),delete this._playerParams.size,u["default"](e.group)&&(e.group={}),e.group.userInfo=e.modules?-1!==e.modules.indexOf("videoInfo"):!0,this._videos=new S["default"]({videos:e.videos,group:e.group}),this._data={},this._data.prevExists=!1,this._data.nextExists=!1,this._data}},{key:"addVideos",value:function(e,t){this._videos.addVideos(e,t)}},{key:"resetVideos",value:function(e){this._videos.resetVideos(e)}},{key:"getVideos",value:function(){return this._videos.getVideos()}},{key:"fetchPreviousVideos",value:function(){return this._videos.fetchPreviousVideos()}},{key:"fetchNextVideos",value:function(){return this._videos.fetchNextVideos()}},{key:"resetGroup",value:function(e){this._videos.resetGroup(e)}},{key:"getGroup",value:function(){return this._videos.getGroup()}},{key:"getCurrentVideo",value:function(){return this._players.center.instance.getVideo()}},{key:"setCurrentVideo",value:function(e){this._videos.setCurrentVideo(e)}},{key:"previousVideo",value:function(){this._videos.previousVideo()}},{key:"nextVideo",value:function(){this._videos.nextVideo()}},{key:"play",value:function(e){return this._players.center.instance.play(e)}},{key:"pause",value:function(){return this._players.center.instance.pause()}},{key:"getVolume",value:function(){return this._players.center.instance.getVolume()}},{key:"setVolume",value:function(e){this._players.center.instance.setVolume(e)}},{key:"getCurrentTime",value:function(){return this._players.center.instance.getCurrentTime()}},{key:"setCurrentTime",value:function(e){this._players.center.instance.setCurrentTime(e)}},{key:"getPlaybackRate",value:function(){return this._players.center.instance.getCurrentTime()}},{key:"setPlaybackRate",value:function(e){this._players.center.instance.setCurrentTime(e)}},{key:"getState",value:function(){return this._players.center.instance.getState()}},{key:"isLoaded",value:function(){return this._players.center.instance.isLoaded()}},{key:"isFullScreen",value:function(){return this._players.center.instance.isFullScreen()}},{key:"updateSize",value:function(){this._players.left.instance.updateSize(),this._players.center.instance.updateSize(),this._players.right.instance.updateSize()}},{key:"toggleFullScreen",value:function(){this._data.isFullScreen?b["default"].exitFullScreen():(this._data.isFullScreen=!0,b["default"].requestFullScreen(this._element))}},{key:"destroy",value:function(){this._players&&this._players.forEach(function(e){return e.instance.destroy()}),f(Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"_onFullScreenChange",value:function(){this._data.isFullScreen&&(this._data.isFullScreen=!!b["default"].getFullScreenElement(),this._triggerEvent("playlist.enterfullscreen"))}},{key:"_updateVideos",value:function(){var e=this,t=this._videos.getCurrentVideos();u["default"](t)||!function(){var n=t[1].id&&t[1].id!==e._players.center.id,i=e._players.center.instance.isFullScreen(),r=void 0;if(e._data.prevExists=!!t[0].id,e._data.nextExists=!!t[2].id,i||b["default"].isMobile)e._players.center.instance.setVideo(t[1]),e._players.center.id=t[1].id,i&&(e._players.center.instance.updateSize(),e._players.center.instance.play());else{h["default"](t,function(t,n){h["default"](e._players,function(e,i){e.id&&e.id===t.id&&(r=n-i)})}),void 0!==r&&p["default"](Math.abs(r),function(){var t=e._players[r>0?"pop":"shift"]();e._players.splice(r>0?0:e._players.length,0,t)}),h["default"](e._players,function(e,n){var i=t[n];i.id&&e.id!==i.id&&(e.id=i.id,e.instance.setVideo(i)),e.position=["left","center","right"][n],e.element.className="v-playlist-players-item v-playlist-players-item--"+e.position});var s=e._players.center.instance.getState();"playing"!==s&&(e._players.left.instance.pause(),e._players.right.instance.pause(),e._autoPlay&&("paused"!==s||n)&&e._players.center.instance.play(),e._players.center.instance.isLoaded()&&(e._players.left.instance.load(),e._players.right.instance.load()))}n&&e._triggerEvent("video.change",t[1])}()}},{key:"_toggleSpinner",value:function(e){e?this._spinner.spin(this._element):this._spinner.stop()}},{key:"_isCenterPlayer",value:function(e){return e.getVideo().id===this._players.center.id}}]),n}(x["default"]);n["default"]=C,t.exports=n["default"]},{"../../../common/helpers":188,"../../base":198,"../../player/player":210,"../storage":216,"./standard.html":214,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,"lodash/collection/forEach":87,"lodash/lang/isBoolean":162,"lodash/lang/isEmpty":163,"lodash/object/assign":172,"lodash/utility/times":182}],216:[function(e,t,n){"use strict";var i=e("lodash/lang/isEmpty"),r=e("babel-runtime/helpers/interop-require-default")["default"],s=r(i),o=e("lodash/object/extend"),a=r(o),l=e("lodash/lang/isArray"),u=r(l),c=e("lodash/lang/isNumber"),h=r(c),d=e("lodash/array/findIndex"),p=r(d),f=e("lodash/array/uniq"),m=r(f),v=e("lodash/collection/sortBy"),g=r(v),y=e("lodash/array/first"),b=r(y),_=e("lodash/array/last"),w=r(_),k=e("lodash/collection/pluck"),x=r(k),E=e("lodash/collection/indexBy"),S=r(E),C=e("lodash/utility/times"),A=r(C),j=e("babel-runtime/helpers/create-class")["default"],P=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(n,"__esModule",{value:!0});var T=e("../../common/pubsub"),F=r(T),O=e("../../services/videos"),L=r(O),D=e("../../services/user"),M=r(D),I=e("../../services/users"),N=r(I),$=function(){function e(t){P(this,e),this.data=t.videos||[],this.group=t.group||{},this.group.order=this.group.order||"asc",this.group.startPoint=this.group.startPoint||"beginning",this.group.perPage=Math.min(this.group.perPage||50,50),this.currentIndex=0,this.noPreviousVideos=!1,this.noNextVideos=!1,this.pubSub=new F["default"],this.subscribe=this.pubSub.subscribe.bind(this.pubSub),this.unsubscribe=this.pubSub.unsubscribe.bind(this.pubSub),!s["default"](t.group)&&t.group.ids?this.fetchVideos():setTimeout(this.pubSub.publish.bind(this.pubSub,"update",this.data))}return j(e,[{key:"resetGroup",value:function(e){a["default"](this.group,e),this.fetchVideos()}},{key:"getGroup",value:function(){return this.group}},{key:"addVideos",value:function(e,t){var n=(this.data[this.currentIndex]||{}).id;e=u["default"](e)?e:[e],t=h["default"](t)?t:this.data.length,Array.prototype.splice.apply(this.data,[t,0].concat(e)),this.currentIndex=Math.max(p["default"](this.data,{id:n}),0),this.pubSub.publish("update",this.data)}},{key:"resetVideos",value:function(e){this.data=e||[],this.setCurrentIndex(0),this.pubSub.publish("update",this.data)}},{key:"getVideos",value:function(){return this.data}},{key:"fetchVideos",value:function(){var e=this;"end"===this.group.startPoint||"beginning"===this.group.startPoint?!function(){var t="asc"===e.group.order,n="end"===e.group.startPoint;L["default"].search({group_ids:e.group.ids,sort_order:t===n?"desc":"asc",per_page:e.group.perPage}).then(function(e){return m["default"](e,"id")}).then(e.getUserInfo.bind(e)).then(function(t){n&&t.reverse(),e.data=t,e[n?"noNextVideos":"noPreviousVideos"]=!0,e.setCurrentIndex(n?e.data.length-1:0),e.pubSub.publish("update",e.data)})}():this.setCurrentVideo(this.group.startPoint)}},{key:"fetchNextPage",value:function(e,t){var n=this,i="asc"===this.group.order,r="before"===t,o=this.data[this.currentIndex].id;return L["default"].search({direction:t,video_id:e.id,group_ids:this.group.ids,per_page:this.group.perPage,sort_order:r?"desc":"asc"}).then(function(e){return m["default"](e,"id")}).then(this.getUserInfo.bind(this)).then(function(e){return i===r?(e.reverse(),n.data=e.concat(n.data),e.length<n.group.perPage&&(n.noPreviousVideos=!0)):(n.data=n.data.concat(e),e.length<n.group.perPage&&(n.noNextVideos=!0)),s["default"](e)||(n.data=g["default"](m["default"](n.data,"id"),"shot_on"),"desc"===n.group.order&&n.data.reverse(),n.currentIndex=p["default"](n.data,{id:o}),n.pubSub.publish("update",n.data)),e})}},{key:"fetchClosestVideos",value:function(){if(s["default"](this.data))this.pubSub.publish("empty");else{var e=Math.min(this.group.perPage,2);this.currentIndex<e&&!this.noPreviousVideos&&this.fetchPreviousVideos(),this.currentIndex>this.data.length-1-e&&!this.noNextVideos&&this.fetchNextVideos()}}},{key:"fetchPreviousVideos",value:function(){return this.fetchNextPage(b["default"](this.data),"asc"===this.group.order?"before":"after")}},{key:"fetchNextVideos",value:function(){return this.fetchNextPage(w["default"](this.data),"asc"===this.group.order?"after":"before")}},{key:"getUserInfo",value:function(e){return this.group.userInfo&&M["default"].isAuthorized()?N["default"].get(x["default"](e,"owner_id")).then(function(t){var n=S["default"](t,"id");return e.map(function(e){return e.owner=n[e.owner_id],e})}):e}},{key:"getCurrentVideo",value:function(){return this.data[this.currentIndex]}},{key:"getCurrentVideos",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],n=this.currentIndex-t,i=[];return A["default"](2*t+1,function(t){i.push(e.data[n+t]||{})}),i}},{key:"setCurrentVideo",value:function(e){var t=p["default"](this.data,{id:e});-1!==t?this.setCurrentIndex(t):s["default"](this.group)||L["default"].get(e).then(this.getUserInfo.bind(this)).then(this.resetVideos.bind(this))}},{key:"setCurrentIndex",value:function(e){this.currentIndex=e,this.pubSub.publish("currentchange",this.data[this.currentIndex]),this.group.ids&&this.fetchClosestVideos()}},{key:"previousVideo",value:function(){return this.currentIndex&&this.setCurrentIndex(this.currentIndex-1),this.getCurrentVideo()}},{key:"nextVideo",value:function(){return this.currentIndex!==this.data.length-1&&this.setCurrentIndex(this.currentIndex+1),this.getCurrentVideo()}}]),e}();n["default"]=$,t.exports=n["default"]},{"../../common/pubsub":189,"../../services/user":195,"../../services/users":196,"../../services/videos":197,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/array/findIndex":82,"lodash/array/first":83,"lodash/array/last":84,"lodash/array/uniq":85,"lodash/collection/indexBy":88,"lodash/collection/pluck":90,"lodash/collection/sortBy":91,"lodash/lang/isArray":161,"lodash/lang/isEmpty":163,"lodash/lang/isNumber":166,"lodash/object/extend":173,"lodash/utility/times":182}],217:[function(e,t,n){t.exports="<div class=\"v-qrcode\" style=\"\n	{{#size}}\n		width: {{size + 'px'}};\n		height: {{size + 'px'}};\n	{{/}}\n\"></div>"},{}],218:[function(e,t,n){"use strict";var i=e("lodash/object/extend"),r=e("babel-runtime/helpers/interop-require-default")["default"],s=r(i),o=e("babel-runtime/helpers/get")["default"],a=e("babel-runtime/helpers/inherits")["default"],l=e("babel-runtime/helpers/create-class")["default"],u=e("babel-runtime/helpers/class-call-check")["default"],c=e("babel-runtime/core-js/object/assign")["default"],h=e("babel-runtime/core-js/object/keys")["default"];Object.defineProperty(n,"__esModule",{value:!0});var d=e("qrcode-js-package"),p=r(d),f=e("../../common/helpers"),m=r(f),v=e("../base"),g=r(v),y=function(t){function n(){u(this,n),o(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return a(n,t),l(n,[{key:"_init",value:function(){this._params.video?(this._element.innerHTML="",this._formatVideo(),this._data.size=this._params.size||200,new p["default"](this._element,{text:JSON.stringify(c({},this._params.video,{origin:window.location.href,qr_id:this.id})),useSVG:!1,width:2*this._data.size,height:2*this._data.size,colorDark:"#000000",colorLight:"transparent",correctLevel:p["default"].CorrectLevel.M})):m["default"].triggerError("You should specify video data for QR code")}},{key:"_parseData",value:function(e){return this._params=e,this._data={},this._data.size=0,this._data}},{key:"_formatVideo",value:function(){var e=this;this._params.video&&"object"==typeof this._params.video&&!function(){var t={};h(e._params.video).forEach(function(n){t[n.replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()})]=e._params.video[n]}),e._params.video=t}()}},{key:"updateParams",value:function(e){s["default"](this._params,e),this._init()}}],[{key:"params",get:function(){return{elementName:"v-qrcode",rootSelector:".v-qrcode",template:e("./qrcode.html")}}}]),n}(g["default"]);n["default"]=y,t.exports=n["default"]},{"../../common/helpers":188,"../base":198,"./qrcode.html":217,"babel-runtime/core-js/object/assign":1,"babel-runtime/core-js/object/keys":6,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,"lodash/object/extend":173,"qrcode-js-package":183}],219:[function(e,t,n){t.exports='<div class="v-upload"><div class="v-upload-inner"><div class="v-upload-btn{{^isInactive}} v-hide{{/}}"> Upload<br>video</div><div class="v-upload-progress{{^isUpload}} v-hide{{/}}"><div class="v-upload-progress-bar" style="width: {{100 - progress + \'%\'}}"></div><div class="v-upload-progress-number">{{progress}}%</div></div><div class="v-upload-processing{{^isProcessing}} v-hide{{/}}"> Processing</div><div class="v-upload-link{{^isDone}} v-hide{{/}}" on-click="watchVideo"> Watch</div></div></div>'},{}],220:[function(e,t,n){"use strict";var i=e("lodash/array/first"),r=e("babel-runtime/helpers/interop-require-default")["default"],s=r(i),o=e("babel-runtime/helpers/get")["default"],a=e("babel-runtime/helpers/inherits")["default"],l=e("babel-runtime/helpers/create-class")["default"],u=e("babel-runtime/helpers/class-call-check")["default"],c=e("babel-runtime/core-js/promise")["default"];Object.defineProperty(n,"__esModule",{value:!0});var h=e("dropzone"),d=r(h),p=e("../../common/helpers"),f=r(p),m=e("../../services/storages"),v=r(m),g=e("../../services/videos"),y=r(g),b=e("../../services/notifications"),_=r(b),w=e("../base"),k=r(w),x=function(t){function n(e){var t=this;u(this,n),o(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this._ractive.on("watchVideo",this._watchVideo.bind(this)),this._videoUpdateHandler=function(e,n){t._video&&t._video.id===n.target_id&&(_["default"].unsubscribe("video.update",t._videoUpdateHandler),t.setState("done"),t._triggerEvent("processing.ended"))}}return a(n,t),l(n,null,[{key:"params",get:function(){return{elementName:"v-upload",rootSelector:".v-upload",template:e("./upload.html")}}}]),l(n,[{key:"_init",value:function(){var e=this;this._group?(f["default"].createSpinner().spin(this._element.querySelector(".v-upload-processing")),this._dropzone=new d["default"](this._element.querySelector(".v-upload-btn"),{url:"empty",acceptedFiles:"video/mpeg,video/mp4,video/quicktime,video/avi",accept:this._createVideo.bind(this),maxFiles:1,uploadMultiple:!1,sending:function(e,t){var n=t.send;t.send=function(){var i=new FileReader;i.readAsArrayBuffer(e),i.onload=function(e){n.call(t,e.target.result)}}},uploadprogress:function(t,n){e._data.progress=Math.round(n),e._triggerEvent("upload.progress",n)},success:function(t){if(t.xhr.responseURL){var n=t.xhr.responseURL.replace(/http(?:s)?:\/\/([^\/]*)\/([^?]*)\?(.*)/g,"$2");/http(s)?:\/\/storage.googleapis.com/.test(t.xhr.responseURL)&&(n=n.replace(/([^\/]*)\/(.*)/g,"$2")),e._triggerEvent("upload.ended"),e._video&&(y["default"].convert(e._video.id,n),e._triggerEvent("processing.start"),e.setState("processing"),_["default"].subscribe("video.update",e._videoUpdateHandler))}},error:function(t,n){f["default"].triggerError(n),e._triggerEvent("upload.error",n),e.setState()}})):f["default"].triggerError("You should specify a group")}},{key:"_parseData",value:function(e){return this._group=e.group,this._data={},this._data.progress=0,this.setState(),this._data}},{key:"updateGroup",value:function(e){this._group=e}},{key:"getState",value:function(){return this._state}},{key:"setState",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"inactive":arguments[0];-1===["inactive","upload","processing","done"].indexOf(e)?f["default"].triggerError(e+" state is not supported, valid values: inactive, upload, processing, done."):(this._state=e,this._data.isInactive=!1,this._data.isUpload=!1,this._data.isProcessing=!1,this._data.isDone=!1,this._data["is"+f["default"].capitalize(e)]=!0,"inactive"===e&&(this._video=null,this._data.progress=0))}},{key:"getProgress",value:function(){return this._data.progress}},{key:"getVideo",value:function(){return this._video}},{key:"destroy",value:function(){this._dropzone.destroy(),_["default"].unsubscribe("video.update",this._videoUpdateHandler),o(Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"_createVideo",value:function(e,t){var n=this;this.setState("upload"),new c(function(e){if("function"==typeof n._group){var t=n._group();t&&t.then?t.then(e):e(t)}else e(n._group)}).then(function(e){return y["default"].create({
group_ids:[e],shot_on:f["default"].formatDate(new Date,"yyyy-mm-ddThh:m:sstz")})}).then(function(t){var i=e.name.split(".");return i[0]=i[0].replace(/\s/g,"_").replace(/[^a-zA-Z\d_]/g,""),i[0]||(i[0]="video"),n._video=t,n._triggerEvent("video.create",t),v["default"].getVideoStorage({provider:"google",video_id:n._video.id,file_name:i.join("."),content_type:e.type,chunk_count:1})}).then(function(i){var r=i&&s["default"](i.chunk_urls);r&&(n.setState("upload"),n._dropzone.options.url=r.url,n._dropzone.options.headers={"Content-Type":e.type},n._dropzone.options.method=r.method,t(),n._triggerEvent("upload.start"))})["catch"](function(e){return n._triggerEvent("error",e.error)})}},{key:"_watchVideo",value:function(){this._triggerEvent("watch",this._video),this.setState()}}]),n}(k["default"]);n["default"]=x,t.exports=n["default"]},{"../../common/helpers":188,"../../services/notifications":192,"../../services/storages":194,"../../services/videos":197,"../base":198,"./upload.html":219,"babel-runtime/core-js/promise":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,dropzone:80,"lodash/array/first":83}],221:[function(e,t,n){"use strict";function i(){var e=document.getElementsByTagName("script"),t=f["default"].queryParams(e[e.length-1].src);t.appId&&P.init(t.appId),t.authToken&&v["default"].setToken({token:t.authToken}),o["default"].DEBUG=/unminified/.test(function(){}),"function"==typeof window.vAsyncInit&&setTimeout(window.vAsyncInit,0)}var r=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(n,"__esModule",{value:!0});var s=e("ractive"),o=r(s),a=e("./config"),l=r(a),u=e("./modules/api"),c=r(u),h=e("./modules/ui/main"),d=r(h),p=e("./modules/common/helpers"),f=r(p),m=e("./modules/services/user"),v=r(m),g=e("./modules/services/groups"),y=r(g),b=e("./modules/services/videos"),_=r(b),w=e("./modules/services/users"),k=r(w),x=e("./modules/services/requests"),E=r(x),S=e("./modules/services/storages"),C=r(S),A=e("./modules/services/notifications"),j=r(A),P={};(!Function.prototype.bind||"prototype"in Function.prototype.bind)&&f["default"].triggerError("Unfortunately V SDK does not support your browser"),P.init=function(e){P.params.appId=l["default"].appId=e},P.ui=d["default"],P.api=c["default"],P.user=v["default"],P.groups=y["default"],P.videos=_["default"],P.users=k["default"],P.requests=E["default"],P.storages=C["default"],P.notifications=j["default"],P.params={storageHost:l["default"].storageHost,apiHost:l["default"].apiHost,appId:null},i(),n["default"]=P,t.exports=n["default"]},{"./config":186,"./modules/api":187,"./modules/common/helpers":188,"./modules/services/groups":191,"./modules/services/notifications":192,"./modules/services/requests":193,"./modules/services/storages":194,"./modules/services/user":195,"./modules/services/users":196,"./modules/services/videos":197,"./modules/ui/main":199,"babel-runtime/helpers/interop-require-default":13,ractive:184}]},{},[221])(221)});